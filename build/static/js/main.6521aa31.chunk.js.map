{"version":3,"sources":["layouts/PrepareWorkout/styles.module.scss","layouts/FinishedWorkout/styles.module.scss","layouts/AdminDashboard/styles.module.scss","layouts/UserList/styles.module.scss","layouts/DifficulityList/styles.module.scss","layouts/RecordList/styles.module.scss","layouts/TrainingWeekRecord/styles.module.scss","layouts/SignIn/styles.module.scss","components/Header/styles.module.scss","layouts/Missing/styles.module.scss","layouts/Unauthorized/styles.module.scss","store/actions.js","constants/path.js","constants/roles.js","constants/warn.js","store/index.js","routes/ProtectedRoutes.js","services/firebase.js","layouts/SignIn/index.js","layouts/AdminDashboard/index.js","assets/images/right-arrow.png","components/Header/index.js","layouts/Missing/index.js","layouts/Unauthorized/index.js","util/helper.js","util/wait.js","layouts/MonitoringWorkout/index.js","layouts/PrepareWorkout/index.js","util/formatSeconds.js","util/configLineChart.js","components/StopWatch/index.js","layouts/UserList/index.js","layouts/DifficulityList/index.js","layouts/FinishedWorkout/index.js","layouts/RecordList/index.js","layouts/TrainingWeekRecord/index.js","routes/index.js","layouts/App/index.js","index.js","layouts/MonitoringWorkout/styles.module.scss"],"names":["module","exports","SET_AUTH","ROUTE_PATH","home","sign_in","unauthorized","admin_dashbaord","prepare_workout","monitoring_workout","user_list","difficulty_list","record_list","finsished_workout","training_week_record","ROLES","WARN","WARN_THRESHOLD","StoreContext","createContext","initialState","auth","isValid","roles","Admin","reducer","state","action","type","payload","StoreProvider","children","useReducer","value","dispatch","Provider","useStore","useContext","ProtectedRoutes","allowedRoles","find","role","includes","replace","to","app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","getAuth","usersRef","collection","recordsRef","difficultiesRef","validateInputPairId","pairId","a","q","query","where","getDocs","querySnapshot","empty","size","forEach","doc","record","data","recordId","id","finishedWorkoutTime","generateValidPairId","pass","test","getRandomPairId","isPairIdValid","Math","floor","random","toString","Content","Layout","Title","Typography","formLayout","labelCol","span","wrapperCol","tailLayout","offset","SignIn","navigate","useNavigate","Form","useForm","form","useState","loading","setLoading","login","validateFields","values","console","log","signInWithEmailAndPassword","email","password","userCredential","user","goDashboard","message","error","className","style","padding","styles","container","layout","autoComplete","Item","label","colon","marginBottom","level","name","rules","required","placeholder","Password","htmlType","onClick","TileWithIconAndAction","icon","tile","addOn","backgroundImage","tileIcon","tileLabel","AdminDashboard","TeamOutlined","SlidersOutlined","ProfileOutlined","RocketOutlined","Header","Missing","Unauthorized","helper","object","defaults","_","list","iteratee","context","Set","Array","from","index","array","call","each","map","obj","mapObject","memo","reduce","every","some","predicate","result","Map","entries","entry","key","findIndex","filter","this","length","max","min","any","isArray","n","isEmpty","first","last","has","b","File","i","JSON","stringify","isNullOrUndefined","isString","isPrimitive","Object","isBoolean","isNumber","isFunction","isDate","isNull","isUndefined","undefined","isExisted","isNotExisted","isObject","Number","isInteger","isFinite","isNaN","isFile","json","parse","e","proto","getPrototypeOf","prototype","React","isValidElement","wait","ms","Promise","resolve","setTimeout","yodelBuffer","yodelBuffer2","yodelBuffer3","yodelBuffer4","yodelBuffer5","Countdown","Statistic","Option","Select","Text","initialPacket","rpm","time","heartRate","unsubscribe","WarnHRValueDisplay","warn","phase","overVal","display","fontSize","PrepareWorkout","users","setUsers","difficulties","setDifficulties","isDone","setIsDone","selectedUser","setSelectedUser","selectedDiff","setSelectedDiff","selectedUserData","setSelectedUserData","selectedDiffData","setSelectedDiffData","userModalVis","setUserModalVis","diffModalVis","setDiffModalVis","warnHRValues","setWarnHRValues","isPairing","setIsPairing","targetgetRecordId","setTargetRecordId","setPairId","isAppConnected","setIsAppConnected","pairDeadline","setPairDeadline","inputPairId","setInputPairId","useEffect","init","fetchUsers","fetchDiffs","targetRecordRef","onSnapshot","currData","updateDoc","success","push","Modal","confirm","title","ExclamationCircleOutlined","content","onOk","deleteRecord","confirmUserAndDiff","createRecord","theDiff","d","targetHeartRate","upperLimitHeartRate","difficulty","createdTime","Timestamp","now","addDoc","beginWorkoutTime","deadline","Date","info","leave","deleteDoc","pairWithApp","theRecordId","alert","onDeadlineExpired","resetFields","getExactThresholdValue","calBase","overHigh","ceil","overMedium","simulateAppCotent","pairing","Search","allowClear","onChange","target","onSearch","disabled","PageHeader","subTitle","onBack","marginTop","gutter","u","diff","targetWorkoutTime","visible","onCancel","footer","bordered","descriptions","idNumber","height","weight","exerciseHeartRate","exerciseResist","exerciseSpeed","medicine","note","width","column","color","text","alignItems","dashed","minWidth","borderWidth","margin","marginRight","placement","trigger","SettingOutlined","pairIdWrapper","split","c","onFinish","indicator","LoadingOutlined","spin","ArrowRightOutlined","formatSeconds","input","sec_num","parseInt","hours","minutes","seconds","formatted","configLineChart","xField","yField","yAxis","legend","itemName","formatter","item","meta","alias","geometryOptions","geometry","lineStyle","lineWidth","lineDash","smooth","opacity","point","shape","stroke","fill","annotations","start","end","offsetY","position","textAlign","tooltip","showTitle","StopWatch","initialValue","setTime","miliDisplay","setMiliDisplay","interval","displayInterval","setInterval","clearInterval","slice","unsubscribeRecord","unsubscribePackets","other_notification_url","window","AudioContext","webkitAudioContext","createGain","gain","MonitoringWorkout","params","useParams","setRecord","setUser","setDifficulty","packets","setPackets","isInitRecordDone","setIsInitRecordDone","isInitPacketsDone","setIsInitPacketsDone","isBuffersDone","setIsBuffersDone","beginStopWatch","setBeginStopWatch","nextHeartRateVal","setNextHeartRateVal","fetchBuffers","grantAudioPerssion","begin","isNotEmpty","evaluateCurrPacket","checkIntegrity","listenRecordChange","listenPacketsChange","fetch","response","arrayBuffer","decodeAudioData","audioBuffer","playAudio","buffer","source","createBufferSource","connect","destination","maskClosable","recordRef","getDoc","recordSnapshot","recordData","userRef","userSnapshot","difficultyRef","diffSnapshot","toDate","packetsRef","newPackets","timeLabel","formatWithMoment","sort","splice","packet","overSlight","sendNotification","addRpmAndHeartRate","nextPacket","goFinishWorkout","notification","description","open","SmileOutlined","popoverContent","enterButton","src","muted","glass","col","col1","age","col2","stopWatchWrapper","moment","duration","asMilliseconds","getStopWatchInitialValue","format","col3","unit","mainCol","columns","openViewModal","openEditModal","onDeleteUser","goTrainingWeekRecord","dataIndex","render","isMedicine","align","direction","danger","MoreOutlined","rotate","modalFormLayout","UserList","filteredUser","setFilteredUser","searchBarRef","useRef","currUser","setCurrUser","searchForm","editForm","createForm","createModalVisible","setCreateModalVisible","viewModalVisible","setViewModalVisible","editModalVisible","setEditModalVisible","current","blur","onCreateUser","isDeleted","closeAllModals","onPatchUser","currUserRef","deleteUser","theUserRef","extra","PlusOutlined","clearIcon","CloseCircleFilled","ref","SearchOutlined","setFieldsValue","theUser","okText","okType","cancelText","targetUserId","dataSource","pagination","pageSize","marginLeft","confirmLoading","destroyOnClose","addonAfter","valuePropName","TextArea","showCount","maxLength","autoSize","minRows","maxRows","onDeleteDiff","sorter","compare","DifficulityList","filteredDiffs","setFilteredDiffs","currDiff","setCurrDiff","createFormChange","setCreateFormChange","editFormChange","setEditFormChange","onCreateDiff","onPatchDiff","deleteDiff","theDiffRef","onFormValueChange","changedVal","allVal","formKey","onValuesChange","StylesManager","applyTheme","sixSurveyJson","SixSurveyJson","copdSurveyJson","COPDSurveyJson","sgrSurveyJson","SGRSurveyJson","borgScaleSurveyJson","BorgScaleSurveyJson","mySurveyCss","controlDisabled","rating","selected","FinishedWorkout","therapist","setTherapist","comment","setComment","safeHRIndex","setSafeHRIndex","hrVariabilityIndex","setHRVariabilityIndex","spo2","setSpo2","surveyModalVisible","setSurveyModalVisible","curSurveyName","setCurSurveyName","Model","survey","setSurvey","sixSurveyData","setSixSurveyData","copdSurveyData","setCopdSurveyData","sgrSurveyData","setSGRSurveyData","borgScaleSurveyData","setBorgScaleSurveyData","focusFirstQuestionAutomatic","showNavigationButtons","showCompletedPage","onComplete","add","sender","results","surveyCompleted","openSurveyModal","surveyName","onOKSurvey","hasErrors","doComplete","question2","question3","question5","question9","question10","question1","text1","text2","onFormSubmit","preventDefault","updateTherapistInfo","sixSurvey","borgScaleSurvey","sgrSurvey","copdSurvey","h","m","s","returnStr","calWorkoutTime","toLocaleString","CheckOutlined","prefix","UserOutlined","EditOutlined","LineChartOutlined","model","css","currRecord","isWorkoutTimeGT30","CrownOutlined","userData","difficultyData","RecordList","records","setReocrds","filteredRecords","setFilteredReocrds","setCurrRecord","currReocrdPackets","setCurrRecordPackets","fetchRecords","patchRecordsWithUserAndDiff","getTime","patchedRecords","userId","r","mode","TrainingWeekRecord","setRecords","fetchUser","userPath","recordsPath","weekNumber","onPatchRecord","currRecordPath","theRecord","AppRoutes","path","element","AppProvider","initializedDone","setInitializedDone","attempLogin","locale","ReactDOM","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.6521aa31.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3NK8e\",\"pairIdWrapper\":\"styles_pairIdWrapper__RnU7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__msRCF\",\"pageHeader\":\"styles_pageHeader__242Ry\",\"descriptions\":\"styles_descriptions__aLChC\",\"form\":\"styles_form__3ok_y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3-pv1\",\"tile\":\"styles_tile__ld1d9\",\"addOn\":\"styles_addOn__lAcI5\",\"tileIcon\":\"styles_tileIcon__3Rzsu\",\"tileLabel\":\"styles_tileLabel__21knx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3BM2M\",\"descriptions\":\"styles_descriptions__2Jtwo\",\"form\":\"styles_form__a3cRe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2hB-r\",\"descriptions\":\"styles_descriptions__1kY2t\",\"form\":\"styles_form__1Qnic\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3HuKR\",\"descriptions\":\"styles_descriptions__3UP8P\",\"form\":\"styles_form__1qrcZ\",\"pageHeader\":\"styles_pageHeader__3-ZV-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2Tnc6\",\"descriptions\":\"styles_descriptions__2F6gm\",\"form\":\"styles_form__Z2w7o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2s08f\",\"scroll\":\"styles_scroll__2lbTr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__103ut\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__Hfgws\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__333xu\"};","export const SET_AUTH = 'SET_AUTH';\n","const ROUTE_PATH = {\n    home: '/',\n    sign_in: '/sign-in',\n    unauthorized: '/unauthorized',\n    admin_dashbaord: '/dashboard',\n    prepare_workout: '/prepare-workout',\n    monitoring_workout: '/monitoring-workout',\n    user_list: '/user-list',\n    difficulty_list: '/difficulty-list',\n    record_list: '/record-list',\n    finsished_workout: '/finished-workout',\n    training_week_record: '/training-week-record',\n};\n\nexport default ROUTE_PATH;\n","const ROLES = {\n    'User': 2001,\n    'Editor': 1984,\n    'Admin': 5150,\n};\n\nexport default ROLES;\n","const WARN = {\n    Slight: 'slight',\n    Medium: 'medium',\n    High: 'high',\n};\n\nconst WARN_THRESHOLD = {\n    Slight: 105,\n    Medium: 115,\n    High: 120,\n};\n\nexport { WARN, WARN_THRESHOLD };\n","import { createContext, useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { SET_AUTH } from './actions';\n\nimport { ROLES } from '../constants';\n\nconst StoreContext = createContext();\n\nconst initialState = {\n    auth: {\n        isValid: true,\n        roles: [ROLES.Admin], // 1984: Editor ; 5150: Admin\n    },\n};\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case SET_AUTH:\n            return {\n                ...state,\n                auth: {\n                    ...action.payload,\n                },\n            };\n        default:\n            return state;\n    }\n};\n\nconst StoreProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const value = { state, dispatch };\n\n    return (\n        <StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n    );\n};\n\nconst useStore = () => {\n    return useContext(StoreContext);\n\n    // Used as custom-hook;\n    // const store = useStore();\n    //\n    // console.log(store)\n    // OUTPUT:\n    // {state: {…}, dispatch: ƒ}\n};\n\nStoreProvider.propTypes = {\n    children: PropTypes.object,\n};\n\nexport { StoreProvider, StoreContext, useStore };\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { Outlet, Navigate } from 'react-router-dom';\nimport { useStore } from '../store';\nimport { ROUTE_PATH } from '../constants';\n\nconst ProtectedRoutes = ({ allowedRoles }) => {\n    const {\n        state: { auth },\n    } = useStore();\n\n    if (!auth.isValid) {\n        return <Navigate replace to={ROUTE_PATH.sign_in} />;\n    }\n\n    return auth.roles.find((role) => allowedRoles?.includes(role)) ? (\n        <Outlet />\n    ) : (\n        <Navigate replace to={ROUTE_PATH.unauthorized} />\n    );\n};\n\nexport default ProtectedRoutes;\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from 'firebase/app';\n// import { getAnalytics } from 'firebase/analytics';\nimport {\n    getFirestore,\n    collection,\n    query,\n    where,\n    getDocs,\n} from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_API_KEY,\n    authDomain: 'physical-therapy-system.firebaseapp.com',\n    projectId: 'physical-therapy-system',\n    storageBucket: 'physical-therapy-system.appspot.com',\n    messagingSenderId: '411714019674',\n    appId: process.env.REACT_APP_APP_ID,\n    measurementId: 'G-93J05VGEJN',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n// const analytics = getAnalytics(app);\nconst db = getFirestore(app);\nexport const auth = getAuth(app);\n\nexport const usersRef = collection(db, 'users');\nexport const recordsRef = collection(db, 'records');\nexport const difficultiesRef = collection(db, 'difficulties');\n\nexport const validateInputPairId = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty || querySnapshot.size != 1) {\n        return false;\n    }\n\n    let record;\n    let recordId;\n    querySnapshot.forEach((doc) => {\n        record = doc.data();\n        recordId = doc.id;\n    });\n\n    if (record?.finishedWorkoutTime != null) {\n        return false;\n    }\n\n    return recordId;\n};\n\nexport const getRpmsWithPairdId = async (pairId) => {\n    let targetRecordId = null;\n\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return null;\n    }\n    if (querySnapshot.size == 1) {\n        querySnapshot.forEach((doc) => {\n            targetRecordId = doc.id;\n        });\n    }\n    console.log(targetRecordId);\n    return collection(recordsRef, targetRecordId, 'rpms');\n};\n\nexport const generateValidPairId = async () => {\n    let pass = false;\n    let pairId = null;\n\n    while (!pass) {\n        const test = getRandomPairId();\n        const validated = await isPairIdValid(test);\n\n        if (validated) {\n            pass = true;\n            pairId = test;\n        }\n    }\n\n    return pairId;\n};\n\nconst isPairIdValid = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return true;\n    } else return false;\n};\n\nconst getRandomPairId = () => {\n    return Math.floor(Math.random() * (9999 - 1000) + 1000).toString();\n};\n","/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Layout, Input, Button, message, Form, Typography } from 'antd';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\n\n// import Header from '../../components/Header';\nimport styles from './styles.module.scss';\nimport { ROUTE_PATH, ROLES } from '../../constants';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport { auth } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Title } = Typography;\n\nconst SignIn = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n    const { dispatch } = useStore();\n    const [loading, setLoading] = useState(false);\n\n    const login = async () => {\n        try {\n            setLoading(true);\n\n            const values = await form.validateFields();\n            console.log(values);\n\n            const userCredential = await signInWithEmailAndPassword(\n                auth,\n                values.email,\n                values.password,\n            );\n\n            const user = userCredential.user;\n            setLoading(false);\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: true,\n                    roles: [ROLES.Admin],\n                },\n            });\n\n            goDashboard();\n        } catch (e) {\n            console.log(e);\n            console.log(e?.message);\n            setLoading(false);\n            message.error('帳號或密碼有誤。');\n        }\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <Form\n                        {...formLayout}\n                        form={form}\n                        layout=\"horizontal\"\n                        autoComplete=\"off\"\n                    >\n                        <Form.Item\n                            label=\" \"\n                            colon={false}\n                            style={{ marginBottom: 12 }}\n                        >\n                            <Title level={2}>長庚大學-物理治療系統登入2</Title>\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Email\"\n                            name=\"email\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '請填入 Email',\n                                },\n                            ]}\n                        >\n                            <Input placeholder=\"\" type=\"email\" />\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Password\"\n                            name=\"password\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '請填入 Password',\n                                },\n                            ]}\n                        >\n                            <Input.Password placeholder=\"\" />\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={login}\n                                loading={loading}\n                            >\n                                登入\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 7,\n    },\n    wrapperCol: {\n        span: 12,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 7,\n        span: 16,\n    },\n};\n\nexport default SignIn;\n","/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    TeamOutlined,\n    SlidersOutlined,\n    ProfileOutlined,\n    RocketOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport addOnImg from '../../assets/images/right-arrow.png';\n\nconst AdminDashboard = () => {\n    const navigate = useNavigate();\n\n    const goUserList = () => {\n        navigate(ROUTE_PATH.user_list);\n    };\n\n    const goDifficulityList = () => {\n        navigate(ROUTE_PATH.difficulty_list);\n    };\n\n    const goRecordList = () => {\n        navigate(`${ROUTE_PATH.record_list}/123`);\n    };\n\n    const goPrepareWorkout = () => {\n        navigate(ROUTE_PATH.prepare_workout);\n    }\n\n    return (\n        <div className={styles.container}>\n            <legend>～選擇您的操作～</legend>\n            <fieldset>\n                <TileWithIconAndAction\n                    icon={<TeamOutlined />}\n                    label=\"管理會員資訊\"\n                    action={goUserList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<SlidersOutlined />}\n                    label=\"騎乘關卡設定\"\n                    action={goDifficulityList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<ProfileOutlined />}\n                    label=\"騎乘紀錄查詢\"\n                    action={goRecordList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<RocketOutlined />}\n                    label=\"開始騎乘作業\"\n                    action={goPrepareWorkout}\n                />\n            </fieldset>\n        </div>\n    );\n};\n\nconst TileWithIconAndAction = ({ icon, label, action }) => (\n    <span className={styles.tile} onClick={action}>\n        <span\n            className={styles.addOn}\n            style={{ backgroundImage: `url(${addOnImg})` }}\n        ></span>\n        <span className={styles.tileIcon}>{icon}</span>\n        <span className={styles.tileLabel}>{label}</span>\n    </span>\n);\n\nexport default AdminDashboard;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5gUPACMKwjZTZgAAAfBJREFUaN7tmDFLHEEYht9vPRRJc+lCtHDXI4V/ICmEQIo0IhbeIqIwe4USPLwmXQIGhAuBYHPdieEInN6pVRCSIm0qC0VCmsREUBELYykSb/dNEfYKg8jhruvgPM0UMwzf+8B8wwxgMBgMBoM29K24WQbt7YDrkm1tSddzbdgzao3M5520Inl66uS9DfL42P6tFsjh4aTri41Mafojg46OZnDH80gyHO26+kWenfUO5e6TIyOt7m8lHfAytguHFUijgTHZBE5Ozs/LC5kFUqlgNPgCVKutirjxAoDVVRHf5yw3gIkJvuYM0GhEJUKSjtcqdjFXZJDNojcYhdRqYfD/Fj6DDfg+v8su6Hk7C5V3YlWr2guIWoS2AqISIY6jSuTAAOfEB8pleY4toKsr6WBxEfYQ6y1swHXF/qZ+kHt7MihFoLs76QKvTcQaXwL7+xrcAjHxQKYB0rL6+RWYnAyNJF1X3DSPwCN+AgoF/Ztgj6cYuC7e8BVkaenSJviQGUCpncfvx0QWF7UVcNXg4bR2AqIKrp2A5qvvM54A9fpFwZtnvGb1A+PjPz9UDkSWly/aVwMB/979ztM7d4GjI2zjD5BOXzV4yI2/BjOlezkwlcI6y0BnZ1TBtcPe9ObJqalb9yFynlv7JWYwGAyGGPgL5etGn1vyhAgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDUtMTVUMDA6MzU6MTArMDA6MDBS2JlGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTA1LTE1VDAwOjM1OjEwKzAwOjAwI4Uh+gAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ROUTE_PATH } from '../../constants/';\n\nimport styles from './styles.module.scss';\n\nconst Header = () => {\n    return (\n        <div className={styles.container}>\n            <Link to={ROUTE_PATH.admin_dashbaord}>Dashboard</Link>\n        </div>\n    );\n};\n\nexport default Header;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Missing = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <h1>!NOT FOUND!</h1>\n            <p>Sorry, the page you visited is not exist</p>\n        </div>\n    );\n};\n\nexport default Missing;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Unauthorized = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <p>Sorry, you are not authorized to view this page</p>\n        </div>\n    );\n};\n\nexport default Unauthorized;\n","import _ from 'underscore';\nimport React from 'react';\n\nclass Helper {\n    defaults(object, defaults) {\n        return _.defaults({ ...object }, defaults);\n    }\n    each(list, iteratee, context) {\n        if (list instanceof Set) {\n            let array = Array.from(list);\n            array.forEach((value, index, array) =>\n                iteratee.call(context, value, index, array),\n            );\n        } else {\n            _.each(list, iteratee, context);\n        }\n    }\n\n    map(list, iteratee, context) {\n        return _.map(list, iteratee, context);\n    }\n\n    mapObject(obj, iteratee, context) {\n        return _.mapObject(obj, iteratee, context);\n    }\n\n    reduce(list, iteratee, memo, context) {\n        return _.reduce(list, iteratee, memo, context);\n    }\n\n    every(list, iteratee, context) {\n        return _.every(list, iteratee, context);\n    }\n\n    some(list, iteratee, context) {\n        return _.some(list, iteratee, context);\n    }\n\n    find(list, predicate, context) {\n        let result = null;\n        if (list instanceof Map) {\n            for (const entry of list.entries()) {\n                let value = entry[1];\n                let key = entry[0];\n                let test = predicate.call(context, value, key, list);\n                if (test) {\n                    result = value;\n                    break;\n                }\n            }\n        } else {\n            result = _.find(list, predicate, context);\n        }\n        return result;\n    }\n\n    findIndex(list, predicate, context) {\n        return _.findIndex(list, predicate, context);\n    }\n\n    filter(list, predicate, context) {\n        return _.filter(list, predicate, context);\n    }\n\n    count(list, predicate, context) {\n        return this.filter(list, predicate, context).length;\n    }\n\n    max(list, iteratee, context) {\n        return _.max(list, iteratee, context);\n    }\n\n    min(list, iteratee, context) {\n        return _.min(list, iteratee, context);\n    }\n\n    toArray(any) {\n        if (this.isValid(any)) {\n            return _.isArray(any) ? any : [any];\n        } else {\n            return any;\n        }\n    }\n    first(array, n) {\n        return _.isEmpty(array) ? null : _.first(array, n);\n    }\n\n    last(array, n) {\n        return _.isEmpty(array) ? null : _.last(array, n);\n    }\n\n    has(object, key) {\n        return _.has(object, key);\n    }\n\n    values(object) {\n        return _.values(object);\n    }\n\n    isEqual(a, b) {\n        let test = true;\n        if (a instanceof File && b instanceof File) {\n            test = a.size === b.size;\n        } else if (this.isArray(a) && this.isArray(b)) {\n            for (let i = 0; i < Math.max(a.length, b.length); i++) {\n                if (a[i] !== b[i]) {\n                    test = false;\n                    break;\n                }\n            }\n        } else {\n            test = JSON.stringify(a) === JSON.stringify(b);\n        }\n        return test;\n    }\n    isEmpty(value) {\n        let test = false;\n        if (this.isNullOrUndefined(value)) {\n            test = true;\n        } else if (_.isString(value) || _.isArray(value)) {\n            test = value.length === 0;\n        } else if (!this.isPrimitive(value)) {\n            test = Object.entries(value).length === 0;\n        }\n        return test;\n    }\n    isNotEmpty(object) {\n        return !this.isEmpty(object);\n    }\n    isBoolean(object) {\n        return _.isBoolean(object);\n    }\n    isFalse(value) {\n        return value === false;\n    }\n    isTrue(value) {\n        return value === true;\n    }\n    isString(object) {\n        return _.isString(object);\n    }\n    isNumber(object) {\n        return _.isNumber(object);\n    }\n    isFunction(object) {\n        return _.isFunction(object);\n    }\n    isDate(object) {\n        return _.isDate(object);\n    }\n    isNull(...values) {\n        return values.every((value) => _.isNull(value));\n    }\n    isNotNull(...values) {\n        return values.every((value) => !_.isNull(value));\n    }\n    isUndefined(...values) {\n        return values.every((value) => _.isUndefined(value));\n    }\n    isNotUndefined(...values) {\n        return values.every((value) => !_.isUndefined(value));\n    }\n    isNullOrUndefined(...values) {\n        return values.every(\n            (value) => this.isNull(value) || this.isUndefined(value),\n        );\n    }\n    isNotNullOrUndefined(...values) {\n        return values.every((value) => !this.isNullOrUndefined(value));\n    }\n    isExisted(object) {\n        return !(object === null || object === undefined);\n    }\n    isNotExisted(object) {\n        return object === null || object === undefined;\n    }\n    isValid(object) {\n        return this.isExisted(object);\n    }\n    isNotValid(object) {\n        return this.isNotExisted(object);\n    }\n    isArray(object) {\n        return Array.isArray(object);\n    }\n    isObject(object) {\n        return _.isObject(object);\n    }\n    isInteger(object) {\n        return Number.isInteger(object);\n    }\n    isFinite(value) {\n        return Number.isFinite(value);\n    }\n    isFile(object) {\n        return object instanceof File;\n    }\n    isNaN(object) {\n        return _.isNaN(object);\n    }\n    isPrimitive(value) {\n        return (\n            this.isNumber(value) ||\n            this.isString(value) ||\n            this.isDate(value) ||\n            this.isBoolean(value) ||\n            this.isFile(value)\n        );\n    }\n    isJson(json) {\n        if (!_.isString(json)) return false;\n\n        try {\n            JSON.parse(json);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n    isPojo(object) {\n        if (object == null || typeof object !== 'object') {\n            return false;\n        }\n        const proto = Object.getPrototypeOf(object);\n        if (proto == null) {\n            return true; // `Object.create(null)`\n        }\n        return proto === Object.prototype;\n    }\n    isElement(object) {\n        return React.isValidElement(object);\n    }\n}\n\nlet helper = new Helper();\n\nexport default helper;\n","export default function wait(ms, value) {\n    return new Promise((resolve) => setTimeout(resolve, ms, value));\n}\n","/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    onSnapshot,\n    collection,\n    addDoc,\n    doc,\n    updateDoc,\n    Timestamp,\n    getDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport { Modal, Popover, Button, Input, message, notification } from 'antd';\nimport {\n    SettingOutlined,\n    ExclamationCircleOutlined,\n    SmileOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN, WARN_THRESHOLD } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport wait from '../../util/wait';\n// import useAudio from '../../util/useAudio';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nimport StopWatch from '../../components/StopWatch';\n\nlet unsubscribeRecord = null;\nlet unsubscribePackets = null;\n\nconst warn_slight_url = '/assets/sounds/warn-slight.wav';\nconst warn_medium_url = '/assets/sounds/warn-medium.wav';\nconst warn_high_url = '/assets/sounds/warn-high.wav';\nconst other_notification_url = '/assets/sounds/notification.wav';\nconst other_archieved_url = '/assets/sounds/goal-archieved.wav';\n\nconst https_yodel =\n    'https://s3-us-west-2.amazonaws.com/s.cdpn.io/123941/Yodel_Sound_Effect.mp3';\n\n//:\n//:\n//:\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar context = new AudioContext(); // Make it crossbrowser\nvar gainNode = context.createGain();\ngainNode.gain.value = 1; // set volume to 100%\nvar yodelBuffer; // slight\nvar yodelBuffer2; // medium\nvar yodelBuffer3; // high\nvar yodelBuffer4; // archieved\nvar yodelBuffer5; // notfication\n//:\n//:\n//:\n\nconst MonitoringWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [record, setRecord] = useState();\n    const [user, setUser] = useState();\n    const [difficulty, setDifficulty] = useState();\n    const [packets, setPackets] = useState([]);\n\n    const [isInitRecordDone, setIsInitRecordDone] = useState(false);\n    const [isInitPacketsDone, setIsInitPacketsDone] = useState(false);\n\n    const [isBuffersDone, setIsBuffersDone] = useState(false);\n\n    // const {\n    //     playWarnSound,\n    //     playOtherSound,\n    //     OTHER_SOUND,\n    //     getAudioPermission,\n    // } = useAudio();\n\n    // 騎乘計時碼表\n    const [beginStopWatch, setBeginStopWatch] = useState(false);\n\n    // for prototype\n    const [nextHeartRateVal, setNextHeartRateVal] = useState('');\n\n    useEffect(() => {\n        init();\n        fetchBuffers();\n\n        return () => {\n            if (_.isFunction(unsubscribeRecord)) unsubscribeRecord();\n            if (_.isFunction(unsubscribePackets)) unsubscribePackets();\n        };\n    }, []);\n\n    useEffect(() => {\n        if (\n            isInitRecordDone &&\n            isInitPacketsDone &&\n            !_.isEmpty(difficulty) &&\n            isBuffersDone\n        ) {\n            grantAudioPerssion();\n        }\n    }, [isInitRecordDone, isInitPacketsDone, difficulty, isBuffersDone]);\n\n    useEffect(() => {\n        if (_.isEmpty(record?.beginWorkoutTime)) return;\n\n        const begin = record.beginWorkoutTime;\n        const end = record.finishedWorkoutTime;\n\n        if (_.isNotEmpty(begin)) setBeginStopWatch(true);\n        if (_.isNotEmpty(end)) setBeginStopWatch(false);\n    }, [record]);\n\n    useEffect(() => {\n        if (_.isEmpty(record)) return;\n        if (!isInitRecordDone || !isInitPacketsDone) return;\n\n        evaluateCurrPacket(packets[packets.length - 1]);\n    }, [packets]);\n\n    const init = async () => {\n        checkIntegrity();\n        listenRecordChange();\n        listenPacketsChange();\n    };\n\n    const fetchBuffers = async () => {\n        let response;\n        let arrayBuffer;\n\n        response = await fetch(warn_slight_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(warn_medium_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer2 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(warn_high_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer3 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(other_archieved_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer4 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(other_notification_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer5 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        setIsBuffersDone(true);\n    };\n\n    const playAudio = (buffer) => {\n        var source = context.createBufferSource();\n        source.buffer = buffer;\n        source.connect(context.destination);\n        source.start();\n    };\n\n    const grantAudioPerssion = () => {\n        Modal.info({\n            title: '提示：監控過程會產生提示聲響，請確保聲音打開！',\n            // content: <button onClick={getAudioPermission}>點我測試;</button>,\n            onOk() {\n                playAudio(yodelBuffer5);\n            },\n            maskClosable: false,\n        });\n    };\n\n    const formatBeginWorkoutTime = () => {\n        if (_.isEmpty(record.beginWorkoutTime)) {\n            return '';\n        }\n\n        return moment(record.beginWorkoutTime).format('YYYY/MM/DD HH:mm');\n    };\n\n    const checkIntegrity = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        // check if a valid record\n        if (recordData.finishedWorkoutTime != null) {\n            alert('此筆紀錄已完成，將自動導回首頁！');\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        setUser(user);\n        setDifficulty(difficulty);\n    };\n\n    const listenRecordChange = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        unsubscribeRecord = onSnapshot(recordRef, async (recordSnapshot) => {\n            const recordData = recordSnapshot.data();\n            const record = {\n                ...recordData,\n                beginWorkoutTime: recordData.beginWorkoutTime?.toDate(),\n            };\n\n            setRecord(record);\n            setIsInitRecordDone(true);\n        });\n    };\n\n    const listenPacketsChange = () => {\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        unsubscribePackets = onSnapshot(packetsRef, (querySnapshot) => {\n            if (querySnapshot.empty) {\n                alert('監測數據有誤，請重新配對，即將退回選擇畫面！');\n                navigate(ROUTE_PATH.prepare_workout, { replace: true });\n                return;\n            }\n            const newPackets = [];\n            querySnapshot.forEach((doc) => {\n                newPackets.push({\n                    ...doc.data(),\n                    timeLabel: formatWithMoment(doc.data().time),\n                });\n            });\n\n            newPackets.sort((a, b) => a.time - b.time);\n            newPackets.splice(0, 1);\n\n            setPackets(newPackets);\n            setIsInitPacketsDone(true);\n        });\n    };\n\n    const evaluateCurrPacket = (packet) => {\n        const targetHeartRate = record.targetHeartRate;\n        const [overSlight, overMedium, overHigh] = getExactThresholdValue();\n\n        console.log(packet);\n\n        if (packet.heartRate >= overHigh) {\n            console.log('playing: high warn');\n            playAudio(yodelBuffer3);\n            sendNotification(WARN.High, packet.heartRate);\n        } else if (\n            packet.heartRate < overHigh &&\n            packet.heartRate >= overMedium\n        ) {\n            console.log('playing: medium warn');\n            playAudio(yodelBuffer2);\n            sendNotification(WARN.Medium, packet.heartRate);\n        } else if (\n            packet.heartRate < overMedium &&\n            packet.heartRate >= overSlight\n        ) {\n            console.log('playing: slight warn');\n            playAudio(yodelBuffer);\n            sendNotification(WARN.Slight, packet.heartRate);\n        } else if (\n            packet.heartRate >= targetHeartRate &&\n            packet.heartRate < overSlight\n        ) {\n            console.log('playing: archieved');\n            playAudio(yodelBuffer4);\n            sendNotification('Archieved', packet.heartRate, targetHeartRate);\n        }\n    };\n\n    const getExactThresholdValue = () => {\n        const upperLimitHeartRate = record.upperLimitHeartRate;\n\n        const calBase = upperLimitHeartRate / 100;\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    // for prototype testing\n    const addRpmAndHeartRate = async () => {\n        // set the begin time\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const record = recordSnapshot.data();\n        if (record.beginWorkoutTime == null) {\n            await updateDoc(recordRef, {\n                beginWorkoutTime: Timestamp.now(),\n            });\n        }\n\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        const time = (packets.length + 1) * 5;\n        const heartRate = _.isNotEmpty(nextHeartRateVal)\n            ? parseInt(nextHeartRateVal)\n            : 95 + packets.length;\n\n        // simulate incoming rpm & heart rate\n        const rpm = 30;\n        const nextPacket = {\n            time,\n            rpm: rpm + packets.length,\n            heartRate: heartRate,\n        };\n\n        await addDoc(packetsRef, nextPacket);\n    };\n\n    const confirmFinish = () => {\n        Modal.confirm({\n            title: '即將結束！',\n            icon: <ExclamationCircleOutlined />,\n            content: '確定結束本次騎乘？',\n            onOk: () => goFinishWorkout(),\n        });\n    };\n\n    const goFinishWorkout = async () => {\n        setBeginStopWatch(false);\n\n        await wait(2000);\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            finishedWorkoutTime: Timestamp.now(),\n            pairId: null,\n        });\n\n        message.success({ content: '已結束！自動跳轉至統計畫面' });\n\n        await wait(1000);\n        navigate(`${ROUTE_PATH.finsished_workout}/${params.recordId}`, {\n            replace: true,\n        });\n    };\n\n    const getStopWatchInitialValue = () => {\n        if (_.isEmpty(record?.beginWorkoutTime)) {\n            return 0;\n        }\n\n        const begin = moment(record.beginWorkoutTime);\n        const now = moment();\n        const accumlated = moment.duration(now.diff(begin)).asMilliseconds();\n\n        return accumlated;\n    };\n\n    // 右上角通知顯示\n    const sendNotification = (warn, heartRate, targetHeartRate) => {\n        if (warn === WARN.High) {\n            // high warn\n            notification.warn({\n                message: '第三階段警示，請檢查騎乘者身體狀況',\n                description: `達到第三階段警示心率。最新心率：${heartRate} BPM。`,\n            });\n        } else if (warn === WARN.Medium) {\n            // medium warn\n            notification.info({\n                message: '第二階段警示，請留意騎乘者身體狀況',\n                description: `達到第一階段警示心率。最新心率：${heartRate} BPM。`,\n            });\n        } else if (warn === WARN.Slight) {\n            // slight warn\n            notification.open({\n                message: '第一階段警示',\n                description: `達到第一階段警示心率。最新心率：${heartRate} BPM。`,\n                icon: <SmileOutlined style={{ color: '#108ee9' }} />,\n            });\n        } else {\n            // archived\n            notification.success({\n                message: '恭喜達到目標訓練心率！',\n                description: `達到目標訓練心率（${targetHeartRate} BPM）。最新心率：${heartRate} BPM。`,\n            });\n        }\n    };\n\n    if (\n        !isInitRecordDone ||\n        !isInitPacketsDone ||\n        _.isEmpty(difficulty) ||\n        !isBuffersDone\n    ) {\n        return <div className={styles.container}>監控畫面初始化中...</div>;\n    }\n\n    const popoverContent = (\n        <>\n            <Input.Search\n                placeholder=\"下個心率是？\"\n                allowClear\n                enterButton=\"新增\"\n                size=\"Large\"\n                onChange={(e) => setNextHeartRateVal(e.target.value)}\n                onSearch={addRpmAndHeartRate}\n            />\n            <Button onClick={confirmFinish}>結束騎乘</Button>\n        </>\n    );\n\n    console.log(record.targetHeartRate);\n\n    // TODO:\n    // refactoring <table> to component\n    return (\n        <div className={styles.container}>\n            <audio id=\"audio\" src={other_notification_url} muted></audio>\n            <div className={styles.glass}>\n                {/* <h1>騎乘監控畫面</h1> */}\n                <div className={`${styles.col} ${styles.col1}`}>\n                    <span>騎乘者：{user?.name}</span>\n                    <span>騎乘者身體年齡：{user?.age}</span>\n                </div>\n                <div className={`${styles.col} ${styles.col2}`}>\n                    <div className={styles.stopWatchWrapper}>\n                        <span>騎乘進行了：</span>\n                        <StopWatch\n                            start={beginStopWatch}\n                            initialValue={getStopWatchInitialValue()}\n                        />\n                    </div>\n                    <caption>(開始於 {formatBeginWorkoutTime()})</caption>\n                </div>\n                <div className={`${styles.col} ${styles.col3}`}>\n                    <span>平均速率：20 <span className={styles.unit}>RPM</span></span>\n                    <span>平均心率：30 <span className={styles.unit}>BPM</span></span>\n                    <span>運動強度：23 <span className={styles.unit}>WATTS</span></span>\n                    <span>累積熱量消耗：12 <span className={styles.unit}>CAL</span></span>\n                </div>\n                <div className={`${styles.col} ${styles.difficulty}`}>\n                    <Popover\n                        content={popoverContent}\n                        placement=\"bottomRight\"\n                        title=\"更多操作\"\n                        trigger=\"click\"\n                    >\n                        <SettingOutlined width={'1em'} />\n                    </Popover>\n                    <span>騎乘關卡：{difficulty.name}</span>\n                    <span>目標心率：{difficulty.targetHeartRate}</span>\n                    <span>上限心率：{difficulty.upperLimitHeartRate}</span>\n                    <caption>\n                        分階警示心率：{getExactThresholdValue()[0]}/\n                        {getExactThresholdValue()[1]}/\n                        {getExactThresholdValue()[2]}\n                    </caption>\n                </div>\n                <div className={styles.mainCol}>\n                    <LineChart\n                        {...configLineChart(packets, record.targetHeartRate)}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default MonitoringWorkout;\n","/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst PrepareWorkout = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"準備騎乘！進行騎乘設定\"\n                        subTitle=\"選擇騎乘者及關卡資訊\"\n                        onBack={goDashboard}\n                    />\n\n                    <Form {...formLayout} form={form} style={{ marginTop: 36 }}>\n                        <Form.Item\n                            name=\"user\"\n                            label=\"騎乘者\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇騎乘者',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇騎乘者\"\n                                        onChange={onUserChange}\n                                        disabled={pairId}\n                                    >\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedUser}\n                                        onClick={openUserModal}\n                                    >\n                                        查看騎乘者資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"difficulty\"\n                            label=\"關卡資訊\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇關卡資訊',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇關卡資訊\"\n                                        onChange={onDiffChange}\n                                        disabled={pairId}\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}・\n                                                {diff.targetWorkoutTime}{' '}\n                                                分鐘・目標{' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedDiff}\n                                        onClick={openDiffModal}\n                                    >\n                                        查看關卡資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={confirmUserAndDiff}\n                                disabled={pairId}\n                            >\n                                下一步，生成配對碼\n                            </Button>\n                        </Form.Item>\n                    </Form>\n\n                    <Modal\n                        title=\"檢視騎乘者\"\n                        visible={userModalVis}\n                        onCancel={closeUserModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"會員編號\" span={3}>\n                                {selectedUserData?.idNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"姓名\" span={3}>\n                                {selectedUserData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"身高\" span={3}>\n                                {selectedUserData?.height} 公分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"體重\" span={3}>\n                                {selectedUserData?.weight} 公斤\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動心率\" span={3}>\n                                {selectedUserData?.exerciseHeartRate} BPM\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動阻力\" span={3}>\n                                {selectedUserData?.exerciseResist}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動速度\" span={3}>\n                                {selectedUserData?.exerciseSpeed}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"是否服用藥物\" span={3}>\n                                {selectedUserData?.medicine ? '是' : '否'}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={3}>\n                                {selectedUserData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    <Modal\n                        title=\"檢視難度\"\n                        visible={diffModalVis}\n                        onCancel={closeDiffModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"難度名稱\" span={1}>\n                                {selectedDiffData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標騎乘時間\" span={1}>\n                                {selectedDiffData?.targetWorkoutTime} 分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標心率數值\" span={2}>\n                                {selectedDiffData?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"上限心率數值\" span={2}>\n                                {selectedDiffData?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        警示心率門檻\n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{\n                                                fontSize: '0.8em',\n                                            }}\n                                        >\n                                            依據上限心率數值計算\n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={2}>\n                                {selectedDiffData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n\n                    {pairId && (\n                        <>\n                            <Divider\n                                dashed={true}\n                                style={{\n                                    minWidth: '90%',\n                                    width: '90%',\n                                    borderWidth: '2px',\n                                    margin: 'auto',\n                                    marginRight: 'auto',\n                                    marginTop: '4em',\n                                    marginBottom: '4em',\n                                }}\n                            />\n                            <Form {...formLayout}>\n                                <Form.Item\n                                    label={\n                                        <>\n                                            配對碼\n                                            <Popover\n                                                content={simulateAppCotent}\n                                                placement=\"bottomRight\"\n                                                title=\"更多操作\"\n                                                trigger=\"click\"\n                                            >\n                                                <SettingOutlined\n                                                    width={'1em'}\n                                                />\n                                            </Popover>\n                                        </>\n                                    }\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                >\n                                    <div className={styles.pairIdWrapper}>\n                                        {pairId.split('').map((c, i) => (\n                                            <pre key={c + i}>{c}</pre>\n                                        ))}\n\n                                        {/* <Countdown\n                                            title=\"有效時間\"\n                                            value={Date.now() + 1000 * 60 * 10}\n                                            onFinish={onDeadlineExpired}\n                                        /> */}\n                                        {pairDeadline && (\n                                            <Countdown\n                                                title=\"有效時間\"\n                                                value={pairDeadline}\n                                                onFinish={onDeadlineExpired}\n                                            />\n                                        )}\n                                    </div>\n                                </Form.Item>\n                                {!isAppConnected && (\n                                    <Form.Item\n                                        label=\" \"\n                                        colon={false}\n                                        style={{ marginTop: '3em' }}\n                                    >\n                                        <Spin\n                                            indicator={\n                                                <LoadingOutlined\n                                                    style={{\n                                                        fontSize: 24,\n                                                        marginRight: '1em',\n                                                    }}\n                                                    spin\n                                                />\n                                            }\n                                        />\n                                        等待配對中...\n                                    </Form.Item>\n                                )}\n\n                                <Form.Item\n                                    label=\" \"\n                                    colon={false}\n                                    style={{ marginTop: '5em' }}\n                                >\n                                    <Button\n                                        onClick={goMonitoring}\n                                        type={\n                                            isAppConnected\n                                                ? 'primary'\n                                                : 'dashed'\n                                        }\n                                        disabled={!isAppConnected}\n                                        icon={\n                                            isAppConnected && (\n                                                <ArrowRightOutlined />\n                                            )\n                                        }\n                                        size=\"large\"\n                                    >\n                                        前往監視畫面\n                                    </Button>\n                                </Form.Item>\n                            </Form>\n                        </>\n                    )}\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default PrepareWorkout;\n","const formatSeconds = (input) => {\n    const sec_num = parseInt(input, 10);\n    const hours = Math.floor(sec_num / 3600);\n    const minutes = Math.floor((sec_num - hours * 3600) / 60);\n    const seconds = sec_num - hours * 3600 - minutes * 60;\n\n    let formatted = '';\n    if (hours != 0) formatted += `${hours}時 `;\n    if (minutes != 0) formatted += `${minutes}分 `;\n    if (seconds != 0) formatted += `${seconds}秒`;\n\n    return formatted;\n};\n\nexport default formatSeconds;\n","const configLineChart = (data, targetHeartRate) => ({\n    data: [data, data],\n    xField: 'timeLabel',\n    yField: ['rpm', 'heartRate'],\n    yAxis: {\n        rpm: {\n            title: {\n                text: 'RPM',\n            },\n        },\n        heartRate: {\n            title: {\n                text: '心率',\n            },\n        },\n    },\n    // xAxis: {\n    //     title: {\n    //         text: '時間',\n    //     },\n    // },\n    legend: {\n        itemName: {\n            formatter: (text, item) => {\n                return item.value === 'rpm' ? 'RPM' : '心率';\n            },\n        },\n    },\n    meta: {\n        rpm: {\n            alias: 'RPM值 ',\n            formatter: (value) => {\n                return `${value} RPM`;\n            },\n        },\n        heartRate: {\n            alias: '心率',\n            formatter: (value) => {\n                return `${value} BPM`;\n                // return Number((v / 100).toFixed(1));\n            },\n        },\n    },\n    geometryOptions: [\n        {\n            geometry: 'line',\n            color: '#5B8FF9',\n            lineStyle: {\n                lineWidth: 2,\n                lineDash: [5, 5],\n            },\n        },\n        {\n            geometry: 'line',\n            color: '#5AD8A6',\n            smooth: true,\n            lineStyle: {\n                lineWidth: 4,\n                opacity: 0.5,\n            },\n            point: {\n                shape: 'circle',\n                size: 4,\n                style: {\n                    opacity: 0.5,\n                    stroke: '#5AD8A6',\n                    fill: '#fff',\n                },\n            },\n        },\n    ],\n    annotations: {\n        heartRate: [\n            {\n                type: 'line',\n                start: ['min', targetHeartRate], // TODO: change [138] to 目標心率\n                end: ['max', targetHeartRate], // TODO: change [138] to 目標心率\n                style: {\n                    lineWidth: 2,\n                    lineDash: [3, 3],\n                    stroke: '#F4664A',\n                },\n                text: {\n                    content: `目標心率(${targetHeartRate})`, // TODO: change [138] to 目標心率\n                    offsetY: -4,\n                    position: 'end',\n                    style: {\n                        textAlign: 'end',\n                    },\n                },\n            },\n        ],\n    },\n    tooltip: {\n        showTitle: true,\n    },\n});\n\nexport default configLineChart;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './styles.module.scss';\n\nconst StopWatch = ({ start, initialValue }) => {\n    const [time, setTime] = useState(initialValue);\n    const [miliDisplay, setMiliDisplay] = useState(0);\n\n    useEffect(() => {\n        let interval = null;\n        let displayInterval = null;\n\n        if (start) {\n            interval = setInterval(() => {\n                setTime((time) => time + 10);\n            }, 10);\n\n            displayInterval = setInterval(() => {\n                setMiliDisplay((miliDisplay) => {\n                    if (miliDisplay + 10 > 1000) return 0;\n                    else return miliDisplay + 10;\n                });\n            }, 10);\n        } else {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        }\n\n        return () => {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        };\n    }, [start]);\n\n    return (\n        <div className={styles.container}>\n            <span className=\"digits\">\n                {('0' + Math.floor(time / 3600000)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 60000) % 60)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 1000) % 60)).slice(-2)}.\n            </span>\n            <span className=\"digits mili-sec\">\n                {('0' + ((miliDisplay / 10) % 100)).slice(-2)}\n            </span>\n        </div>\n    );\n};\n\nStopWatch.propTypes = {\n    start: PropTypes.bool,\n    initialValue: PropTypes.number,\n};\n\nexport default StopWatch;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n    Checkbox,\n    Typography,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { usersRef } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst UserList = () => {\n    const navigate = useNavigate();\n    const [users, setUsers] = useState([]); // 全部使用者資料\n    const [filteredUser, setFilteredUser] = useState([]); // 過濾的使用者資料\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currUser, setCurrUser] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchUsers();\n        setIsDone(true);\n    };\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setUsers(users);\n        setFilteredUser(users);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredUser = users.filter((u) => u.name.includes(values.name));\n\n        searchBarRef.current.blur();\n\n        setFilteredUser(filteredUser);\n    };\n\n    const onCreateUser = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(usersRef, {\n                name: values.name,\n                idNumber: values.idNumber,\n                height: values.height,\n                weight: values.weight,\n                exerciseHeartRate: values.exerciseHeartRate,\n                exerciseResist: values.exerciseResist ?? null,\n                exerciseSpeed: values.exerciseSpeed ?? null,\n                medicine: values.medicine ?? false,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增會員！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            message.error(e?.message);\n        }\n    };\n\n    const onPatchUser = async () => {\n        try {\n            const values = await editForm.validateFields();\n\n            setLoading(true);\n            const currUserRef = doc(usersRef, currUser.id);\n            await updateDoc(currUserRef, {\n                height: values.height,\n                weight: values.weight,\n                exerciseHeartRate: values.exerciseHeartRate,\n                exerciseResist: values.exerciseResist ?? null,\n                exerciseSpeed: values.exerciseSpeed ?? null,\n                medicine: values.medicine ?? false,\n                note: values.note ?? null,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新騎乘者！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onDeleteUser = (id) => {\n        const theUser = users.find((u) => u.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除會員：${theUser.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，會員資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteUser(id),\n        });\n    };\n\n    const deleteUser = async (id) => {\n        const theUserRef = doc(usersRef, id);\n        await updateDoc(theUserRef, {\n            isDeleted: true,\n        });\n\n        await fetchUsers();\n\n        message.info('會員已刪除。');\n    };\n\n    const onViewCurrUserRecord = () => {\n        navigate(`${ROUTE_PATH.record_list}/${currUser.id}`);\n    };\n\n    const openViewModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n        setCurrUser(currUser);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n\n        editForm.setFieldsValue({\n            idNumber: currUser.idNumber,\n            name: currUser.name,\n            height: currUser.height,\n            weight: currUser.weight,\n            exerciseHeartRate: currUser.exerciseHeartRate,\n            exerciseResist: currUser.exerciseResist ?? null,\n            exerciseSpeed: currUser.exerciseSpeed ?? null,\n            medicine: currUser.medicine ?? false,\n            note: currUser.note ?? null,\n        });\n\n        setCurrUser(currUser);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const goTrainingWeekRecord = (targetUserId) => {\n        navigate(`${ROUTE_PATH.training_week_record}/${targetUserId}`);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"管理會員資訊\"\n                        subTitle=\"會員資訊更新、訓練週數紀錄\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增會員\n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"會員姓名\" name=\"name\">\n                                    <Input\n                                        placeholder=\"輸入會員姓名查詢\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteUser,\n                            goTrainingWeekRecord,\n                        )}\n                        dataSource={filteredUser}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視騎乘者\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"會員編號\" span={3}>\n                                {currUser?.idNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"姓名\" span={3}>\n                                {currUser?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"身高\" span={3}>\n                                {currUser?.height} 公分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"體重\" span={3}>\n                                {currUser?.weight} 公斤\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動心率\" span={3}>\n                                {currUser?.exerciseHeartRate} BPM\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動阻力\" span={3}>\n                                {currUser?.exerciseResist}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動速度\" span={3}>\n                                {currUser?.exerciseSpeed}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"是否服用藥物\" span={3}>\n                                {currUser?.medicine ? '是' : '否'}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={3}>\n                                {currUser?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                        <Button\n                            type=\"primary\"\n                            onClick={onViewCurrUserRecord}\n                            style={{ marginLeft: '24px' }}\n                        >\n                            查看 {currUser?.name} 騎乘紀錄\n                        </Button>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增會員\"\n                        visible={createModalVisible}\n                        onOk={onCreateUser}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item\n                                label=\"會員編號\"\n                                name=\"idNumber\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員編號',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"會員編號為身分證字號\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"姓名\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上姓名',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"身高\"\n                                name=\"height\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員身高',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"體重\"\n                                name=\"weight\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員體重',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公斤'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動心率\"\n                                name=\"exerciseHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員運動心率',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動阻力\"\n                                name=\"exerciseResist\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動速度\"\n                                name=\"exerciseSpeed\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"medicine\"\n                                label=\"是否服用治療藥物\"\n                                valuePropName=\"checked\"\n                            >\n                                <Checkbox>\n                                    <Text type=\"secondary\">\n                                        （有服用請打勾）\n                                    </Text>\n                                </Checkbox>\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"治療藥物註記、其他需留意之處．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯會員\"\n                        visible={editModalVisible}\n                        onOk={onPatchUser}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item label=\"會員編號\">\n                                {currUser?.idNumber}\n                            </Form.Item>\n                            <Form.Item label=\"姓名\">{currUser?.name}</Form.Item>\n                            <Form.Item\n                                label=\"身高\"\n                                name=\"height\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員身高',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"體重\"\n                                name=\"weight\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員體重',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公斤'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動心率\"\n                                name=\"exerciseHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員運動心率',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動阻力\"\n                                name=\"exerciseResist\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動速度\"\n                                name=\"exerciseSpeed\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"medicine\"\n                                label=\"是否服用治療藥物\"\n                                valuePropName=\"checked\"\n                            >\n                                <Checkbox>\n                                    <Text type=\"secondary\">\n                                        （有服用請打勾）\n                                    </Text>\n                                </Checkbox>\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"治療藥物註記、其他需留意之處．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (\n    openViewModal,\n    openEditModal,\n    onDeleteUser,\n    goTrainingWeekRecord,\n) => [\n    {\n        key: 'idNumber',\n        title: '會員編號',\n        dataIndex: 'idNumber',\n        // sorter: {\n        //     compare: (a, b) => a.age - b.age,\n        // },\n        width: 200,\n        render: (idNumber) => idNumber.slice(0, 4) + '...',\n    },\n    {\n        key: 'name',\n        title: '會員姓名',\n        dataIndex: 'name',\n        width: 200,\n    },\n    {\n        key: 'medicine',\n        title: '是否服用治療藥物',\n        dataIndex: 'medicine',\n        render: (isMedicine) => (isMedicine ? '是' : '否'),\n        width: 150,\n        align: 'center',\n    },\n    {\n        key: 'note',\n        title: '備註',\n        dataIndex: 'note',\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Button type=\"link\" onClick={() => goTrainingWeekRecord(id)}>\n                    前往訓練週數紀錄\n                </Button>\n            );\n        },\n        width: 150,\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看會員資訊\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯會員資訊\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteUser(id)}\n                            >\n                                刪除會員\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 8,\n        // offset:,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nexport default UserList;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n    Badge,\n    Typography,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { difficultiesRef } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst DifficulityList = () => {\n    const navigate = useNavigate();\n    const [difficulties, setDifficulties] = useState([]); // 全部難度\n    const [filteredDiffs, setFilteredDiffs] = useState([]); // 過濾難度\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currDiff, setCurrDiff] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // 顯示各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // forms changed\n    // 監聽上限數值變化，返回三階段警示心率\n    const [createFormChange, setCreateFormChange] = useState();\n    const [editFormChange, setEditFormChange] = useState();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchDiffs();\n        setIsDone(true);\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setDifficulties(difficulties);\n        setFilteredDiffs(difficulties);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredDiffs = difficulties.filter((d) =>\n            d.name.includes(values.name),\n        );\n\n        searchBarRef.current.blur();\n\n        setFilteredDiffs(filteredDiffs);\n    };\n\n    const onCreateDiff = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(difficultiesRef, {\n                name: values.name,\n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增難度！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onPatchDiff = async () => {\n        try {\n            const values = await editForm.validateFields();\n            // if pass\n            // [values] would be: {age: 12}\n\n            setLoading(true);\n            const currUserRef = doc(difficultiesRef, currDiff.id);\n            await updateDoc(currUserRef, {\n                // 名字不更新\n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新難度！`);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    const onDeleteDiff = (id) => {\n        const theDiff = difficulties.find((d) => d.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除難度：${theDiff.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，難度資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteDiff(id),\n        });\n    };\n\n    const deleteDiff = async (id) => {\n        const theDiffRef = doc(difficultiesRef, id);\n        await updateDoc(theDiffRef, {\n            isDeleted: true,\n        });\n\n        await fetchDiffs();\n\n        message.info('難度已刪除。');\n    };\n\n    const openViewModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n        const warnHRValues = getExactThresholdValue(\n            currDiff.upperLimitHeartRate,\n        );\n\n        setCurrDiff(currDiff);\n        setWarnHRValues(warnHRValues);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n\n        editForm.setFieldsValue({\n            targetHeartRate: currDiff.targetHeartRate,\n            targetWorkoutTime: currDiff.targetWorkoutTime,\n            upperLimitHeartRate: currDiff.upperLimitHeartRate,\n            note: currDiff.note,\n        });\n\n        setCurrDiff(currDiff);\n        setEditFormChange(currDiff);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrDiff();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        setCreateFormChange();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrDiff();\n        setEditFormChange();\n        closeAllModals();\n    };\n\n    const onFormValueChange = (changedVal, allVal, formKey) => {\n        if (formKey === 'create') setCreateFormChange(allVal);\n        if (formKey === 'edit') setEditFormChange(allVal);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"訓練難度資訊列表\"\n                        subTitle=\"管理難度資訊\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增難度\n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"難度名稱\" name=\"name\">\n                                    <Input\n                                        placeholder=\"輸入難度名稱查詢\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteDiff,\n                        )}\n                        dataSource={filteredDiffs}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視難度\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"難度名稱\" span={1}>\n                                {currDiff?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標騎乘時間\" span={1}>\n                                {currDiff?.targetWorkoutTime} 分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標心率數值\" span={2}>\n                                {currDiff?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"上限心率數值\" span={2}>\n                                {currDiff?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        警示心率門檻\n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{ fontSize: '0.8em' }}\n                                        >\n                                            依據上限心率數值計算\n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={2}>\n                                {currDiff?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增難度\"\n                        visible={createModalVisible}\n                        onOk={onCreateDiff}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'create')\n                            }\n                        >\n                            <Form.Item\n                                label=\"難度名稱\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填難度名稱',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標騎乘時間\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標騎乘時間',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標心率數值\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"上限心率數值\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上限心率數值',\n                                    },\n                                ]}\n                                tooltip=\"此數值用做計算分階警示心率\"\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"需調整阻力值至多少、騎乘時的其他建議．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯難度\"\n                        visible={editModalVisible}\n                        onOk={onPatchDiff}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'edit')\n                            }\n                        >\n                            <Form.Item label=\"難度名稱\">\n                                {currDiff?.name}\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標騎乘時間\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標騎乘時間',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標心率數值\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"上限心率數值\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上限心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"需調整阻力值至多少、騎乘時的其他建議．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteDiff) => [\n    {\n        key: 'name',\n        title: '難度名稱',\n        dataIndex: 'name',\n    },\n    {\n        key: 'targetWorkoutTime',\n        title: '目標騎乘時間',\n        dataIndex: 'targetWorkoutTime',\n        sorter: {\n            compare: (a, b) => a.targetWorkoutTime - b.targetWorkoutTime,\n        },\n        width: 200,\n    },\n    {\n        key: 'targetHeartRate',\n        title: '目標心率數值',\n        dataIndex: 'targetHeartRate',\n        sorter: {\n            compare: (a, b) => a.targetHeartRate - b.targetHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'upperLimitHeartRate',\n        title: '上限心率數值',\n        dataIndex: 'upperLimitHeartRate',\n        sorter: {\n            compare: (a, b) => a.upperLimitHeartRate - b.upperLimitHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteDiff(id)}\n                            >\n                                刪除\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 6,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default DifficulityList;\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    collection,\n    doc,\n    getDoc,\n    getDocs,\n    updateDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport {\n    Layout,\n    Descriptions,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Space,\n} from 'antd';\nimport {\n    UserOutlined,\n    ExclamationCircleOutlined,\n    LineChartOutlined,\n    EditOutlined,\n    CheckOutlined,\n} from '@ant-design/icons';\nimport { StylesManager, Model } from 'survey-core';\nimport { Survey } from 'survey-react-ui';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\nimport formatWithMoment from '../../util/formatSeconds';\nimport wait from '../../util/wait';\nimport configLineChart from '../../util/configLineChart';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\n\nimport SixSurveyJson from '../../assets/surveys/sixSurvey.json';\nimport COPDSurveyJson from '../../assets/surveys/copdSurvey.json';\nimport SGRSurveyJson from '../../assets/surveys/sgrSurvey.json';\nimport BorgScaleSurveyJson from '../../assets/surveys/borgScaleSurvey.json';\nimport 'survey-core/defaultV2.css';\nStylesManager.applyTheme('defaultV2');\nconst sixSurveyJson = SixSurveyJson;\nconst copdSurveyJson = COPDSurveyJson;\nconst sgrSurveyJson = SGRSurveyJson;\nconst borgScaleSurveyJson = BorgScaleSurveyJson;\n\nconst mySurveyCss = {\n    text: {\n        controlDisabled: 'survey-input-disabled',\n    },\n    rating: {\n        selected: 'survey-rating-selected',\n    },\n};\n\nconst { Content } = Layout;\n\nconst FinishedWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [user, setUser] = useState();\n    const [record, setRecord] = useState();\n    const [packets, setPackets] = useState([]);\n    const [difficulty, setDifficulty] = useState();\n\n    const [isDone, setIsDone] = useState(false);\n\n    // doctor says...\n    const [therapist, setTherapist] = useState();\n    const [comment, setComment] = useState();\n\n    // 安全心律上線指數、心律變異指數、SPO2\n    const [safeHRIndex, setSafeHRIndex] = useState();\n    const [hrVariabilityIndex, setHRVariabilityIndex] = useState();\n    const [spo2, setSpo2] = useState();\n\n    // survey control\n    const [surveyModalVisible, setSurveyModalVisible] = useState(false);\n    const [curSurveyName, setCurSurveyName] = useState();\n    const [survey, setSurvey] = useState(new Model(sixSurveyJson));\n\n    // survey data\n    const [sixSurveyData, setSixSurveyData] = useState();\n    const [copdSurveyData, setCopdSurveyData] = useState(false);\n    const [sgrSurveyData, setSGRSurveyData] = useState(false);\n    const [borgScaleSurveyData, setBorgScaleSurveyData] = useState();\n\n    // survey UI related!!\n    survey.focusFirstQuestionAutomatic = false;\n    survey.showNavigationButtons = false;\n    survey.showCompletedPage = false;\n\n    // survey METHODS\n    const saveResults = (sender) => {\n        const results = sender.data;\n\n        console.log(sender.data);\n\n        if (curSurveyName === '六分鐘呼吸測驗') {\n            setSixSurveyData({ ...results, surveyCompleted: true });\n        }\n        if (curSurveyName === 'copd') {\n            setCopdSurveyData({ ...results, surveyCompleted: true });\n        }\n        if (curSurveyName === 'sgr') {\n            setSGRSurveyData({ ...results, surveyCompleted: true });\n            console.log(sgrSurveyData);\n        }\n        if (curSurveyName === 'borgScale') {\n            setBorgScaleSurveyData({ ...results, surveyCompleted: true });\n        }\n    };\n    survey.onComplete.add(saveResults);\n\n    const openSurveyModal = (surveyName) => {\n        if (surveyName === '六分鐘呼吸測驗') {\n            let survey = new Model(sixSurveyJson);\n\n            // 1. 填入表單預設值\n            // 2. 檢視問卷模式\n            // *** TODO: // 之後改成:\n            // ***       // 最後成績送出前 都可以進行問卷的修改\n            // ***       // 並加上提示: 送出後，問卷答案便無法修改的字樣\n            if (sixSurveyData) {\n                survey.data = sixSurveyData;\n                // survey.mode = 'display'; // 這個打開後，僅供檢視\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'copd') {\n            let survey = new Model(copdSurveyJson);\n\n            if (copdSurveyData) {\n                survey.data = copdSurveyData;\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'sgr') {\n            let survey = new Model(sgrSurveyJson);\n\n            if (sgrSurveyData) {\n                survey.data = sgrSurveyData;\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'borgScale') {\n            let survey = new Model(borgScaleSurveyJson);\n\n            if (borgScaleSurveyData) {\n                survey.data = borgScaleSurveyData;\n            }\n            setSurvey(survey);\n        }\n\n        setCurSurveyName(surveyName);\n        setSurveyModalVisible(true);\n    };\n\n    const onOKSurvey = async () => {\n        let error = survey.hasErrors();\n        if (error) {\n            return;\n        }\n        survey.doComplete();\n        setSurveyModalVisible(false);\n    };\n\n    const onCancelSurvey = () => {\n        setSurveyModalVisible(false);\n    };\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        // record\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        if (\n            recordData.pairId != null ||\n            recordData.finishedWorkoutTime == null\n        ) {\n            alert('此筆紀錄尚未完成，將自動導回首頁！');\n            navigate(ROUTE_PATH.admin_dashbaord);\n            return;\n        }\n        const record = {\n            ...recordData,\n            beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n            finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n        };\n\n        // packets\n        const packets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            packets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        packets.sort((a, b) => a.time - b.time);\n        packets.splice(0, 1);\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        // therapist & comment\n        const therapist = record.therapist ?? '';\n        const comment = record.comment ?? '';\n\n        setUser(user);\n        setRecord(record);\n        setPackets(packets);\n        setDifficulty(difficulty);\n        setTherapist(therapist);\n        setComment(comment);\n        setIsDone(true);\n\n        console.log(user);\n        // 初始化 填入問卷基本資料\n        setSixSurveyData({\n            question2: user?.name,\n            question3: user?.idNumber,\n            question5: moment(record?.beginWorkoutTime).format('L'),\n            question9: user?.height + ' cm',\n            question10: user?.weight + ' kg',\n        });\n        setSGRSurveyData({\n            question1: {\n                text1: user?.idNumber,\n                text2: `${difficulty?.name} \\n (目標${difficulty?.targetHeartRate}BPM／${difficulty?.targetWorkoutTime}分)`,\n            },\n            question2: moment(record?.beginWorkoutTime).format('L'),\n        });\n        setBorgScaleSurveyData({\n            question2: `${difficulty?.name} \\n (目標${difficulty?.targetHeartRate}BPM／${difficulty?.targetWorkoutTime}分)`,\n        });\n    };\n\n    // 初始化 填入問卷基本資料\n    // const initSurveyData = () => {\n    //     console.log(record);\n    //     console.log(user);\n    //     console.log(difficulty);\n    //     setSixSurveyData({\n    //         question2: user?.name,\n    //         question3: user?.idNumber,\n    //         question5: moment(record?.beginWorkoutTime).format('L'),\n    //     });\n    //     setSGRSurveyData({\n    //         question1: {\n    //             text1: user?.idNumber,\n    //             text2: `${difficulty?.name}\\n(目標心率：${difficulty?.targetHeartRate}／目標騎乘時間：${difficulty?.targetWorkoutTime})`,\n    //         },\n    //         question2: moment(record?.beginWorkoutTime).format('L'),\n    //     });\n    // };\n\n    const onFormSubmit = async (e) => {\n        e.preventDefault();\n        if (_.isEmpty(therapist)) {\n            message.error('請填上治療師名稱');\n            return;\n        }\n\n        if (_.isEmpty(safeHRIndex)) {\n            message.error('請填上安全心律上線指數');\n            return;\n        }\n\n        if (_.isEmpty(hrVariabilityIndex)) {\n            message.error('請填上心律變異指數');\n            return;\n        }\n\n        if (_.isEmpty(spo2)) {\n            message.error('SPO2');\n            return;\n        }\n\n        if (\n            !(\n                sixSurveyData?.surveyCompleted &&\n                copdSurveyData?.surveyCompleted &&\n                sgrSurveyData?.surveyCompleted &&\n                borgScaleSurveyData?.surveyCompleted\n            )\n        ) {\n            message.error('尚有問卷未完成');\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將提交！',\n            icon: <ExclamationCircleOutlined />,\n            content: '確定資料填寫無誤？',\n            onOk: () => updateTherapistInfo(),\n        });\n    };\n\n    const updateTherapistInfo = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            therapist: therapist,\n            safeHRIndex: safeHRIndex,\n            hrVariabilityIndex: hrVariabilityIndex,\n            spo2: spo2,\n            comment: comment,\n            sixSurvey: sixSurveyData,\n            borgScaleSurvey: borgScaleSurveyData,\n            sgrSurvey: sgrSurveyData,\n            copdSurvey: copdSurveyData,\n        });\n\n        message.success({ content: '已提交！自動跳轉至選單畫面' });\n\n        await wait(1000);\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    const calWorkoutTime = () => {\n        const begin = moment(record.beginWorkoutTime);\n        const end = moment(record.finishedWorkoutTime);\n\n        const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n        console.log(diff);\n\n        const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n        const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n        const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n        let returnStr = '';\n\n        if (h != '00') returnStr += `${h} 小時 `;\n        returnStr += `${m} 分 ${s} 秒`;\n\n        return returnStr;\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"紀錄資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"已結束騎乘，本次騎乘數據統計\"\n                        subTitle=\"請至下方填寫資訊\"\n                    />\n\n                    <Descriptions bordered className={styles.descriptions}>\n                        <Descriptions.Item label=\"騎乘者姓名\" span={2}>\n                            {user?.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"騎乘者身體年齡\">\n                            {user?.age}\n                        </Descriptions.Item>\n\n                        <Descriptions.Item\n                            label={\n                                <div>\n                                    實際騎乘時間\n                                    <br />/ 目標騎乘時間\n                                </div>\n                            }\n                        >\n                            {calWorkoutTime()}／{difficulty.targetWorkoutTime}{' '}\n                            分\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"開始騎乘時間\">\n                            {record.beginWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"結束騎乘時間\">\n                            {record.finishedWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"平均速率／平均心率\">\n                            20 BPM／30 RPM\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"運動強度\">\n                            23 WATTS\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"累積入熱量消耗\">\n                            12 CAL\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"騎乘關卡\">\n                            {difficulty.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"目標心率\">\n                            {difficulty.targetHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"上限心率\">\n                            {difficulty.upperLimitHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"RPM＆心率統計圖\">\n                            <LineChart\n                                {...configLineChart(\n                                    packets,\n                                    record.targetHeartRate,\n                                )}\n                            />\n                        </Descriptions.Item>\n                    </Descriptions>\n\n                    <div className={styles.form}>\n                        <h3>請完成以下評估問卷</h3>\n                        <Space>\n                            <Button\n                                onClick={() =>\n                                    openSurveyModal('六分鐘呼吸測驗')\n                                }\n                                type=\"primary\"\n                                icon={\n                                    sixSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 六分鐘呼吸測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('copd')}\n                                type=\"primary\"\n                                icon={\n                                    copdSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 COPD 測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('sgr')}\n                                type=\"primary\"\n                                icon={\n                                    sgrSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 SGR 測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('borgScale')}\n                                type=\"primary\"\n                                icon={\n                                    borgScaleSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 Borg Scale 測驗\n                            </Button>\n                        </Space>\n                    </div>\n                    <div className={styles.form}>\n                        <h3>請填寫以下資料，方可返回主選單</h3>\n\n                        <Input\n                            size=\"large\"\n                            placeholder=\"物理治療師名稱\"\n                            prefix={<UserOutlined />}\n                            value={therapist}\n                            onChange={(e) => {\n                                setTherapist(e.target.value);\n                            }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"SPO2\"\n                            prefix={<EditOutlined />}\n                            value={spo2}\n                            onChange={(e) => {\n                                setSpo2(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"安全心律上線指數\"\n                            prefix={<LineChartOutlined />}\n                            value={safeHRIndex}\n                            onChange={(e) => {\n                                setSafeHRIndex(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"心律變異指數\"\n                            prefix={<LineChartOutlined />}\n                            value={hrVariabilityIndex}\n                            onChange={(e) => {\n                                setHRVariabilityIndex(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n\n                        <Input.TextArea\n                            showCount\n                            placeholder=\"治療結果評語\"\n                            maxLength={50}\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            style={{ marginTop: 16 }}\n                        />\n\n                        <Button\n                            onClick={onFormSubmit}\n                            type=\"primary\"\n                            style={{ marginTop: 16 }}\n                        >\n                            提交，返回主選單\n                        </Button>\n                    </div>\n                </div>\n                <Modal\n                    width={'70vw'}\n                    className=\"surveyModalStyle\" // 如果要覆寫 style 要這樣做\n                    visible={surveyModalVisible}\n                    onOk={onOKSurvey}\n                    onCancel={onCancelSurvey}\n                    destroyOnClose\n                    okText=\"送出儲存\"\n                >\n                    <Survey\n                        id=\"surveyContainer\"\n                        model={survey}\n                        css={mySurveyCss}\n                    />\n                </Modal>\n            </Content>\n        </Layout>\n    );\n};\n\nexport default FinishedWorkout;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { getDocs, collection, query, where } from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Button,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Descriptions,\n    Select,\n    Space,\n} from 'antd';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport {\n    SearchOutlined,\n    CrownOutlined,\n    CheckOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\nimport { StylesManager, Model } from 'survey-core';\nimport { Survey } from 'survey-react-ui';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nimport SixSurveyJson from '../../assets/surveys/sixSurvey.json';\nimport COPDSurveyJson from '../../assets/surveys/copdSurvey.json';\nimport SGRSurveyJson from '../../assets/surveys/sgrSurvey.json';\nimport BorgScaleSurveyJson from '../../assets/surveys/borgScaleSurvey.json';\nimport 'survey-core/defaultV2.css';\nStylesManager.applyTheme('defaultV2');\nconst sixSurveyJson = SixSurveyJson;\nconst copdSurveyJson = COPDSurveyJson;\nconst sgrSurveyJson = SGRSurveyJson;\nconst borgScaleSurveyJson = BorgScaleSurveyJson;\n\nconst mySurveyCss = {\n    text: {\n        controlDisabled: 'survey-input-disabled',\n    },\n    rating: {\n        selected: 'survey-rating-selected',\n    },\n};\n\nconst { Content } = Layout;\nconst { Option } = Select;\n\nconst RecordList = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n    const [loading, setLoading] = useState(false); // 等待抓取 packets 資料\n\n    const [records, setReocrds] = useState([]);\n    const [filteredRecords, setFilteredReocrds] = useState([]);\n    const [currRecord, setCurrRecord] = useState();\n    const [currReocrdPackets, setCurrRecordPackets] = useState();\n\n    // patched Data\n    const [users, setUsers] = useState(); // 把使用者資料灌回去 records 中\n    const [difficulties, setDifficulties] = useState([]); // 把難度資料灌回去 records 中\n\n    // forms\n    const [searchForm] = Form.useForm();\n\n    // modals\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n\n    // survey control\n    const [surveyModalVisible, setSurveyModalVisible] = useState(false);\n    const [curSurveyName, setCurSurveyName] = useState();\n    const [survey, setSurvey] = useState(new Model(sixSurveyJson));\n\n    // survey UI related!!\n    survey.focusFirstQuestionAutomatic = false;\n    survey.showNavigationButtons = false;\n    survey.showCompletedPage = false;\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const records = await fetchRecords();\n        const difficulties = await fetchDiffs();\n\n        patchRecordsWithUserAndDiff({ users, records, difficulties });\n    };\n\n    const fetchUsers = async () => {\n        const users = [];\n        const querySnapshot = await getDocs(usersRef);\n        querySnapshot.forEach((doc) => {\n            if (!doc.data()?.isDeleted) {\n                users.push({\n                    ...doc.data(),\n                    id: doc.id,\n                });\n            }\n        });\n\n        return users;\n    };\n\n    const fetchRecords = async () => {\n        const records = [];\n        const querySnapshot = await getDocs(recordsRef);\n        querySnapshot.forEach((doc) => {\n            const recordData = doc.data();\n            if (\n                recordData.beginWorkoutTime != null &&\n                recordData.finishedWorkoutTime != null\n            ) {\n                records.push({\n                    ...recordData,\n                    id: doc.id,\n                    beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n                    finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n                });\n            }\n        });\n\n        records.sort(\n            (a, b) =>\n                b.finishedWorkoutTime.getTime() -\n                a.finishedWorkoutTime.getTime(),\n        );\n\n        return records;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const patchRecordsWithUserAndDiff = ({ users, records, difficulties }) => {\n        // patch with key [userData]\n        // patch with key [difficultyData]\n\n        const patchedRecords = records.map((record) => {\n            const userData = users.find((u) => u.id === record.user);\n            const difficultyData = difficulties.find(\n                (d) => d.id === record.difficulty,\n            );\n\n            return {\n                ...record,\n                userData,\n                difficultyData,\n            };\n        });\n\n        setReocrds(patchedRecords);\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n\n        if (params.userId !== '123') {\n            const filteredRecords = patchedRecords.filter(\n                (r) => r.user === params.userId,\n            );\n            setFilteredReocrds(filteredRecords);\n            searchForm.setFieldsValue({ user: params.userId });\n        } else {\n            setFilteredReocrds(patchedRecords);\n        }\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n\n        let filteredRecords = records.filter((r) => {\n            if (_.isEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return true;\n            }\n            if (_.isNotEmpty(values.user) && _.isNotEmpty(values.difficulty)) {\n                return (\n                    r.user === values.user && r.difficulty === values.difficulty\n                );\n            }\n            if (_.isNotEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return r.user === values.user;\n            }\n            if (_.isNotEmpty(values.difficulty) && _.isEmpty(values.user)) {\n                console.log('here');\n                return r.difficulty === values.difficulty;\n            }\n        });\n\n        setFilteredReocrds(filteredRecords);\n    };\n\n    const openViewModal = async (id) => {\n        setViewModalVisible(true);\n        setLoading(true);\n\n        const currRecord = records.find((r) => r.id === id);\n        const packetsRef = collection(recordsRef, id, 'packets');\n\n        // packets\n        const currReocrdPackets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            currReocrdPackets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        currReocrdPackets.sort((a, b) => a.time - b.time);\n        currReocrdPackets.splice(0, 1);\n\n        setCurrRecord(currRecord);\n        setCurrRecordPackets(currReocrdPackets);\n\n        setLoading(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrRecord();\n        setCurrRecordPackets([]);\n        setViewModalVisible(false);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const openSurveyModal = (surveyName) => {\n        if (surveyName === '六分鐘呼吸測驗') {\n            let survey = new Model(sixSurveyJson);\n\n            survey.data = currRecord.sixSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'copd') {\n            let survey = new Model(copdSurveyJson);\n\n            survey.data = currRecord.copdSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'sgr') {\n            let survey = new Model(sgrSurveyJson);\n\n            survey.data = currRecord.sgrSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'borgScale') {\n            let survey = new Model(borgScaleSurveyJson);\n\n            survey.data = currRecord.borgScaleSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n\n        setCurSurveyName(surveyName);\n        setSurveyModalVisible(true);\n    };\n\n    const onCancelSurvey = () => {\n        setSurveyModalVisible(false);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"騎乘紀錄列表\"\n                        subTitle=\"查看騎乘紀錄資訊\"\n                        onBack={goDashboard}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={10}>\n                                <Form.Item label=\"騎乘者名稱\" name=\"user\">\n                                    <Select placeholder=\"選擇騎乘者\" allowClear>\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={10}>\n                                <Form.Item label=\"騎乘關卡\" name=\"difficulty\">\n                                    <Select\n                                        placeholder=\"選擇關卡資訊\"\n                                        allowClear\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}・\n                                                {diff.targetWorkoutTime}{' '}\n                                                分鐘・目標{' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(openViewModal)}\n                        dataSource={filteredRecords}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視紀錄\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={'90vw'}\n                    >\n                        {loading ? (\n                            '資料讀取中...'\n                        ) : (\n                            <>\n                                <Descriptions\n                                    bordered\n                                    className={styles.descriptions}\n                                >\n                                    <Descriptions.Item\n                                        label=\"騎乘者姓名\"\n                                        span={2}\n                                    >\n                                        {currRecord?.userData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"騎乘者會員編號\"\n                                        span={2}\n                                    >\n                                        {currRecord?.userData?.idNumber}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label={\n                                            <div>\n                                                實際騎乘時間\n                                                <br />/ 目標騎乘時間\n                                            </div>\n                                        }\n                                    >\n                                        {calWorkoutTime(currRecord)}／\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetWorkoutTime\n                                        }{' '}\n                                        分\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"開始騎乘時間\">\n                                        {currRecord?.beginWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"結束騎乘時間\">\n                                        {currRecord?.finishedWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"平均速率／平均心率\">\n                                        20 BPM／30 RPM\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"運動強度\">\n                                        23 WATTS\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"累積入熱量消耗\">\n                                        12 CAL\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"騎乘關卡\">\n                                        {currRecord?.difficultyData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"目標心率\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"上限心率\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.upperLimitHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"RPM＆心率統計圖\"\n                                        span={3}\n                                    >\n                                        <LineChart\n                                            {...configLineChart(\n                                                currReocrdPackets,\n                                                currRecord?.targetHeartRate,\n                                            )}\n                                        />\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"物理治療師名稱\"\n                                        span={3}\n                                    >\n                                        {currRecord?.therapist}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"安全心律上線指數\"\n                                        span={3}\n                                    >\n                                        {currRecord?.safeHRIndex}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"心律變異指數\"\n                                        span={3}\n                                    >\n                                        {currRecord?.hrVariabilityIndex}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"治療結果評語\"\n                                        span={3}\n                                    >\n                                        {currRecord?.comment}\n                                    </Descriptions.Item>\n                                </Descriptions>\n                                <Space style={{ marginLeft: '24px' }}>\n                                    <Button\n                                        onClick={() =>\n                                            openSurveyModal('六分鐘呼吸測驗')\n                                        }\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 六分鐘呼吸測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() => openSurveyModal('copd')}\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 COPD 測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() => openSurveyModal('sgr')}\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 SGR 測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() =>\n                                            openSurveyModal('borgScale')\n                                        }\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 Borg Scale 測驗結果\n                                    </Button>\n                                </Space>\n                            </>\n                        )}\n                    </Modal>\n                    <Modal\n                        width={'70vw'}\n                        className=\"surveyModalStyle\" // 如果要覆寫 style 要這樣做\n                        visible={surveyModalVisible}\n                        footer={null} // no [Ok], [Cancel] button\n                        destroyOnClose\n                        onCancel={onCancelSurvey}\n                    >\n                        <Survey\n                            id=\"surveyContainer\"\n                            model={survey}\n                            css={mySurveyCss}\n                        />\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal) => [\n    {\n        key: 'id',\n        title: '紀錄ID',\n        dataIndex: 'id',\n        width: 100,\n        render: (id) => `${id.slice(0, 5)}....`,\n    },\n    {\n        key: 'isGT30',\n        title: '長途騎乘',\n        width: 100,\n        render: (currRecord) => {\n            if (isWorkoutTimeGT30(currRecord)) {\n                return (\n                    <CrownOutlined\n                        style={{\n                            fontSize: '1.5em',\n                            color: '#fb8b24',\n                        }}\n                    />\n                );\n            } else {\n                return ' ';\n            }\n        },\n        align: 'center',\n    },\n    {\n        key: 'userData',\n        title: '騎乘者姓名',\n        dataIndex: 'userData',\n        width: 200,\n        render: (userData) => userData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '騎乘關卡',\n        dataIndex: 'difficultyData',\n        width: 200,\n        render: (difficultyData) => difficultyData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '騎乘開始時間',\n        dataIndex: 'beginWorkoutTime',\n        width: 200,\n        render: (beginWorkoutTime) => beginWorkoutTime.toLocaleString(),\n    },\n    {\n        key: 'beginWorkoutTime',\n        title: '騎乘時間',\n        width: 200,\n        render: (currRecord) => calWorkoutTime(currRecord),\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => (\n            <Button type=\"link\" onClick={() => openViewModal(id)}>\n                查看\n            </Button>\n        ),\n        width: 150,\n    },\n];\n\nconst calWorkoutTime = (currRecord) => {\n    if (_.isEmpty(currRecord)) {\n        return;\n    }\n    const begin = moment(currRecord?.beginWorkoutTime);\n    const end = moment(currRecord?.finishedWorkoutTime);\n\n    const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n    const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n    const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n    const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n    let returnStr = '';\n\n    if (h != '00') returnStr += `${h} 小時 `;\n    returnStr += `${m} 分 ${s} 秒`;\n\n    return returnStr;\n};\n\nconst isWorkoutTimeGT30 = (currRecord) => {\n    if (_.isEmpty(currRecord)) {\n        return;\n    }\n    const begin = moment(currRecord?.beginWorkoutTime);\n    const end = moment(currRecord?.finishedWorkoutTime);\n\n    const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n    const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2); // 分\n\n    return parseInt(m) >= 30;\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nexport default RecordList;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    getDoc,\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n    collection,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Table,\n    Space,\n    Descriptions,\n    Popover,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport styles from './styles.module.scss';\n\nimport { usersRef } from '../../services/firebase';\n\nconst { Content } = Layout;\n\nconst TrainingWeekRecord = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n    const [user, setUser] = useState(); // 該會員資料\n    const [records, setRecords] = useState([]); // 該會員全部的訓練週數資料\n    const [isDone, setIsDone] = useState(false);\n\n    const [currRecord, setCurrRecord] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // forms\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchUser();\n        await fetchRecords();\n        setIsDone(true);\n    };\n\n    const fetchUser = async () => {\n        const userPath = doc(usersRef, params.userId);\n\n        const userSnapshot = await getDoc(userPath);\n        const user = userSnapshot.data();\n\n        setUser(user);\n    };\n\n    const fetchRecords = async () => {\n        const recordsPath = collection(\n            usersRef,\n            params.userId,\n            'trainingWeekRecords',\n        );\n        const q = query(recordsPath, where('isDeleted', '!=', true));\n\n        const records = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            records.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        console.log(records);\n\n        setRecords(records);\n    };\n\n    const onCreateUser = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            console.log(values);\n\n            setLoading(true);\n            const recordsPath = collection(\n                usersRef,\n                params.userId,\n                'trainingWeekRecords',\n            );\n            await addDoc(recordsPath, {\n                weekNumber: values.weekNumber,\n                content: values.content,\n                isDeleted: false,\n            });\n\n            await fetchRecords();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增週次紀錄！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            message.error(e?.message);\n        }\n    };\n\n    const onPatchRecord = async () => {\n        try {\n            const values = await editForm.validateFields();\n\n            setLoading(true);\n            const currRecordPath = doc(\n                usersRef,\n                params.userId,\n                'trainingWeekRecords',\n                currRecord.id,\n            );\n            await updateDoc(currRecordPath, {\n                content: values.content,\n            });\n\n            await fetchRecords();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新騎乘者！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onDeleteRecord = (id) => {\n        const theRecord = records.find((u) => u.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除週次：${theRecord.weekNumber}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，週次訓練資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteRecord(id),\n        });\n    };\n\n    const deleteRecord = async (id) => {\n        const currRecordPath = doc(\n            usersRef,\n            params.userId,\n            'trainingWeekRecords',\n            id,\n        );\n        await updateDoc(currRecordPath, {\n            isDeleted: true,\n        });\n\n        await fetchRecords();\n\n        message.info('週次紀錄已刪除。');\n    };\n\n    const openViewModal = (id) => {\n        const currRecord = records.find((u) => u.id === id);\n        setCurrRecord(currRecord);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currRecord = records.find((u) => u.id === id);\n\n        editForm.setFieldsValue({\n            weekNumber: currRecord.weekNumber,\n            content: currRecord.content,\n        });\n\n        setCurrRecord(currRecord);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrRecord();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrRecord();\n        closeAllModals();\n    };\n\n    const goBack = () => {\n        navigate(-1);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title={`${user.name}的訓練週數紀錄`}\n                        // subTitle={`管理${user.name}的訓練週數紀錄`}\n                        onBack={goBack}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增訓練週次紀錄\n                            </Button>,\n                        ]}\n                    />\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteRecord,\n                        )}\n                        dataSource={records}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視週次紀錄\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width=\"70vw\"\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"週次\" span={3}>\n                                {currRecord?.weekNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"紀錄內容\" span={3}>\n                                {currRecord?.content}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增週次紀錄\"\n                        visible={createModalVisible}\n                        onOk={onCreateUser}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                        width=\"70vw\"\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item\n                                label=\"週次\"\n                                name=\"weekNumber\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上週次',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"輸入第幾週\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"紀錄內容\"\n                                name=\"content\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填寫紀錄內容',\n                                    },\n                                ]}\n                            >\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"訓練情形、特殊狀況等等．．．\"\n                                    maxLength={300}\n                                    autoSize={{ minRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯週次紀錄\"\n                        visible={editModalVisible}\n                        onOk={onPatchRecord}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                        width=\"70vw\"\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item label=\"週數\">\n                                {currRecord?.weekNumber}\n                            </Form.Item>\n                            <Form.Item label=\"紀錄內容\" name=\"content\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"訓練情形、特殊狀況等等．．．\"\n                                    maxLength={300}\n                                    autoSize={{ minRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteUser) => [\n    {\n        key: 'weekNumber',\n        title: '週次',\n        dataIndex: 'weekNumber',\n        width: 200,\n    },\n    {\n        key: 'content',\n        title: '紀錄內容',\n        dataIndex: 'content',\n        render: (content) => {\n            if (content.length > 100) {\n                return content.slice(0, 97) + '...';\n            }\n            return content;\n        },\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看週次紀錄\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯週次紀錄\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteUser(id)}\n                            >\n                                刪除週次紀錄\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 7,\n        // offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default TrainingWeekRecord;\n","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { ROUTE_PATH, ROLES } from '../constants/';\n\nimport ProtectedRoutes from './ProtectedRoutes';\nimport SignIn from '../layouts/SignIn';\nimport AdminDashboard from '../layouts/AdminDashboard';\nimport Missing from '../layouts/Missing';\nimport Unauthorized from '../layouts/Unauthorized';\nimport PrepareWorkout from '../layouts/PrepareWorkout';\nimport MonitoringWorkout from '../layouts/MonitoringWorkout';\nimport UserList from '../layouts/UserList';\nimport DifficulityList from '../layouts/DifficulityList';\nimport FinishedWorkout from '../layouts/FinishedWorkout';\nimport RecordList from '../layouts/RecordList';\nimport TrainingWeekRecord from '../layouts/TrainingWeekRecord';\n\nconst AppRoutes = () => {\n    return (\n        <Routes>\n            <Route\n                path={ROUTE_PATH.home}\n                element={<Navigate replace to={ROUTE_PATH.sign_in} />}\n            />\n            <Route path={ROUTE_PATH.sign_in} element={<SignIn />} />\n            <Route path={ROUTE_PATH.unauthorized} element={<Unauthorized />} />\n\n            {/* only Admin can visit */}\n            <Route element={<ProtectedRoutes allowedRoles={[ROLES.Admin]} />}>\n                <Route\n                    path={ROUTE_PATH.admin_dashbaord}\n                    element={<AdminDashboard />}\n                />\n                <Route\n                    path={ROUTE_PATH.prepare_workout}\n                    element={<PrepareWorkout />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.monitoring_workout}/:recordId`}\n                    element={<MonitoringWorkout />}\n                />\n                <Route path={ROUTE_PATH.user_list} element={<UserList />} />\n                <Route\n                    path={`${ROUTE_PATH.record_list}/:userId`}\n                    element={<RecordList />}\n                />\n                <Route\n                    path={ROUTE_PATH.difficulty_list}\n                    element={<DifficulityList />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.finsished_workout}/:recordId`}\n                    element={<FinishedWorkout />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.training_week_record}/:userId`}\n                    element={<TrainingWeekRecord />}\n                />\n            </Route>\n\n            {/* catch all */}\n            <Route path=\"*\" element={<Missing />} />\n        </Routes>\n    );\n};\n\nexport default AppRoutes;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport { ConfigProvider } from 'antd';\nimport 'moment/locale/zh-tw';\nimport locale from 'antd/lib/locale/zh_TW';\nimport React, { useEffect, useState } from 'react';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport _ from '../../util/helper';\n// import moment from 'moment';\n\n// import styles from './styles.module.scss';\nimport 'antd/dist/antd.css';\nimport '@ant-design/flowchart/dist/index.css';\n\n/*\n    expect: \n        ConfigProvider\n*/\n\nconst AppProvider = ({ children }) => {\n    const { dispatch } = useStore();\n    const [initializedDone, setInitializedDone] = useState(false);\n\n    useEffect(() => {\n        attempLogin();\n\n        // window.addEventListener('beforeunload', beforeunloadListener);\n        // window.addEventListener('visibilitychange', visibilitychangeListener);\n        // return () => {\n        //     window.removeEventListener(\n        //         'beforeunload',\n        //         visibilitychangeListener,\n        //     );\n        // };\n    }, []);\n\n    const beforeunloadListener = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: SET_AUTH,\n            payload: {\n                isValid: false,\n                roles: [],\n            },\n        });\n    };\n\n    const visibilitychangeListener = (e) => {\n        if (document.visibilityState == 'hidden') {\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: false,\n                    roles: [],\n                },\n            });\n        }\n    };\n\n    const attempLogin = () => {\n        // console.log('executing attemp login');\n        // const expiredIn = window.localStorage.getItem(\n        //     'inventory-system-expired-in',\n        // );\n        setInitializedDone(true);\n\n        // Example Down Below\n        // if (_.isNullOrUndefined(expiredIn)) {\n        //     setInitializedDone(true);\n        //     return;\n        // }\n        // if (moment(expiredIn).endOf('day').isSameOrAfter(moment())) {\n        //     dispatch({\n        //         type: SET_AUTH,\n        //         payload: {\n        //             isValid: true,\n        //             roles: [5051],\n        //         },\n        //     });\n        // }\n        // setInitializedDone(true);\n    };\n\n    if (!initializedDone) {\n        return null;\n    }\n\n    return <ConfigProvider locale={locale}>{children}</ConfigProvider>;\n};\n\nexport default AppProvider;\n\n// Example Down Below\n\n// /* eslint-disable react/prop-types */\n// import React from 'react';\n// import { ConfigProvider } from 'antd';\n// import 'moment/locale/zh-tw';\n// import locale from 'antd/lib/locale/zh_TW';\n\n// // import styles from './styles.module.scss';\n\n// const App = ({ children }) => (\n//     <ConfigProvider locale={locale}>{children}</ConfigProvider>\n// );\n\n// export default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './global.scss';\n\nimport { StoreProvider } from './store';\nimport AppRoutes from './routes';\nimport AppProvider from './layouts/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <StoreProvider>\n            <BrowserRouter>\n                <AppProvider>\n                    {/* <Routes>\n                        <Route path=\"*\" element={<AppRoutes />} />\n                    </Routes> */}\n                    <AppRoutes />\n                </AppProvider>\n            </BrowserRouter>\n        </StoreProvider>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2O6lW\",\"glass\":\"styles_glass__3MZ6q\",\"col\":\"styles_col__3dx1b\",\"mainCol\":\"styles_mainCol__2K9mE\",\"col1\":\"styles_col1__1e9Hq\",\"col2\":\"styles_col2__2sM5V\",\"col3\":\"styles_col3__ZFdLr\",\"unit\":\"styles_unit__2gnSy\",\"stopWatchWrapper\":\"styles_stopWatchWrapper__YtDaA\",\"difficulty\":\"styles_difficulty__27-NT\"};"],"sourceRoot":""}