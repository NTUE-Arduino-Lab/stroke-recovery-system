{"version":3,"sources":["layouts/UserList/styles.module.scss","layouts/AdminDashboard/styles.module.scss","layouts/PrepareWorkout/styles.module.scss","layouts/FinishedWorkout/styles.module.scss","layouts/DifficulityList/styles.module.scss","layouts/RecordList/styles.module.scss","layouts/TrainingWeekRecord/styles.module.scss","layouts/SignIn/styles.module.scss","components/Header/styles.module.scss","layouts/Missing/styles.module.scss","layouts/Unauthorized/styles.module.scss","store/actions.js","constants/path.js","constants/roles.js","constants/warn.js","store/index.js","routes/ProtectedRoutes.js","services/firebase.js","layouts/SignIn/index.js","assets/images/dashboard_icon.png","layouts/AdminDashboard/index.js","assets/images/right-arrow.png","components/Header/index.js","layouts/Missing/index.js","layouts/Unauthorized/index.js","util/helper.js","util/wait.js","layouts/MonitoringWorkout/index.js","layouts/PrepareWorkout/index.js","util/formatSeconds.js","util/configLineChart.js","components/StopWatch/index.js","assets/images/page_icon.png","layouts/UserList/index.js","assets/images/leave_icon.png","layouts/DifficulityList/index.js","layouts/FinishedWorkout/index.js","layouts/RecordList/index.js","layouts/TrainingWeekRecord/index.js","routes/index.js","layouts/App/index.js","index.js","layouts/MonitoringWorkout/styles.module.scss"],"names":["module","exports","SET_AUTH","ROUTE_PATH","home","sign_in","unauthorized","admin_dashbaord","prepare_workout","monitoring_workout","user_list","difficulty_list","record_list","finsished_workout","training_week_record","ROLES","WARN","WARN_THRESHOLD","StoreContext","createContext","initialState","auth","isValid","roles","Admin","reducer","state","action","type","payload","StoreProvider","children","useReducer","value","dispatch","Provider","useStore","useContext","ProtectedRoutes","allowedRoles","find","role","includes","replace","to","app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","getAuth","usersRef","collection","recordsRef","difficultiesRef","validateInputPairId","pairId","a","q","query","where","getDocs","querySnapshot","empty","size","forEach","doc","record","data","recordId","id","finishedWorkoutTime","generateValidPairId","pass","test","getRandomPairId","isPairIdValid","Math","floor","random","toString","Content","Layout","Title","Typography","formLayout","labelCol","span","wrapperCol","tailLayout","offset","SignIn","navigate","useNavigate","Form","useForm","form","useState","loading","setLoading","login","validateFields","values","console","log","signInWithEmailAndPassword","email","password","userCredential","user","goDashboard","message","error","className","style","padding","styles","container","layout","autoComplete","Item","label","colon","marginBottom","level","name","rules","required","placeholder","Password","htmlType","onClick","TileWithIconAndAction","icon","tile","addOn","backgroundImage","tileIcon","tileLabel","AdminDashboard","goUserList","background","Logo","width","height","backgroundSize","backgroundRepeat","cst_btn","display","TeamOutlined","SlidersOutlined","ProfileOutlined","RocketOutlined","Header","Missing","Unauthorized","helper","object","defaults","_","list","iteratee","context","Set","Array","from","index","array","call","each","map","obj","mapObject","memo","reduce","every","some","predicate","result","Map","entries","entry","key","findIndex","filter","this","length","max","min","any","isArray","n","isEmpty","first","last","has","b","File","i","JSON","stringify","isNullOrUndefined","isString","isPrimitive","Object","isBoolean","isNumber","isFunction","isDate","isNull","isUndefined","undefined","isExisted","isNotExisted","isObject","Number","isInteger","isFinite","isNaN","isFile","json","parse","e","proto","getPrototypeOf","prototype","React","isValidElement","wait","ms","Promise","resolve","setTimeout","yodelBuffer","yodelBuffer2","yodelBuffer3","yodelBuffer4","yodelBuffer5","Countdown","Statistic","Option","Select","Text","initialPacket","rpm","time","heartRate","unsubscribe","WarnHRValueDisplay","warn","phase","overVal","fontSize","PrepareWorkout","users","setUsers","difficulties","setDifficulties","isDone","setIsDone","selectedUser","setSelectedUser","selectedDiff","setSelectedDiff","selectedUserData","setSelectedUserData","selectedDiffData","setSelectedDiffData","userModalVis","setUserModalVis","diffModalVis","setDiffModalVis","warnHRValues","setWarnHRValues","isPairing","setIsPairing","targetgetRecordId","setTargetRecordId","setPairId","isAppConnected","setIsAppConnected","pairDeadline","setPairDeadline","inputPairId","setInputPairId","useEffect","init","fetchUsers","fetchDiffs","targetRecordRef","onSnapshot","currData","updateDoc","success","push","Modal","confirm","title","ExclamationCircleOutlined","content","onOk","deleteRecord","confirmUserAndDiff","createRecord","theDiff","d","targetHeartRate","upperLimitHeartRate","difficulty","createdTime","Timestamp","now","addDoc","beginWorkoutTime","deadline","Date","info","leave","deleteDoc","pairWithApp","theRecordId","alert","onDeadlineExpired","resetFields","getExactThresholdValue","calBase","overHigh","ceil","overMedium","simulateAppCotent","pairing","Search","allowClear","onChange","target","onSearch","disabled","PageHeader","subTitle","onBack","marginTop","gutter","u","diff","targetWorkoutTime","visible","onCancel","footer","bordered","descriptions","idNumber","weight","exerciseHeartRate","exerciseResist","exerciseSpeed","medicine","note","column","color","text","alignItems","dashed","minWidth","borderWidth","margin","marginRight","placement","trigger","SettingOutlined","pairIdWrapper","split","c","onFinish","indicator","LoadingOutlined","spin","ArrowRightOutlined","formatSeconds","input","sec_num","parseInt","hours","minutes","seconds","formatted","configLineChart","xField","yField","yAxis","legend","itemName","formatter","item","meta","alias","geometryOptions","geometry","lineStyle","lineWidth","lineDash","smooth","opacity","point","shape","stroke","fill","annotations","start","end","offsetY","position","textAlign","tooltip","showTitle","StopWatch","initialValue","setTime","miliDisplay","setMiliDisplay","interval","displayInterval","setInterval","clearInterval","slice","unsubscribeRecord","unsubscribePackets","other_notification_url","window","AudioContext","webkitAudioContext","createGain","gain","MonitoringWorkout","params","useParams","setRecord","setUser","setDifficulty","packets","setPackets","isInitRecordDone","setIsInitRecordDone","isInitPacketsDone","setIsInitPacketsDone","isBuffersDone","setIsBuffersDone","beginStopWatch","setBeginStopWatch","nextHeartRateVal","setNextHeartRateVal","fetchBuffers","grantAudioPerssion","begin","isNotEmpty","evaluateCurrPacket","checkIntegrity","listenRecordChange","listenPacketsChange","fetch","response","arrayBuffer","decodeAudioData","audioBuffer","playAudio","buffer","source","createBufferSource","connect","destination","maskClosable","recordRef","getDoc","recordSnapshot","recordData","userRef","userSnapshot","difficultyRef","diffSnapshot","toDate","packetsRef","newPackets","timeLabel","formatWithMoment","sort","splice","packet","overSlight","sendNotification","addRpmAndHeartRate","nextPacket","goFinishWorkout","notification","description","open","SmileOutlined","popoverContent","enterButton","src","muted","glass","col","col1","age","col2","stopWatchWrapper","moment","duration","asMilliseconds","getStopWatchInitialValue","format","col3","unit","mainCol","UserList","setFilteredUser","useRef","left","top","innerContainer","right","horiLine","listWrapper","item_btn","columns","openViewModal","openEditModal","onDeleteDiff","dataIndex","sorter","compare","align","render","direction","danger","MoreOutlined","rotate","modalFormLayout","DifficulityList","filteredDiffs","setFilteredDiffs","searchBarRef","currDiff","setCurrDiff","searchForm","editForm","createForm","createFormChange","setCreateFormChange","editFormChange","setEditFormChange","createModalVisible","setCreateModalVisible","viewModalVisible","setViewModalVisible","editModalVisible","setEditModalVisible","current","blur","onCreateDiff","isDeleted","closeAllModals","onPatchDiff","currUserRef","deleteDiff","theDiffRef","onFormValueChange","changedVal","allVal","formKey","extra","PlusOutlined","clearIcon","CloseCircleFilled","ref","SearchOutlined","setFieldsValue","okText","okType","cancelText","dataSource","pagination","pageSize","marginLeft","confirmLoading","destroyOnClose","onValuesChange","addonAfter","TextArea","showCount","maxLength","autoSize","minRows","maxRows","StylesManager","applyTheme","sixSurveyJson","SixSurveyJson","copdSurveyJson","COPDSurveyJson","sgrSurveyJson","SGRSurveyJson","borgScaleSurveyJson","BorgScaleSurveyJson","mySurveyCss","controlDisabled","rating","selected","FinishedWorkout","therapist","setTherapist","comment","setComment","safeHRIndex","setSafeHRIndex","hrVariabilityIndex","setHRVariabilityIndex","spo2","setSpo2","surveyModalVisible","setSurveyModalVisible","curSurveyName","setCurSurveyName","Model","survey","setSurvey","sixSurveyData","setSixSurveyData","copdSurveyData","setCopdSurveyData","sgrSurveyData","setSGRSurveyData","borgScaleSurveyData","setBorgScaleSurveyData","focusFirstQuestionAutomatic","showNavigationButtons","showCompletedPage","onComplete","add","sender","results","surveyCompleted","openSurveyModal","surveyName","onOKSurvey","hasErrors","doComplete","question2","question3","question5","question9","question10","question1","text1","text2","onFormSubmit","preventDefault","updateTherapistInfo","sixSurvey","borgScaleSurvey","sgrSurvey","copdSurvey","h","m","s","returnStr","calWorkoutTime","toLocaleString","CheckOutlined","prefix","UserOutlined","EditOutlined","LineChartOutlined","model","css","currRecord","isWorkoutTimeGT30","CrownOutlined","userData","difficultyData","RecordList","records","setReocrds","filteredRecords","setFilteredReocrds","setCurrRecord","currReocrdPackets","setCurrRecordPackets","fetchRecords","patchRecordsWithUserAndDiff","getTime","patchedRecords","userId","r","mode","onDeleteUser","TrainingWeekRecord","setRecords","fetchUser","userPath","recordsPath","onCreateUser","weekNumber","onPatchRecord","currRecordPath","theRecord","AppRoutes","path","element","AppProvider","initializedDone","setInitializedDone","attempLogin","locale","ReactDOM","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.87e48d58.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3BM2M\",\"innerContainer\":\"styles_innerContainer__3Y3fM\",\"horiLine\":\"styles_horiLine__14xoM\",\"listWrapper\":\"styles_listWrapper__30jOF\",\"item_btn\":\"styles_item_btn__1L0Li\",\"cst_btn\":\"styles_cst_btn__15dl3\",\"descriptions\":\"styles_descriptions__2Jtwo\",\"form\":\"styles_form__a3cRe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3-pv1\",\"cst_btn\":\"styles_cst_btn__3zf2q\",\"tile\":\"styles_tile__ld1d9\",\"addOn\":\"styles_addOn__lAcI5\",\"tileIcon\":\"styles_tileIcon__3Rzsu\",\"tileLabel\":\"styles_tileLabel__21knx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3NK8e\",\"pairIdWrapper\":\"styles_pairIdWrapper__RnU7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__msRCF\",\"pageHeader\":\"styles_pageHeader__242Ry\",\"descriptions\":\"styles_descriptions__aLChC\",\"form\":\"styles_form__3ok_y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2hB-r\",\"descriptions\":\"styles_descriptions__1kY2t\",\"form\":\"styles_form__1Qnic\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3HuKR\",\"descriptions\":\"styles_descriptions__3UP8P\",\"form\":\"styles_form__1qrcZ\",\"pageHeader\":\"styles_pageHeader__3-ZV-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2Tnc6\",\"descriptions\":\"styles_descriptions__2F6gm\",\"form\":\"styles_form__Z2w7o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2s08f\",\"scroll\":\"styles_scroll__2lbTr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__103ut\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__Hfgws\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__333xu\"};","export const SET_AUTH = 'SET_AUTH';\n","const ROUTE_PATH = {\n    home: '/',\n    sign_in: '/sign-in',\n    unauthorized: '/unauthorized',\n    admin_dashbaord: '/dashboard',\n    prepare_workout: '/prepare-workout',\n    monitoring_workout: '/monitoring-workout',\n    user_list: '/user-list',\n    difficulty_list: '/difficulty-list',\n    record_list: '/record-list',\n    finsished_workout: '/finished-workout',\n    training_week_record: '/training-week-record',\n};\n\nexport default ROUTE_PATH;\n","const ROLES = {\n    'User': 2001,\n    'Editor': 1984,\n    'Admin': 5150,\n};\n\nexport default ROLES;\n","const WARN = {\n    Slight: 'slight',\n    Medium: 'medium',\n    High: 'high',\n};\n\nconst WARN_THRESHOLD = {\n    Slight: 105,\n    Medium: 115,\n    High: 120,\n};\n\nexport { WARN, WARN_THRESHOLD };\n","import { createContext, useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { SET_AUTH } from './actions';\n\nimport { ROLES } from '../constants';\n\nconst StoreContext = createContext();\n\nconst initialState = {\n    auth: {\n        isValid: true,\n        roles: [ROLES.Admin], // 1984: Editor ; 5150: Admin\n    },\n};\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case SET_AUTH:\n            return {\n                ...state,\n                auth: {\n                    ...action.payload,\n                },\n            };\n        default:\n            return state;\n    }\n};\n\nconst StoreProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const value = { state, dispatch };\n\n    return (\n        <StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n    );\n};\n\nconst useStore = () => {\n    return useContext(StoreContext);\n\n    // Used as custom-hook;\n    // const store = useStore();\n    //\n    // console.log(store)\n    // OUTPUT:\n    // {state: {…}, dispatch: ƒ}\n};\n\nStoreProvider.propTypes = {\n    children: PropTypes.object,\n};\n\nexport { StoreProvider, StoreContext, useStore };\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { Outlet, Navigate } from 'react-router-dom';\nimport { useStore } from '../store';\nimport { ROUTE_PATH } from '../constants';\n\nconst ProtectedRoutes = ({ allowedRoles }) => {\n    const {\n        state: { auth },\n    } = useStore();\n\n    if (!auth.isValid) {\n        return <Navigate replace to={ROUTE_PATH.sign_in} />;\n    }\n\n    return auth.roles.find((role) => allowedRoles?.includes(role)) ? (\n        <Outlet />\n    ) : (\n        <Navigate replace to={ROUTE_PATH.unauthorized} />\n    );\n};\n\nexport default ProtectedRoutes;\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from 'firebase/app';\n// import { getAnalytics } from 'firebase/analytics';\nimport {\n    getFirestore,\n    collection,\n    query,\n    where,\n    getDocs,\n} from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_API_KEY,\n    authDomain: 'stroke-recovery-system.firebaseapp.com',\n    projectId: 'stroke-recovery-system',\n    storageBucket: 'stroke-recovery-system.appspot.com',\n    messagingSenderId: '344233774087',\n    appId: process.env.REACT_APP_APP_ID,\n    measurementId: 'G-S5GSD31L4H',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n// const analytics = getAnalytics(app);\nconst db = getFirestore(app);\nexport const auth = getAuth(app);\n\nexport const usersRef = collection(db, 'users');\nexport const recordsRef = collection(db, 'records');\nexport const difficultiesRef = collection(db, 'difficulties');\n\nexport const validateInputPairId = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty || querySnapshot.size != 1) {\n        return false;\n    }\n\n    let record;\n    let recordId;\n    querySnapshot.forEach((doc) => {\n        record = doc.data();\n        recordId = doc.id;\n    });\n\n    if (record?.finishedWorkoutTime != null) {\n        return false;\n    }\n\n    return recordId;\n};\n\nexport const getRpmsWithPairdId = async (pairId) => {\n    let targetRecordId = null;\n\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return null;\n    }\n    if (querySnapshot.size == 1) {\n        querySnapshot.forEach((doc) => {\n            targetRecordId = doc.id;\n        });\n    }\n    console.log(targetRecordId);\n    return collection(recordsRef, targetRecordId, 'rpms');\n};\n\nexport const generateValidPairId = async () => {\n    let pass = false;\n    let pairId = null;\n\n    while (!pass) {\n        const test = getRandomPairId();\n        const validated = await isPairIdValid(test);\n\n        if (validated) {\n            pass = true;\n            pairId = test;\n        }\n    }\n\n    return pairId;\n};\n\nconst isPairIdValid = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return true;\n    } else return false;\n};\n\nconst getRandomPairId = () => {\n    return Math.floor(Math.random() * (9999 - 1000) + 1000).toString();\n};\n","/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Layout, Input, Button, message, Form, Typography } from 'antd';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\n\n// import Header from '../../components/Header';\nimport styles from './styles.module.scss';\nimport { ROUTE_PATH, ROLES } from '../../constants';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport { auth } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Title } = Typography;\n\nconst SignIn = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n    const { dispatch } = useStore();\n    const [loading, setLoading] = useState(false);\n\n    const login = async () => {\n        try {\n            setLoading(true);\n\n            const values = await form.validateFields();\n            console.log(values);\n\n            const userCredential = await signInWithEmailAndPassword(\n                auth,\n                values.email,\n                values.password,\n            );\n\n            const user = userCredential.user;\n            setLoading(false);\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: true,\n                    roles: [ROLES.Admin],\n                },\n            });\n\n            goDashboard();\n        } catch (e) {\n            console.log(e);\n            console.log(e?.message);\n            setLoading(false);\n            message.error('帳號或密碼有誤。');\n        }\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <Form\n                        {...formLayout}\n                        form={form}\n                        layout=\"horizontal\"\n                        autoComplete=\"off\"\n                    >\n                        <Form.Item\n                            label=\" \"\n                            colon={false}\n                            style={{ marginBottom: 12 }}\n                        >\n                            <Title level={2}>長庚大學-物理治療系統登入A</Title>\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Email\"\n                            name=\"email\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '請填入 Email',\n                                },\n                            ]}\n                        >\n                            <Input placeholder=\"\" type=\"email\" />\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Password\"\n                            name=\"password\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '請填入 Password',\n                                },\n                            ]}\n                        >\n                            <Input.Password placeholder=\"\" />\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={login}\n                                loading={loading}\n                            >\n                                登入\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 7,\n    },\n    wrapperCol: {\n        span: 12,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 7,\n        span: 16,\n    },\n};\n\nexport default SignIn;\n","export default __webpack_public_path__ + \"static/media/dashboard_icon.ca3d7924.png\";","/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    TeamOutlined,\n    SlidersOutlined,\n    ProfileOutlined,\n    RocketOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport addOnImg from '../../assets/images/right-arrow.png';\nimport Logo from '../../assets/images/dashboard_icon.png';\n\nconst AdminDashboard = () => {\n    const navigate = useNavigate();\n\n    const goUserList = () => {\n        navigate(ROUTE_PATH.user_list);\n    };\n\n    const goDifficulityList = () => {\n        navigate(ROUTE_PATH.difficulty_list);\n    };\n\n    const goRecordList = () => {\n        navigate(`${ROUTE_PATH.record_list}/123`);\n    };\n\n    const goPrepareWorkout = () => {\n        navigate(ROUTE_PATH.prepare_workout);\n    };\n\n    return (\n        <div className={styles.container}>\n            <legend>\n                醫生端\n            </legend>\n            <div\n                style={{\n                    background: `url(${Logo})`,\n                    width: 240,\n                    height: 270,\n                    backgroundSize: '100%',\n                    backgroundRepeat: 'no-repeat',\n                }}\n            />\n            <div className={styles.cst_btn} onClick={goUserList}>\n                病歷資訊\n            </div>\n            <div className={styles.cst_btn}>\n                連線配對\n            </div>\n            <div className={styles.cst_btn}>\n                基本資料填寫\n            </div>\n            <fieldset style={{display: 'none'}}>\n                <TileWithIconAndAction\n                    icon={<TeamOutlined />}\n                    label=\"管理會員資訊\"\n                    action={goUserList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<SlidersOutlined />}\n                    label=\"騎乘關卡設定\"\n                    action={goDifficulityList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<ProfileOutlined />}\n                    label=\"騎乘紀錄查詢\"\n                    action={goRecordList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<RocketOutlined />}\n                    label=\"開始騎乘作業\"\n                    action={goPrepareWorkout}\n                />\n            </fieldset>\n        </div>\n    );\n};\n\nconst TileWithIconAndAction = ({ icon, label, action }) => (\n    <span className={styles.tile} onClick={action}>\n        <span\n            className={styles.addOn}\n            style={{ backgroundImage: `url(${addOnImg})` }}\n        ></span>\n        <span className={styles.tileIcon}>{icon}</span>\n        <span className={styles.tileLabel}>{label}</span>\n    </span>\n);\n\nexport default AdminDashboard;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5gUPACMKwjZTZgAAAfBJREFUaN7tmDFLHEEYht9vPRRJc+lCtHDXI4V/ICmEQIo0IhbeIqIwe4USPLwmXQIGhAuBYHPdieEInN6pVRCSIm0qC0VCmsREUBELYykSb/dNEfYKg8jhruvgPM0UMwzf+8B8wwxgMBgMBoM29K24WQbt7YDrkm1tSddzbdgzao3M5520Inl66uS9DfL42P6tFsjh4aTri41Mafojg46OZnDH80gyHO26+kWenfUO5e6TIyOt7m8lHfAytguHFUijgTHZBE5Ozs/LC5kFUqlgNPgCVKutirjxAoDVVRHf5yw3gIkJvuYM0GhEJUKSjtcqdjFXZJDNojcYhdRqYfD/Fj6DDfg+v8su6Hk7C5V3YlWr2guIWoS2AqISIY6jSuTAAOfEB8pleY4toKsr6WBxEfYQ6y1swHXF/qZ+kHt7MihFoLs76QKvTcQaXwL7+xrcAjHxQKYB0rL6+RWYnAyNJF1X3DSPwCN+AgoF/Ztgj6cYuC7e8BVkaenSJviQGUCpncfvx0QWF7UVcNXg4bR2AqIKrp2A5qvvM54A9fpFwZtnvGb1A+PjPz9UDkSWly/aVwMB/979ztM7d4GjI2zjD5BOXzV4yI2/BjOlezkwlcI6y0BnZ1TBtcPe9ObJqalb9yFynlv7JWYwGAyGGPgL5etGn1vyhAgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDUtMTVUMDA6MzU6MTArMDA6MDBS2JlGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTA1LTE1VDAwOjM1OjEwKzAwOjAwI4Uh+gAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ROUTE_PATH } from '../../constants/';\n\nimport styles from './styles.module.scss';\n\nconst Header = () => {\n    return (\n        <div className={styles.container}>\n            <Link to={ROUTE_PATH.admin_dashbaord}>Dashboard</Link>\n        </div>\n    );\n};\n\nexport default Header;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Missing = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <h1>!NOT FOUND!</h1>\n            <p>Sorry, the page you visited is not exist</p>\n        </div>\n    );\n};\n\nexport default Missing;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Unauthorized = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <p>Sorry, you are not authorized to view this page</p>\n        </div>\n    );\n};\n\nexport default Unauthorized;\n","import _ from 'underscore';\nimport React from 'react';\n\nclass Helper {\n    defaults(object, defaults) {\n        return _.defaults({ ...object }, defaults);\n    }\n    each(list, iteratee, context) {\n        if (list instanceof Set) {\n            let array = Array.from(list);\n            array.forEach((value, index, array) =>\n                iteratee.call(context, value, index, array),\n            );\n        } else {\n            _.each(list, iteratee, context);\n        }\n    }\n\n    map(list, iteratee, context) {\n        return _.map(list, iteratee, context);\n    }\n\n    mapObject(obj, iteratee, context) {\n        return _.mapObject(obj, iteratee, context);\n    }\n\n    reduce(list, iteratee, memo, context) {\n        return _.reduce(list, iteratee, memo, context);\n    }\n\n    every(list, iteratee, context) {\n        return _.every(list, iteratee, context);\n    }\n\n    some(list, iteratee, context) {\n        return _.some(list, iteratee, context);\n    }\n\n    find(list, predicate, context) {\n        let result = null;\n        if (list instanceof Map) {\n            for (const entry of list.entries()) {\n                let value = entry[1];\n                let key = entry[0];\n                let test = predicate.call(context, value, key, list);\n                if (test) {\n                    result = value;\n                    break;\n                }\n            }\n        } else {\n            result = _.find(list, predicate, context);\n        }\n        return result;\n    }\n\n    findIndex(list, predicate, context) {\n        return _.findIndex(list, predicate, context);\n    }\n\n    filter(list, predicate, context) {\n        return _.filter(list, predicate, context);\n    }\n\n    count(list, predicate, context) {\n        return this.filter(list, predicate, context).length;\n    }\n\n    max(list, iteratee, context) {\n        return _.max(list, iteratee, context);\n    }\n\n    min(list, iteratee, context) {\n        return _.min(list, iteratee, context);\n    }\n\n    toArray(any) {\n        if (this.isValid(any)) {\n            return _.isArray(any) ? any : [any];\n        } else {\n            return any;\n        }\n    }\n    first(array, n) {\n        return _.isEmpty(array) ? null : _.first(array, n);\n    }\n\n    last(array, n) {\n        return _.isEmpty(array) ? null : _.last(array, n);\n    }\n\n    has(object, key) {\n        return _.has(object, key);\n    }\n\n    values(object) {\n        return _.values(object);\n    }\n\n    isEqual(a, b) {\n        let test = true;\n        if (a instanceof File && b instanceof File) {\n            test = a.size === b.size;\n        } else if (this.isArray(a) && this.isArray(b)) {\n            for (let i = 0; i < Math.max(a.length, b.length); i++) {\n                if (a[i] !== b[i]) {\n                    test = false;\n                    break;\n                }\n            }\n        } else {\n            test = JSON.stringify(a) === JSON.stringify(b);\n        }\n        return test;\n    }\n    isEmpty(value) {\n        let test = false;\n        if (this.isNullOrUndefined(value)) {\n            test = true;\n        } else if (_.isString(value) || _.isArray(value)) {\n            test = value.length === 0;\n        } else if (!this.isPrimitive(value)) {\n            test = Object.entries(value).length === 0;\n        }\n        return test;\n    }\n    isNotEmpty(object) {\n        return !this.isEmpty(object);\n    }\n    isBoolean(object) {\n        return _.isBoolean(object);\n    }\n    isFalse(value) {\n        return value === false;\n    }\n    isTrue(value) {\n        return value === true;\n    }\n    isString(object) {\n        return _.isString(object);\n    }\n    isNumber(object) {\n        return _.isNumber(object);\n    }\n    isFunction(object) {\n        return _.isFunction(object);\n    }\n    isDate(object) {\n        return _.isDate(object);\n    }\n    isNull(...values) {\n        return values.every((value) => _.isNull(value));\n    }\n    isNotNull(...values) {\n        return values.every((value) => !_.isNull(value));\n    }\n    isUndefined(...values) {\n        return values.every((value) => _.isUndefined(value));\n    }\n    isNotUndefined(...values) {\n        return values.every((value) => !_.isUndefined(value));\n    }\n    isNullOrUndefined(...values) {\n        return values.every(\n            (value) => this.isNull(value) || this.isUndefined(value),\n        );\n    }\n    isNotNullOrUndefined(...values) {\n        return values.every((value) => !this.isNullOrUndefined(value));\n    }\n    isExisted(object) {\n        return !(object === null || object === undefined);\n    }\n    isNotExisted(object) {\n        return object === null || object === undefined;\n    }\n    isValid(object) {\n        return this.isExisted(object);\n    }\n    isNotValid(object) {\n        return this.isNotExisted(object);\n    }\n    isArray(object) {\n        return Array.isArray(object);\n    }\n    isObject(object) {\n        return _.isObject(object);\n    }\n    isInteger(object) {\n        return Number.isInteger(object);\n    }\n    isFinite(value) {\n        return Number.isFinite(value);\n    }\n    isFile(object) {\n        return object instanceof File;\n    }\n    isNaN(object) {\n        return _.isNaN(object);\n    }\n    isPrimitive(value) {\n        return (\n            this.isNumber(value) ||\n            this.isString(value) ||\n            this.isDate(value) ||\n            this.isBoolean(value) ||\n            this.isFile(value)\n        );\n    }\n    isJson(json) {\n        if (!_.isString(json)) return false;\n\n        try {\n            JSON.parse(json);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n    isPojo(object) {\n        if (object == null || typeof object !== 'object') {\n            return false;\n        }\n        const proto = Object.getPrototypeOf(object);\n        if (proto == null) {\n            return true; // `Object.create(null)`\n        }\n        return proto === Object.prototype;\n    }\n    isElement(object) {\n        return React.isValidElement(object);\n    }\n}\n\nlet helper = new Helper();\n\nexport default helper;\n","export default function wait(ms, value) {\n    return new Promise((resolve) => setTimeout(resolve, ms, value));\n}\n","/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    onSnapshot,\n    collection,\n    addDoc,\n    doc,\n    updateDoc,\n    Timestamp,\n    getDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport { Modal, Popover, Button, Input, message, notification } from 'antd';\nimport {\n    SettingOutlined,\n    ExclamationCircleOutlined,\n    SmileOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN, WARN_THRESHOLD } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport wait from '../../util/wait';\n// import useAudio from '../../util/useAudio';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nimport StopWatch from '../../components/StopWatch';\n\nlet unsubscribeRecord = null;\nlet unsubscribePackets = null;\n\nconst warn_slight_url = '/assets/sounds/warn-slight.wav';\nconst warn_medium_url = '/assets/sounds/warn-medium.wav';\nconst warn_high_url = '/assets/sounds/warn-high.wav';\nconst other_notification_url = '/assets/sounds/notification.wav';\nconst other_archieved_url = '/assets/sounds/goal-archieved.wav';\n\nconst https_yodel =\n    'https://s3-us-west-2.amazonaws.com/s.cdpn.io/123941/Yodel_Sound_Effect.mp3';\n\n//:\n//:\n//:\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar context = new AudioContext(); // Make it crossbrowser\nvar gainNode = context.createGain();\ngainNode.gain.value = 1; // set volume to 100%\nvar yodelBuffer; // slight\nvar yodelBuffer2; // medium\nvar yodelBuffer3; // high\nvar yodelBuffer4; // archieved\nvar yodelBuffer5; // notfication\n//:\n//:\n//:\n\nconst MonitoringWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [record, setRecord] = useState();\n    const [user, setUser] = useState();\n    const [difficulty, setDifficulty] = useState();\n    const [packets, setPackets] = useState([]);\n\n    const [isInitRecordDone, setIsInitRecordDone] = useState(false);\n    const [isInitPacketsDone, setIsInitPacketsDone] = useState(false);\n\n    const [isBuffersDone, setIsBuffersDone] = useState(false);\n\n    // const {\n    //     playWarnSound,\n    //     playOtherSound,\n    //     OTHER_SOUND,\n    //     getAudioPermission,\n    // } = useAudio();\n\n    // 騎乘計時碼表\n    const [beginStopWatch, setBeginStopWatch] = useState(false);\n\n    // for prototype\n    const [nextHeartRateVal, setNextHeartRateVal] = useState('');\n\n    useEffect(() => {\n        init();\n        fetchBuffers();\n\n        return () => {\n            if (_.isFunction(unsubscribeRecord)) unsubscribeRecord();\n            if (_.isFunction(unsubscribePackets)) unsubscribePackets();\n        };\n    }, []);\n\n    useEffect(() => {\n        if (\n            isInitRecordDone &&\n            isInitPacketsDone &&\n            !_.isEmpty(difficulty) &&\n            isBuffersDone\n        ) {\n            grantAudioPerssion();\n        }\n    }, [isInitRecordDone, isInitPacketsDone, difficulty, isBuffersDone]);\n\n    useEffect(() => {\n        if (_.isEmpty(record?.beginWorkoutTime)) return;\n\n        const begin = record.beginWorkoutTime;\n        const end = record.finishedWorkoutTime;\n\n        if (_.isNotEmpty(begin)) setBeginStopWatch(true);\n        if (_.isNotEmpty(end)) setBeginStopWatch(false);\n    }, [record]);\n\n    useEffect(() => {\n        if (_.isEmpty(record)) return;\n        if (!isInitRecordDone || !isInitPacketsDone) return;\n\n        evaluateCurrPacket(packets[packets.length - 1]);\n    }, [packets]);\n\n    const init = async () => {\n        checkIntegrity();\n        listenRecordChange();\n        listenPacketsChange();\n    };\n\n    const fetchBuffers = async () => {\n        let response;\n        let arrayBuffer;\n\n        response = await fetch(warn_slight_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(warn_medium_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer2 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(warn_high_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer3 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(other_archieved_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer4 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(other_notification_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer5 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        setIsBuffersDone(true);\n    };\n\n    const playAudio = (buffer) => {\n        var source = context.createBufferSource();\n        source.buffer = buffer;\n        source.connect(context.destination);\n        source.start();\n    };\n\n    const grantAudioPerssion = () => {\n        Modal.info({\n            title: '提示：監控過程會產生提示聲響，請確保聲音打開！',\n            // content: <button onClick={getAudioPermission}>點我測試;</button>,\n            onOk() {\n                playAudio(yodelBuffer5);\n            },\n            maskClosable: false,\n        });\n    };\n\n    const formatBeginWorkoutTime = () => {\n        if (_.isEmpty(record.beginWorkoutTime)) {\n            return '';\n        }\n\n        return moment(record.beginWorkoutTime).format('YYYY/MM/DD HH:mm');\n    };\n\n    const checkIntegrity = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        // check if a valid record\n        if (recordData.finishedWorkoutTime != null) {\n            alert('此筆紀錄已完成，將自動導回首頁！');\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        setUser(user);\n        setDifficulty(difficulty);\n    };\n\n    const listenRecordChange = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        unsubscribeRecord = onSnapshot(recordRef, async (recordSnapshot) => {\n            const recordData = recordSnapshot.data();\n            const record = {\n                ...recordData,\n                beginWorkoutTime: recordData.beginWorkoutTime?.toDate(),\n            };\n\n            setRecord(record);\n            setIsInitRecordDone(true);\n        });\n    };\n\n    const listenPacketsChange = () => {\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        unsubscribePackets = onSnapshot(packetsRef, (querySnapshot) => {\n            if (querySnapshot.empty) {\n                alert('監測數據有誤，請重新配對，即將退回選擇畫面！');\n                navigate(ROUTE_PATH.prepare_workout, { replace: true });\n                return;\n            }\n            const newPackets = [];\n            querySnapshot.forEach((doc) => {\n                newPackets.push({\n                    ...doc.data(),\n                    timeLabel: formatWithMoment(doc.data().time),\n                });\n            });\n\n            newPackets.sort((a, b) => a.time - b.time);\n            newPackets.splice(0, 1);\n\n            setPackets(newPackets);\n            setIsInitPacketsDone(true);\n        });\n    };\n\n    const evaluateCurrPacket = (packet) => {\n        const targetHeartRate = record.targetHeartRate;\n        const [overSlight, overMedium, overHigh] = getExactThresholdValue();\n\n        console.log(packet);\n\n        if (packet.heartRate >= overHigh) {\n            console.log('playing: high warn');\n            playAudio(yodelBuffer3);\n            sendNotification(WARN.High, packet.heartRate);\n        } else if (\n            packet.heartRate < overHigh &&\n            packet.heartRate >= overMedium\n        ) {\n            console.log('playing: medium warn');\n            playAudio(yodelBuffer2);\n            sendNotification(WARN.Medium, packet.heartRate);\n        } else if (\n            packet.heartRate < overMedium &&\n            packet.heartRate >= overSlight\n        ) {\n            console.log('playing: slight warn');\n            playAudio(yodelBuffer);\n            sendNotification(WARN.Slight, packet.heartRate);\n        } else if (\n            packet.heartRate >= targetHeartRate &&\n            packet.heartRate < overSlight\n        ) {\n            console.log('playing: archieved');\n            playAudio(yodelBuffer4);\n            sendNotification('Archieved', packet.heartRate, targetHeartRate);\n        }\n    };\n\n    const getExactThresholdValue = () => {\n        const upperLimitHeartRate = record.upperLimitHeartRate;\n\n        const calBase = upperLimitHeartRate / 100;\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    // for prototype testing\n    const addRpmAndHeartRate = async () => {\n        // set the begin time\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const record = recordSnapshot.data();\n        if (record.beginWorkoutTime == null) {\n            await updateDoc(recordRef, {\n                beginWorkoutTime: Timestamp.now(),\n            });\n        }\n\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        const time = (packets.length + 1) * 5;\n        const heartRate = _.isNotEmpty(nextHeartRateVal)\n            ? parseInt(nextHeartRateVal)\n            : 95 + packets.length;\n\n        // simulate incoming rpm & heart rate\n        const rpm = 30;\n        const nextPacket = {\n            time,\n            rpm: rpm + packets.length,\n            heartRate: heartRate,\n        };\n\n        await addDoc(packetsRef, nextPacket);\n    };\n\n    const confirmFinish = () => {\n        Modal.confirm({\n            title: '即將結束！',\n            icon: <ExclamationCircleOutlined />,\n            content: '確定結束本次騎乘？',\n            onOk: () => goFinishWorkout(),\n        });\n    };\n\n    const goFinishWorkout = async () => {\n        setBeginStopWatch(false);\n\n        await wait(2000);\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            finishedWorkoutTime: Timestamp.now(),\n            pairId: null,\n        });\n\n        message.success({ content: '已結束！自動跳轉至統計畫面' });\n\n        await wait(1000);\n        navigate(`${ROUTE_PATH.finsished_workout}/${params.recordId}`, {\n            replace: true,\n        });\n    };\n\n    const getStopWatchInitialValue = () => {\n        if (_.isEmpty(record?.beginWorkoutTime)) {\n            return 0;\n        }\n\n        const begin = moment(record.beginWorkoutTime);\n        const now = moment();\n        const accumlated = moment.duration(now.diff(begin)).asMilliseconds();\n\n        return accumlated;\n    };\n\n    // 右上角通知顯示\n    const sendNotification = (warn, heartRate, targetHeartRate) => {\n        if (warn === WARN.High) {\n            // high warn\n            notification.warn({\n                message: '第三階段警示，請檢查騎乘者身體狀況',\n                description: `達到第三階段警示心率。最新心率：${heartRate} BPM。`,\n            });\n        } else if (warn === WARN.Medium) {\n            // medium warn\n            notification.info({\n                message: '第二階段警示，請留意騎乘者身體狀況',\n                description: `達到第一階段警示心率。最新心率：${heartRate} BPM。`,\n            });\n        } else if (warn === WARN.Slight) {\n            // slight warn\n            notification.open({\n                message: '第一階段警示',\n                description: `達到第一階段警示心率。最新心率：${heartRate} BPM。`,\n                icon: <SmileOutlined style={{ color: '#108ee9' }} />,\n            });\n        } else {\n            // archived\n            notification.success({\n                message: '恭喜達到目標訓練心率！',\n                description: `達到目標訓練心率（${targetHeartRate} BPM）。最新心率：${heartRate} BPM。`,\n            });\n        }\n    };\n\n    if (\n        !isInitRecordDone ||\n        !isInitPacketsDone ||\n        _.isEmpty(difficulty) ||\n        !isBuffersDone\n    ) {\n        return <div className={styles.container}>監控畫面初始化中...</div>;\n    }\n\n    const popoverContent = (\n        <>\n            <Input.Search\n                placeholder=\"下個心率是？\"\n                allowClear\n                enterButton=\"新增\"\n                size=\"Large\"\n                onChange={(e) => setNextHeartRateVal(e.target.value)}\n                onSearch={addRpmAndHeartRate}\n            />\n            <Button onClick={confirmFinish}>結束騎乘</Button>\n        </>\n    );\n\n    console.log(record.targetHeartRate);\n\n    // TODO:\n    // refactoring <table> to component\n    return (\n        <div className={styles.container}>\n            <audio id=\"audio\" src={other_notification_url} muted></audio>\n            <div className={styles.glass}>\n                {/* <h1>騎乘監控畫面</h1> */}\n                <div className={`${styles.col} ${styles.col1}`}>\n                    <span>騎乘者：{user?.name}</span>\n                    <span>騎乘者身體年齡：{user?.age}</span>\n                </div>\n                <div className={`${styles.col} ${styles.col2}`}>\n                    <div className={styles.stopWatchWrapper}>\n                        <span>騎乘進行了：</span>\n                        <StopWatch\n                            start={beginStopWatch}\n                            initialValue={getStopWatchInitialValue()}\n                        />\n                    </div>\n                    <caption>(開始於 {formatBeginWorkoutTime()})</caption>\n                </div>\n                <div className={`${styles.col} ${styles.col3}`}>\n                    <span>平均速率：20 <span className={styles.unit}>RPM</span></span>\n                    <span>平均心率：30 <span className={styles.unit}>BPM</span></span>\n                    <span>運動強度：23 <span className={styles.unit}>WATTS</span></span>\n                    <span>累積熱量消耗：12 <span className={styles.unit}>CAL</span></span>\n                </div>\n                <div className={`${styles.col} ${styles.difficulty}`}>\n                    <Popover\n                        content={popoverContent}\n                        placement=\"bottomRight\"\n                        title=\"更多操作\"\n                        trigger=\"click\"\n                    >\n                        <SettingOutlined width={'1em'} />\n                    </Popover>\n                    <span>騎乘關卡：{difficulty.name}</span>\n                    <span>目標心率：{difficulty.targetHeartRate}</span>\n                    <span>上限心率：{difficulty.upperLimitHeartRate}</span>\n                    <caption>\n                        分階警示心率：{getExactThresholdValue()[0]}/\n                        {getExactThresholdValue()[1]}/\n                        {getExactThresholdValue()[2]}\n                    </caption>\n                </div>\n                <div className={styles.mainCol}>\n                    <LineChart\n                        {...configLineChart(packets, record.targetHeartRate)}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default MonitoringWorkout;\n","/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst PrepareWorkout = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"準備騎乘！進行騎乘設定\"\n                        subTitle=\"選擇騎乘者及關卡資訊\"\n                        onBack={goDashboard}\n                    />\n\n                    <Form {...formLayout} form={form} style={{ marginTop: 36 }}>\n                        <Form.Item\n                            name=\"user\"\n                            label=\"騎乘者\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇騎乘者',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇騎乘者\"\n                                        onChange={onUserChange}\n                                        disabled={pairId}\n                                    >\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedUser}\n                                        onClick={openUserModal}\n                                    >\n                                        查看騎乘者資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"difficulty\"\n                            label=\"關卡資訊\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇關卡資訊',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇關卡資訊\"\n                                        onChange={onDiffChange}\n                                        disabled={pairId}\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}・\n                                                {diff.targetWorkoutTime}{' '}\n                                                分鐘・目標{' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedDiff}\n                                        onClick={openDiffModal}\n                                    >\n                                        查看關卡資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={confirmUserAndDiff}\n                                disabled={pairId}\n                            >\n                                下一步，生成配對碼\n                            </Button>\n                        </Form.Item>\n                    </Form>\n\n                    <Modal\n                        title=\"檢視騎乘者\"\n                        visible={userModalVis}\n                        onCancel={closeUserModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"會員編號\" span={3}>\n                                {selectedUserData?.idNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"姓名\" span={3}>\n                                {selectedUserData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"身高\" span={3}>\n                                {selectedUserData?.height} 公分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"體重\" span={3}>\n                                {selectedUserData?.weight} 公斤\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動心率\" span={3}>\n                                {selectedUserData?.exerciseHeartRate} BPM\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動阻力\" span={3}>\n                                {selectedUserData?.exerciseResist}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動速度\" span={3}>\n                                {selectedUserData?.exerciseSpeed}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"是否服用藥物\" span={3}>\n                                {selectedUserData?.medicine ? '是' : '否'}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={3}>\n                                {selectedUserData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    <Modal\n                        title=\"檢視難度\"\n                        visible={diffModalVis}\n                        onCancel={closeDiffModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"難度名稱\" span={1}>\n                                {selectedDiffData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標騎乘時間\" span={1}>\n                                {selectedDiffData?.targetWorkoutTime} 分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標心率數值\" span={2}>\n                                {selectedDiffData?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"上限心率數值\" span={2}>\n                                {selectedDiffData?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        警示心率門檻\n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{\n                                                fontSize: '0.8em',\n                                            }}\n                                        >\n                                            依據上限心率數值計算\n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={2}>\n                                {selectedDiffData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n\n                    {pairId && (\n                        <>\n                            <Divider\n                                dashed={true}\n                                style={{\n                                    minWidth: '90%',\n                                    width: '90%',\n                                    borderWidth: '2px',\n                                    margin: 'auto',\n                                    marginRight: 'auto',\n                                    marginTop: '4em',\n                                    marginBottom: '4em',\n                                }}\n                            />\n                            <Form {...formLayout}>\n                                <Form.Item\n                                    label={\n                                        <>\n                                            配對碼\n                                            <Popover\n                                                content={simulateAppCotent}\n                                                placement=\"bottomRight\"\n                                                title=\"更多操作\"\n                                                trigger=\"click\"\n                                            >\n                                                <SettingOutlined\n                                                    width={'1em'}\n                                                />\n                                            </Popover>\n                                        </>\n                                    }\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                >\n                                    <div className={styles.pairIdWrapper}>\n                                        {pairId.split('').map((c, i) => (\n                                            <pre key={c + i}>{c}</pre>\n                                        ))}\n\n                                        {/* <Countdown\n                                            title=\"有效時間\"\n                                            value={Date.now() + 1000 * 60 * 10}\n                                            onFinish={onDeadlineExpired}\n                                        /> */}\n                                        {pairDeadline && (\n                                            <Countdown\n                                                title=\"有效時間\"\n                                                value={pairDeadline}\n                                                onFinish={onDeadlineExpired}\n                                            />\n                                        )}\n                                    </div>\n                                </Form.Item>\n                                {!isAppConnected && (\n                                    <Form.Item\n                                        label=\" \"\n                                        colon={false}\n                                        style={{ marginTop: '3em' }}\n                                    >\n                                        <Spin\n                                            indicator={\n                                                <LoadingOutlined\n                                                    style={{\n                                                        fontSize: 24,\n                                                        marginRight: '1em',\n                                                    }}\n                                                    spin\n                                                />\n                                            }\n                                        />\n                                        等待配對中...\n                                    </Form.Item>\n                                )}\n\n                                <Form.Item\n                                    label=\" \"\n                                    colon={false}\n                                    style={{ marginTop: '5em' }}\n                                >\n                                    <Button\n                                        onClick={goMonitoring}\n                                        type={\n                                            isAppConnected\n                                                ? 'primary'\n                                                : 'dashed'\n                                        }\n                                        disabled={!isAppConnected}\n                                        icon={\n                                            isAppConnected && (\n                                                <ArrowRightOutlined />\n                                            )\n                                        }\n                                        size=\"large\"\n                                    >\n                                        前往監視畫面\n                                    </Button>\n                                </Form.Item>\n                            </Form>\n                        </>\n                    )}\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default PrepareWorkout;\n","const formatSeconds = (input) => {\n    const sec_num = parseInt(input, 10);\n    const hours = Math.floor(sec_num / 3600);\n    const minutes = Math.floor((sec_num - hours * 3600) / 60);\n    const seconds = sec_num - hours * 3600 - minutes * 60;\n\n    let formatted = '';\n    if (hours != 0) formatted += `${hours}時 `;\n    if (minutes != 0) formatted += `${minutes}分 `;\n    if (seconds != 0) formatted += `${seconds}秒`;\n\n    return formatted;\n};\n\nexport default formatSeconds;\n","const configLineChart = (data, targetHeartRate) => ({\n    data: [data, data],\n    xField: 'timeLabel',\n    yField: ['rpm', 'heartRate'],\n    yAxis: {\n        rpm: {\n            title: {\n                text: 'RPM',\n            },\n        },\n        heartRate: {\n            title: {\n                text: '心率',\n            },\n        },\n    },\n    // xAxis: {\n    //     title: {\n    //         text: '時間',\n    //     },\n    // },\n    legend: {\n        itemName: {\n            formatter: (text, item) => {\n                return item.value === 'rpm' ? 'RPM' : '心率';\n            },\n        },\n    },\n    meta: {\n        rpm: {\n            alias: 'RPM值 ',\n            formatter: (value) => {\n                return `${value} RPM`;\n            },\n        },\n        heartRate: {\n            alias: '心率',\n            formatter: (value) => {\n                return `${value} BPM`;\n                // return Number((v / 100).toFixed(1));\n            },\n        },\n    },\n    geometryOptions: [\n        {\n            geometry: 'line',\n            color: '#5B8FF9',\n            lineStyle: {\n                lineWidth: 2,\n                lineDash: [5, 5],\n            },\n        },\n        {\n            geometry: 'line',\n            color: '#5AD8A6',\n            smooth: true,\n            lineStyle: {\n                lineWidth: 4,\n                opacity: 0.5,\n            },\n            point: {\n                shape: 'circle',\n                size: 4,\n                style: {\n                    opacity: 0.5,\n                    stroke: '#5AD8A6',\n                    fill: '#fff',\n                },\n            },\n        },\n    ],\n    annotations: {\n        heartRate: [\n            {\n                type: 'line',\n                start: ['min', targetHeartRate], // TODO: change [138] to 目標心率\n                end: ['max', targetHeartRate], // TODO: change [138] to 目標心率\n                style: {\n                    lineWidth: 2,\n                    lineDash: [3, 3],\n                    stroke: '#F4664A',\n                },\n                text: {\n                    content: `目標心率(${targetHeartRate})`, // TODO: change [138] to 目標心率\n                    offsetY: -4,\n                    position: 'end',\n                    style: {\n                        textAlign: 'end',\n                    },\n                },\n            },\n        ],\n    },\n    tooltip: {\n        showTitle: true,\n    },\n});\n\nexport default configLineChart;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './styles.module.scss';\n\nconst StopWatch = ({ start, initialValue }) => {\n    const [time, setTime] = useState(initialValue);\n    const [miliDisplay, setMiliDisplay] = useState(0);\n\n    useEffect(() => {\n        let interval = null;\n        let displayInterval = null;\n\n        if (start) {\n            interval = setInterval(() => {\n                setTime((time) => time + 10);\n            }, 10);\n\n            displayInterval = setInterval(() => {\n                setMiliDisplay((miliDisplay) => {\n                    if (miliDisplay + 10 > 1000) return 0;\n                    else return miliDisplay + 10;\n                });\n            }, 10);\n        } else {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        }\n\n        return () => {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        };\n    }, [start]);\n\n    return (\n        <div className={styles.container}>\n            <span className=\"digits\">\n                {('0' + Math.floor(time / 3600000)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 60000) % 60)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 1000) % 60)).slice(-2)}.\n            </span>\n            <span className=\"digits mili-sec\">\n                {('0' + ((miliDisplay / 10) % 100)).slice(-2)}\n            </span>\n        </div>\n    );\n};\n\nStopWatch.propTypes = {\n    start: PropTypes.bool,\n    initialValue: PropTypes.number,\n};\n\nexport default StopWatch;\n","export default __webpack_public_path__ + \"static/media/page_icon.4b388fdb.png\";","/* eslint-disable no-unreachable */\n/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n    Checkbox,\n    Typography,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { usersRef } from '../../services/firebase';\n\nimport Logo from '../../assets/images/page_icon.png';\nimport Leave_Icon from '../../assets/images/leave_icon.png';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst UserList = () => {\n    const navigate = useNavigate();\n    const [users, setUsers] = useState([]); // 全部使用者資料\n    const [filteredUser, setFilteredUser] = useState([]); // 過濾的使用者資料\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currUser, setCurrUser] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchUsers();\n        setIsDone(true);\n    };\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setUsers(users);\n        setFilteredUser(users);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredUser = users.filter((u) => u.name.includes(values.name));\n\n        searchBarRef.current.blur();\n\n        setFilteredUser(filteredUser);\n    };\n\n    const onCreateUser = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(usersRef, {\n                name: values.name,\n                idNumber: values.idNumber,\n                height: values.height,\n                weight: values.weight,\n                exerciseHeartRate: values.exerciseHeartRate,\n                exerciseResist: values.exerciseResist ?? null,\n                exerciseSpeed: values.exerciseSpeed ?? null,\n                medicine: values.medicine ?? false,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增會員！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            message.error(e?.message);\n        }\n    };\n\n    const onPatchUser = async () => {\n        try {\n            const values = await editForm.validateFields();\n\n            setLoading(true);\n            const currUserRef = doc(usersRef, currUser.id);\n            await updateDoc(currUserRef, {\n                height: values.height,\n                weight: values.weight,\n                exerciseHeartRate: values.exerciseHeartRate,\n                exerciseResist: values.exerciseResist ?? null,\n                exerciseSpeed: values.exerciseSpeed ?? null,\n                medicine: values.medicine ?? false,\n                note: values.note ?? null,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新騎乘者！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onDeleteUser = (id) => {\n        const theUser = users.find((u) => u.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除會員：${theUser.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，會員資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteUser(id),\n        });\n    };\n\n    const deleteUser = async (id) => {\n        const theUserRef = doc(usersRef, id);\n        await updateDoc(theUserRef, {\n            isDeleted: true,\n        });\n\n        await fetchUsers();\n\n        message.info('會員已刪除。');\n    };\n\n    const onViewCurrUserRecord = () => {\n        navigate(`${ROUTE_PATH.record_list}/${currUser.id}`);\n    };\n\n    const openViewModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n        setCurrUser(currUser);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n\n        editForm.setFieldsValue({\n            idNumber: currUser.idNumber,\n            name: currUser.name,\n            height: currUser.height,\n            weight: currUser.weight,\n            exerciseHeartRate: currUser.exerciseHeartRate,\n            exerciseResist: currUser.exerciseResist ?? null,\n            exerciseSpeed: currUser.exerciseSpeed ?? null,\n            medicine: currUser.medicine ?? false,\n            note: currUser.note ?? null,\n        });\n\n        setCurrUser(currUser);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const goTrainingWeekRecord = (targetUserId) => {\n        navigate(`${ROUTE_PATH.training_week_record}/${targetUserId}`);\n    };\n\n    return (\n        <div className={styles.container}>\n            <div\n                style={{\n                    background: `url(${Logo})`,\n                    width: 258,\n                    height: 56,\n                    left: 24,\n                    top: 20,\n                    position: 'absolute',\n                    backgroundSize: '100%',\n                    backgroundRepeat: 'no-repeat',\n                }}\n            />\n            <legend>醫生端</legend>\n            <div className={styles.innerContainer}>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: 84,\n                        height: 56,\n                        right: 24,\n                        top: 32,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div className={styles.cst_btn}>病歷資訊</div>\n                <input />\n                <div className={styles.horiLine} />\n                <caption>近期病例</caption>\n                <div className={styles.listWrapper}>\n                    {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].map(\n                        (e, i) => (\n                            <section key={i}>\n                                <span>2022/10/2</span>\n                                <span>王曉明</span>\n                                <span>1235</span>\n                                <span>左手中風</span>\n                                <span>復健5次</span>\n                                <div className={styles.item_btn}>詳情</div>\n                                <div className={styles.item_btn}>修改</div>\n                            </section>\n                        ),\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"管理會員資訊\"\n                        subTitle=\"會員資訊更新、訓練週數紀錄\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增會員\n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"會員姓名\" name=\"name\">\n                                    <Input\n                                        placeholder=\"輸入會員姓名查詢\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteUser,\n                            goTrainingWeekRecord,\n                        )}\n                        dataSource={filteredUser}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視騎乘者\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"會員編號\" span={3}>\n                                {currUser?.idNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"姓名\" span={3}>\n                                {currUser?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"身高\" span={3}>\n                                {currUser?.height} 公分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"體重\" span={3}>\n                                {currUser?.weight} 公斤\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動心率\" span={3}>\n                                {currUser?.exerciseHeartRate} BPM\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動阻力\" span={3}>\n                                {currUser?.exerciseResist}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動速度\" span={3}>\n                                {currUser?.exerciseSpeed}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"是否服用藥物\" span={3}>\n                                {currUser?.medicine ? '是' : '否'}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={3}>\n                                {currUser?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                        <Button\n                            type=\"primary\"\n                            onClick={onViewCurrUserRecord}\n                            style={{ marginLeft: '24px' }}\n                        >\n                            查看 {currUser?.name} 騎乘紀錄\n                        </Button>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增會員\"\n                        visible={createModalVisible}\n                        onOk={onCreateUser}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item\n                                label=\"會員編號\"\n                                name=\"idNumber\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員編號',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"會員編號為身分證字號\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"姓名\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上姓名',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"身高\"\n                                name=\"height\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員身高',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"體重\"\n                                name=\"weight\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員體重',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公斤'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動心率\"\n                                name=\"exerciseHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員運動心率',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動阻力\"\n                                name=\"exerciseResist\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動速度\"\n                                name=\"exerciseSpeed\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"medicine\"\n                                label=\"是否服用治療藥物\"\n                                valuePropName=\"checked\"\n                            >\n                                <Checkbox>\n                                    <Text type=\"secondary\">\n                                        （有服用請打勾）\n                                    </Text>\n                                </Checkbox>\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"治療藥物註記、其他需留意之處．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯會員\"\n                        visible={editModalVisible}\n                        onOk={onPatchUser}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item label=\"會員編號\">\n                                {currUser?.idNumber}\n                            </Form.Item>\n                            <Form.Item label=\"姓名\">{currUser?.name}</Form.Item>\n                            <Form.Item\n                                label=\"身高\"\n                                name=\"height\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員身高',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"體重\"\n                                name=\"weight\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員體重',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公斤'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動心率\"\n                                name=\"exerciseHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員運動心率',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動阻力\"\n                                name=\"exerciseResist\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動速度\"\n                                name=\"exerciseSpeed\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"medicine\"\n                                label=\"是否服用治療藥物\"\n                                valuePropName=\"checked\"\n                            >\n                                <Checkbox>\n                                    <Text type=\"secondary\">\n                                        （有服用請打勾）\n                                    </Text>\n                                </Checkbox>\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"治療藥物註記、其他需留意之處．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (\n    openViewModal,\n    openEditModal,\n    onDeleteUser,\n    goTrainingWeekRecord,\n) => [\n    {\n        key: 'idNumber',\n        title: '會員編號',\n        dataIndex: 'idNumber',\n        // sorter: {\n        //     compare: (a, b) => a.age - b.age,\n        // },\n        width: 200,\n        render: (idNumber) => idNumber.slice(0, 4) + '...',\n    },\n    {\n        key: 'name',\n        title: '會員姓名',\n        dataIndex: 'name',\n        width: 200,\n    },\n    {\n        key: 'medicine',\n        title: '是否服用治療藥物',\n        dataIndex: 'medicine',\n        render: (isMedicine) => (isMedicine ? '是' : '否'),\n        width: 150,\n        align: 'center',\n    },\n    {\n        key: 'note',\n        title: '備註',\n        dataIndex: 'note',\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Button type=\"link\" onClick={() => goTrainingWeekRecord(id)}>\n                    前往訓練週數紀錄\n                </Button>\n            );\n        },\n        width: 150,\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看會員資訊\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯會員資訊\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteUser(id)}\n                            >\n                                刪除會員\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 8,\n        // offset:,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nexport default UserList;\n","export default \"data:image/png;base64,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\"","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n    Badge,\n    Typography,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { difficultiesRef } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst DifficulityList = () => {\n    const navigate = useNavigate();\n    const [difficulties, setDifficulties] = useState([]); // 全部難度\n    const [filteredDiffs, setFilteredDiffs] = useState([]); // 過濾難度\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currDiff, setCurrDiff] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // 顯示各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // forms changed\n    // 監聽上限數值變化，返回三階段警示心率\n    const [createFormChange, setCreateFormChange] = useState();\n    const [editFormChange, setEditFormChange] = useState();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchDiffs();\n        setIsDone(true);\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setDifficulties(difficulties);\n        setFilteredDiffs(difficulties);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredDiffs = difficulties.filter((d) =>\n            d.name.includes(values.name),\n        );\n\n        searchBarRef.current.blur();\n\n        setFilteredDiffs(filteredDiffs);\n    };\n\n    const onCreateDiff = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(difficultiesRef, {\n                name: values.name,\n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增難度！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onPatchDiff = async () => {\n        try {\n            const values = await editForm.validateFields();\n            // if pass\n            // [values] would be: {age: 12}\n\n            setLoading(true);\n            const currUserRef = doc(difficultiesRef, currDiff.id);\n            await updateDoc(currUserRef, {\n                // 名字不更新\n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新難度！`);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    const onDeleteDiff = (id) => {\n        const theDiff = difficulties.find((d) => d.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除難度：${theDiff.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，難度資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteDiff(id),\n        });\n    };\n\n    const deleteDiff = async (id) => {\n        const theDiffRef = doc(difficultiesRef, id);\n        await updateDoc(theDiffRef, {\n            isDeleted: true,\n        });\n\n        await fetchDiffs();\n\n        message.info('難度已刪除。');\n    };\n\n    const openViewModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n        const warnHRValues = getExactThresholdValue(\n            currDiff.upperLimitHeartRate,\n        );\n\n        setCurrDiff(currDiff);\n        setWarnHRValues(warnHRValues);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n\n        editForm.setFieldsValue({\n            targetHeartRate: currDiff.targetHeartRate,\n            targetWorkoutTime: currDiff.targetWorkoutTime,\n            upperLimitHeartRate: currDiff.upperLimitHeartRate,\n            note: currDiff.note,\n        });\n\n        setCurrDiff(currDiff);\n        setEditFormChange(currDiff);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrDiff();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        setCreateFormChange();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrDiff();\n        setEditFormChange();\n        closeAllModals();\n    };\n\n    const onFormValueChange = (changedVal, allVal, formKey) => {\n        if (formKey === 'create') setCreateFormChange(allVal);\n        if (formKey === 'edit') setEditFormChange(allVal);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"訓練難度資訊列表\"\n                        subTitle=\"管理難度資訊\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增難度\n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"難度名稱\" name=\"name\">\n                                    <Input\n                                        placeholder=\"輸入難度名稱查詢\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteDiff,\n                        )}\n                        dataSource={filteredDiffs}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視難度\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"難度名稱\" span={1}>\n                                {currDiff?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標騎乘時間\" span={1}>\n                                {currDiff?.targetWorkoutTime} 分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標心率數值\" span={2}>\n                                {currDiff?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"上限心率數值\" span={2}>\n                                {currDiff?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        警示心率門檻\n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{ fontSize: '0.8em' }}\n                                        >\n                                            依據上限心率數值計算\n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={2}>\n                                {currDiff?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增難度\"\n                        visible={createModalVisible}\n                        onOk={onCreateDiff}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'create')\n                            }\n                        >\n                            <Form.Item\n                                label=\"難度名稱\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填難度名稱',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標騎乘時間\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標騎乘時間',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標心率數值\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"上限心率數值\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上限心率數值',\n                                    },\n                                ]}\n                                tooltip=\"此數值用做計算分階警示心率\"\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"需調整阻力值至多少、騎乘時的其他建議．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯難度\"\n                        visible={editModalVisible}\n                        onOk={onPatchDiff}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'edit')\n                            }\n                        >\n                            <Form.Item label=\"難度名稱\">\n                                {currDiff?.name}\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標騎乘時間\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標騎乘時間',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標心率數值\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"上限心率數值\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上限心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"需調整阻力值至多少、騎乘時的其他建議．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteDiff) => [\n    {\n        key: 'name',\n        title: '難度名稱',\n        dataIndex: 'name',\n    },\n    {\n        key: 'targetWorkoutTime',\n        title: '目標騎乘時間',\n        dataIndex: 'targetWorkoutTime',\n        sorter: {\n            compare: (a, b) => a.targetWorkoutTime - b.targetWorkoutTime,\n        },\n        width: 200,\n    },\n    {\n        key: 'targetHeartRate',\n        title: '目標心率數值',\n        dataIndex: 'targetHeartRate',\n        sorter: {\n            compare: (a, b) => a.targetHeartRate - b.targetHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'upperLimitHeartRate',\n        title: '上限心率數值',\n        dataIndex: 'upperLimitHeartRate',\n        sorter: {\n            compare: (a, b) => a.upperLimitHeartRate - b.upperLimitHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteDiff(id)}\n                            >\n                                刪除\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 6,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default DifficulityList;\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    collection,\n    doc,\n    getDoc,\n    getDocs,\n    updateDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport {\n    Layout,\n    Descriptions,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Space,\n} from 'antd';\nimport {\n    UserOutlined,\n    ExclamationCircleOutlined,\n    LineChartOutlined,\n    EditOutlined,\n    CheckOutlined,\n} from '@ant-design/icons';\nimport { StylesManager, Model } from 'survey-core';\nimport { Survey } from 'survey-react-ui';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\nimport formatWithMoment from '../../util/formatSeconds';\nimport wait from '../../util/wait';\nimport configLineChart from '../../util/configLineChart';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\n\nimport SixSurveyJson from '../../assets/surveys/sixSurvey.json';\nimport COPDSurveyJson from '../../assets/surveys/copdSurvey.json';\nimport SGRSurveyJson from '../../assets/surveys/sgrSurvey.json';\nimport BorgScaleSurveyJson from '../../assets/surveys/borgScaleSurvey.json';\nimport 'survey-core/defaultV2.css';\nStylesManager.applyTheme('defaultV2');\nconst sixSurveyJson = SixSurveyJson;\nconst copdSurveyJson = COPDSurveyJson;\nconst sgrSurveyJson = SGRSurveyJson;\nconst borgScaleSurveyJson = BorgScaleSurveyJson;\n\nconst mySurveyCss = {\n    text: {\n        controlDisabled: 'survey-input-disabled',\n    },\n    rating: {\n        selected: 'survey-rating-selected',\n    },\n};\n\nconst { Content } = Layout;\n\nconst FinishedWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [user, setUser] = useState();\n    const [record, setRecord] = useState();\n    const [packets, setPackets] = useState([]);\n    const [difficulty, setDifficulty] = useState();\n\n    const [isDone, setIsDone] = useState(false);\n\n    // doctor says...\n    const [therapist, setTherapist] = useState();\n    const [comment, setComment] = useState();\n\n    // 安全心律上線指數、心律變異指數、SPO2\n    const [safeHRIndex, setSafeHRIndex] = useState();\n    const [hrVariabilityIndex, setHRVariabilityIndex] = useState();\n    const [spo2, setSpo2] = useState();\n\n    // survey control\n    const [surveyModalVisible, setSurveyModalVisible] = useState(false);\n    const [curSurveyName, setCurSurveyName] = useState();\n    const [survey, setSurvey] = useState(new Model(sixSurveyJson));\n\n    // survey data\n    const [sixSurveyData, setSixSurveyData] = useState();\n    const [copdSurveyData, setCopdSurveyData] = useState(false);\n    const [sgrSurveyData, setSGRSurveyData] = useState(false);\n    const [borgScaleSurveyData, setBorgScaleSurveyData] = useState();\n\n    // survey UI related!!\n    survey.focusFirstQuestionAutomatic = false;\n    survey.showNavigationButtons = false;\n    survey.showCompletedPage = false;\n\n    // survey METHODS\n    const saveResults = (sender) => {\n        const results = sender.data;\n\n        console.log(sender.data);\n\n        if (curSurveyName === '六分鐘呼吸測驗') {\n            setSixSurveyData({ ...results, surveyCompleted: true });\n        }\n        if (curSurveyName === 'copd') {\n            setCopdSurveyData({ ...results, surveyCompleted: true });\n        }\n        if (curSurveyName === 'sgr') {\n            setSGRSurveyData({ ...results, surveyCompleted: true });\n            console.log(sgrSurveyData);\n        }\n        if (curSurveyName === 'borgScale') {\n            setBorgScaleSurveyData({ ...results, surveyCompleted: true });\n        }\n    };\n    survey.onComplete.add(saveResults);\n\n    const openSurveyModal = (surveyName) => {\n        if (surveyName === '六分鐘呼吸測驗') {\n            let survey = new Model(sixSurveyJson);\n\n            // 1. 填入表單預設值\n            // 2. 檢視問卷模式\n            // *** TODO: // 之後改成:\n            // ***       // 最後成績送出前 都可以進行問卷的修改\n            // ***       // 並加上提示: 送出後，問卷答案便無法修改的字樣\n            if (sixSurveyData) {\n                survey.data = sixSurveyData;\n                // survey.mode = 'display'; // 這個打開後，僅供檢視\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'copd') {\n            let survey = new Model(copdSurveyJson);\n\n            if (copdSurveyData) {\n                survey.data = copdSurveyData;\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'sgr') {\n            let survey = new Model(sgrSurveyJson);\n\n            if (sgrSurveyData) {\n                survey.data = sgrSurveyData;\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'borgScale') {\n            let survey = new Model(borgScaleSurveyJson);\n\n            if (borgScaleSurveyData) {\n                survey.data = borgScaleSurveyData;\n            }\n            setSurvey(survey);\n        }\n\n        setCurSurveyName(surveyName);\n        setSurveyModalVisible(true);\n    };\n\n    const onOKSurvey = async () => {\n        let error = survey.hasErrors();\n        if (error) {\n            return;\n        }\n        survey.doComplete();\n        setSurveyModalVisible(false);\n    };\n\n    const onCancelSurvey = () => {\n        setSurveyModalVisible(false);\n    };\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        // record\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        if (\n            recordData.pairId != null ||\n            recordData.finishedWorkoutTime == null\n        ) {\n            alert('此筆紀錄尚未完成，將自動導回首頁！');\n            navigate(ROUTE_PATH.admin_dashbaord);\n            return;\n        }\n        const record = {\n            ...recordData,\n            beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n            finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n        };\n\n        // packets\n        const packets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            packets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        packets.sort((a, b) => a.time - b.time);\n        packets.splice(0, 1);\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        // therapist & comment\n        const therapist = record.therapist ?? '';\n        const comment = record.comment ?? '';\n\n        setUser(user);\n        setRecord(record);\n        setPackets(packets);\n        setDifficulty(difficulty);\n        setTherapist(therapist);\n        setComment(comment);\n        setIsDone(true);\n\n        console.log(user);\n        // 初始化 填入問卷基本資料\n        setSixSurveyData({\n            question2: user?.name,\n            question3: user?.idNumber,\n            question5: moment(record?.beginWorkoutTime).format('L'),\n            question9: user?.height + ' cm',\n            question10: user?.weight + ' kg',\n        });\n        setSGRSurveyData({\n            question1: {\n                text1: user?.idNumber,\n                text2: `${difficulty?.name} \\n (目標${difficulty?.targetHeartRate}BPM／${difficulty?.targetWorkoutTime}分)`,\n            },\n            question2: moment(record?.beginWorkoutTime).format('L'),\n        });\n        setBorgScaleSurveyData({\n            question2: `${difficulty?.name} \\n (目標${difficulty?.targetHeartRate}BPM／${difficulty?.targetWorkoutTime}分)`,\n        });\n    };\n\n    // 初始化 填入問卷基本資料\n    // const initSurveyData = () => {\n    //     console.log(record);\n    //     console.log(user);\n    //     console.log(difficulty);\n    //     setSixSurveyData({\n    //         question2: user?.name,\n    //         question3: user?.idNumber,\n    //         question5: moment(record?.beginWorkoutTime).format('L'),\n    //     });\n    //     setSGRSurveyData({\n    //         question1: {\n    //             text1: user?.idNumber,\n    //             text2: `${difficulty?.name}\\n(目標心率：${difficulty?.targetHeartRate}／目標騎乘時間：${difficulty?.targetWorkoutTime})`,\n    //         },\n    //         question2: moment(record?.beginWorkoutTime).format('L'),\n    //     });\n    // };\n\n    const onFormSubmit = async (e) => {\n        e.preventDefault();\n        if (_.isEmpty(therapist)) {\n            message.error('請填上治療師名稱');\n            return;\n        }\n\n        if (_.isEmpty(safeHRIndex)) {\n            message.error('請填上安全心律上線指數');\n            return;\n        }\n\n        if (_.isEmpty(hrVariabilityIndex)) {\n            message.error('請填上心律變異指數');\n            return;\n        }\n\n        if (_.isEmpty(spo2)) {\n            message.error('SPO2');\n            return;\n        }\n\n        if (\n            !(\n                sixSurveyData?.surveyCompleted &&\n                copdSurveyData?.surveyCompleted &&\n                sgrSurveyData?.surveyCompleted &&\n                borgScaleSurveyData?.surveyCompleted\n            )\n        ) {\n            message.error('尚有問卷未完成');\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將提交！',\n            icon: <ExclamationCircleOutlined />,\n            content: '確定資料填寫無誤？',\n            onOk: () => updateTherapistInfo(),\n        });\n    };\n\n    const updateTherapistInfo = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            therapist: therapist,\n            safeHRIndex: safeHRIndex,\n            hrVariabilityIndex: hrVariabilityIndex,\n            spo2: spo2,\n            comment: comment,\n            sixSurvey: sixSurveyData,\n            borgScaleSurvey: borgScaleSurveyData,\n            sgrSurvey: sgrSurveyData,\n            copdSurvey: copdSurveyData,\n        });\n\n        message.success({ content: '已提交！自動跳轉至選單畫面' });\n\n        await wait(1000);\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    const calWorkoutTime = () => {\n        const begin = moment(record.beginWorkoutTime);\n        const end = moment(record.finishedWorkoutTime);\n\n        const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n        console.log(diff);\n\n        const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n        const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n        const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n        let returnStr = '';\n\n        if (h != '00') returnStr += `${h} 小時 `;\n        returnStr += `${m} 分 ${s} 秒`;\n\n        return returnStr;\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"紀錄資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"已結束騎乘，本次騎乘數據統計\"\n                        subTitle=\"請至下方填寫資訊\"\n                    />\n\n                    <Descriptions bordered className={styles.descriptions}>\n                        <Descriptions.Item label=\"騎乘者姓名\" span={2}>\n                            {user?.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"騎乘者身體年齡\">\n                            {user?.age}\n                        </Descriptions.Item>\n\n                        <Descriptions.Item\n                            label={\n                                <div>\n                                    實際騎乘時間\n                                    <br />/ 目標騎乘時間\n                                </div>\n                            }\n                        >\n                            {calWorkoutTime()}／{difficulty.targetWorkoutTime}{' '}\n                            分\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"開始騎乘時間\">\n                            {record.beginWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"結束騎乘時間\">\n                            {record.finishedWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"平均速率／平均心率\">\n                            20 BPM／30 RPM\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"運動強度\">\n                            23 WATTS\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"累積入熱量消耗\">\n                            12 CAL\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"騎乘關卡\">\n                            {difficulty.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"目標心率\">\n                            {difficulty.targetHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"上限心率\">\n                            {difficulty.upperLimitHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"RPM＆心率統計圖\">\n                            <LineChart\n                                {...configLineChart(\n                                    packets,\n                                    record.targetHeartRate,\n                                )}\n                            />\n                        </Descriptions.Item>\n                    </Descriptions>\n\n                    <div className={styles.form}>\n                        <h3>請完成以下評估問卷</h3>\n                        <Space>\n                            <Button\n                                onClick={() =>\n                                    openSurveyModal('六分鐘呼吸測驗')\n                                }\n                                type=\"primary\"\n                                icon={\n                                    sixSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 六分鐘呼吸測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('copd')}\n                                type=\"primary\"\n                                icon={\n                                    copdSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 COPD 測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('sgr')}\n                                type=\"primary\"\n                                icon={\n                                    sgrSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 SGR 測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('borgScale')}\n                                type=\"primary\"\n                                icon={\n                                    borgScaleSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 Borg Scale 測驗\n                            </Button>\n                        </Space>\n                    </div>\n                    <div className={styles.form}>\n                        <h3>請填寫以下資料，方可返回主選單</h3>\n\n                        <Input\n                            size=\"large\"\n                            placeholder=\"物理治療師名稱\"\n                            prefix={<UserOutlined />}\n                            value={therapist}\n                            onChange={(e) => {\n                                setTherapist(e.target.value);\n                            }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"SPO2\"\n                            prefix={<EditOutlined />}\n                            value={spo2}\n                            onChange={(e) => {\n                                setSpo2(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"安全心律上線指數\"\n                            prefix={<LineChartOutlined />}\n                            value={safeHRIndex}\n                            onChange={(e) => {\n                                setSafeHRIndex(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"心律變異指數\"\n                            prefix={<LineChartOutlined />}\n                            value={hrVariabilityIndex}\n                            onChange={(e) => {\n                                setHRVariabilityIndex(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n\n                        <Input.TextArea\n                            showCount\n                            placeholder=\"治療結果評語\"\n                            maxLength={50}\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            style={{ marginTop: 16 }}\n                        />\n\n                        <Button\n                            onClick={onFormSubmit}\n                            type=\"primary\"\n                            style={{ marginTop: 16 }}\n                        >\n                            提交，返回主選單\n                        </Button>\n                    </div>\n                </div>\n                <Modal\n                    width={'70vw'}\n                    className=\"surveyModalStyle\" // 如果要覆寫 style 要這樣做\n                    visible={surveyModalVisible}\n                    onOk={onOKSurvey}\n                    onCancel={onCancelSurvey}\n                    destroyOnClose\n                    okText=\"送出儲存\"\n                >\n                    <Survey\n                        id=\"surveyContainer\"\n                        model={survey}\n                        css={mySurveyCss}\n                    />\n                </Modal>\n            </Content>\n        </Layout>\n    );\n};\n\nexport default FinishedWorkout;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { getDocs, collection, query, where } from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Button,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Descriptions,\n    Select,\n    Space,\n} from 'antd';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport {\n    SearchOutlined,\n    CrownOutlined,\n    CheckOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\nimport { StylesManager, Model } from 'survey-core';\nimport { Survey } from 'survey-react-ui';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nimport SixSurveyJson from '../../assets/surveys/sixSurvey.json';\nimport COPDSurveyJson from '../../assets/surveys/copdSurvey.json';\nimport SGRSurveyJson from '../../assets/surveys/sgrSurvey.json';\nimport BorgScaleSurveyJson from '../../assets/surveys/borgScaleSurvey.json';\nimport 'survey-core/defaultV2.css';\nStylesManager.applyTheme('defaultV2');\nconst sixSurveyJson = SixSurveyJson;\nconst copdSurveyJson = COPDSurveyJson;\nconst sgrSurveyJson = SGRSurveyJson;\nconst borgScaleSurveyJson = BorgScaleSurveyJson;\n\nconst mySurveyCss = {\n    text: {\n        controlDisabled: 'survey-input-disabled',\n    },\n    rating: {\n        selected: 'survey-rating-selected',\n    },\n};\n\nconst { Content } = Layout;\nconst { Option } = Select;\n\nconst RecordList = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n    const [loading, setLoading] = useState(false); // 等待抓取 packets 資料\n\n    const [records, setReocrds] = useState([]);\n    const [filteredRecords, setFilteredReocrds] = useState([]);\n    const [currRecord, setCurrRecord] = useState();\n    const [currReocrdPackets, setCurrRecordPackets] = useState();\n\n    // patched Data\n    const [users, setUsers] = useState(); // 把使用者資料灌回去 records 中\n    const [difficulties, setDifficulties] = useState([]); // 把難度資料灌回去 records 中\n\n    // forms\n    const [searchForm] = Form.useForm();\n\n    // modals\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n\n    // survey control\n    const [surveyModalVisible, setSurveyModalVisible] = useState(false);\n    const [curSurveyName, setCurSurveyName] = useState();\n    const [survey, setSurvey] = useState(new Model(sixSurveyJson));\n\n    // survey UI related!!\n    survey.focusFirstQuestionAutomatic = false;\n    survey.showNavigationButtons = false;\n    survey.showCompletedPage = false;\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const records = await fetchRecords();\n        const difficulties = await fetchDiffs();\n\n        patchRecordsWithUserAndDiff({ users, records, difficulties });\n    };\n\n    const fetchUsers = async () => {\n        const users = [];\n        const querySnapshot = await getDocs(usersRef);\n        querySnapshot.forEach((doc) => {\n            if (!doc.data()?.isDeleted) {\n                users.push({\n                    ...doc.data(),\n                    id: doc.id,\n                });\n            }\n        });\n\n        return users;\n    };\n\n    const fetchRecords = async () => {\n        const records = [];\n        const querySnapshot = await getDocs(recordsRef);\n        querySnapshot.forEach((doc) => {\n            const recordData = doc.data();\n            if (\n                recordData.beginWorkoutTime != null &&\n                recordData.finishedWorkoutTime != null\n            ) {\n                records.push({\n                    ...recordData,\n                    id: doc.id,\n                    beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n                    finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n                });\n            }\n        });\n\n        records.sort(\n            (a, b) =>\n                b.finishedWorkoutTime.getTime() -\n                a.finishedWorkoutTime.getTime(),\n        );\n\n        return records;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const patchRecordsWithUserAndDiff = ({ users, records, difficulties }) => {\n        // patch with key [userData]\n        // patch with key [difficultyData]\n\n        const patchedRecords = records.map((record) => {\n            const userData = users.find((u) => u.id === record.user);\n            const difficultyData = difficulties.find(\n                (d) => d.id === record.difficulty,\n            );\n\n            return {\n                ...record,\n                userData,\n                difficultyData,\n            };\n        });\n\n        setReocrds(patchedRecords);\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n\n        if (params.userId !== '123') {\n            const filteredRecords = patchedRecords.filter(\n                (r) => r.user === params.userId,\n            );\n            setFilteredReocrds(filteredRecords);\n            searchForm.setFieldsValue({ user: params.userId });\n        } else {\n            setFilteredReocrds(patchedRecords);\n        }\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n\n        let filteredRecords = records.filter((r) => {\n            if (_.isEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return true;\n            }\n            if (_.isNotEmpty(values.user) && _.isNotEmpty(values.difficulty)) {\n                return (\n                    r.user === values.user && r.difficulty === values.difficulty\n                );\n            }\n            if (_.isNotEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return r.user === values.user;\n            }\n            if (_.isNotEmpty(values.difficulty) && _.isEmpty(values.user)) {\n                console.log('here');\n                return r.difficulty === values.difficulty;\n            }\n        });\n\n        setFilteredReocrds(filteredRecords);\n    };\n\n    const openViewModal = async (id) => {\n        setViewModalVisible(true);\n        setLoading(true);\n\n        const currRecord = records.find((r) => r.id === id);\n        const packetsRef = collection(recordsRef, id, 'packets');\n\n        // packets\n        const currReocrdPackets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            currReocrdPackets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        currReocrdPackets.sort((a, b) => a.time - b.time);\n        currReocrdPackets.splice(0, 1);\n\n        setCurrRecord(currRecord);\n        setCurrRecordPackets(currReocrdPackets);\n\n        setLoading(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrRecord();\n        setCurrRecordPackets([]);\n        setViewModalVisible(false);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const openSurveyModal = (surveyName) => {\n        if (surveyName === '六分鐘呼吸測驗') {\n            let survey = new Model(sixSurveyJson);\n\n            survey.data = currRecord.sixSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'copd') {\n            let survey = new Model(copdSurveyJson);\n\n            survey.data = currRecord.copdSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'sgr') {\n            let survey = new Model(sgrSurveyJson);\n\n            survey.data = currRecord.sgrSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'borgScale') {\n            let survey = new Model(borgScaleSurveyJson);\n\n            survey.data = currRecord.borgScaleSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n\n        setCurSurveyName(surveyName);\n        setSurveyModalVisible(true);\n    };\n\n    const onCancelSurvey = () => {\n        setSurveyModalVisible(false);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"騎乘紀錄列表\"\n                        subTitle=\"查看騎乘紀錄資訊\"\n                        onBack={goDashboard}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={10}>\n                                <Form.Item label=\"騎乘者名稱\" name=\"user\">\n                                    <Select placeholder=\"選擇騎乘者\" allowClear>\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={10}>\n                                <Form.Item label=\"騎乘關卡\" name=\"difficulty\">\n                                    <Select\n                                        placeholder=\"選擇關卡資訊\"\n                                        allowClear\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}・\n                                                {diff.targetWorkoutTime}{' '}\n                                                分鐘・目標{' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(openViewModal)}\n                        dataSource={filteredRecords}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視紀錄\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={'90vw'}\n                    >\n                        {loading ? (\n                            '資料讀取中...'\n                        ) : (\n                            <>\n                                <Descriptions\n                                    bordered\n                                    className={styles.descriptions}\n                                >\n                                    <Descriptions.Item\n                                        label=\"騎乘者姓名\"\n                                        span={2}\n                                    >\n                                        {currRecord?.userData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"騎乘者會員編號\"\n                                        span={2}\n                                    >\n                                        {currRecord?.userData?.idNumber}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label={\n                                            <div>\n                                                實際騎乘時間\n                                                <br />/ 目標騎乘時間\n                                            </div>\n                                        }\n                                    >\n                                        {calWorkoutTime(currRecord)}／\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetWorkoutTime\n                                        }{' '}\n                                        分\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"開始騎乘時間\">\n                                        {currRecord?.beginWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"結束騎乘時間\">\n                                        {currRecord?.finishedWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"平均速率／平均心率\">\n                                        20 BPM／30 RPM\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"運動強度\">\n                                        23 WATTS\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"累積入熱量消耗\">\n                                        12 CAL\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"騎乘關卡\">\n                                        {currRecord?.difficultyData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"目標心率\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"上限心率\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.upperLimitHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"RPM＆心率統計圖\"\n                                        span={3}\n                                    >\n                                        <LineChart\n                                            {...configLineChart(\n                                                currReocrdPackets,\n                                                currRecord?.targetHeartRate,\n                                            )}\n                                        />\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"物理治療師名稱\"\n                                        span={3}\n                                    >\n                                        {currRecord?.therapist}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"安全心律上線指數\"\n                                        span={3}\n                                    >\n                                        {currRecord?.safeHRIndex}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"心律變異指數\"\n                                        span={3}\n                                    >\n                                        {currRecord?.hrVariabilityIndex}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"治療結果評語\"\n                                        span={3}\n                                    >\n                                        {currRecord?.comment}\n                                    </Descriptions.Item>\n                                </Descriptions>\n                                <Space style={{ marginLeft: '24px' }}>\n                                    <Button\n                                        onClick={() =>\n                                            openSurveyModal('六分鐘呼吸測驗')\n                                        }\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 六分鐘呼吸測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() => openSurveyModal('copd')}\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 COPD 測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() => openSurveyModal('sgr')}\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 SGR 測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() =>\n                                            openSurveyModal('borgScale')\n                                        }\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 Borg Scale 測驗結果\n                                    </Button>\n                                </Space>\n                            </>\n                        )}\n                    </Modal>\n                    <Modal\n                        width={'70vw'}\n                        className=\"surveyModalStyle\" // 如果要覆寫 style 要這樣做\n                        visible={surveyModalVisible}\n                        footer={null} // no [Ok], [Cancel] button\n                        destroyOnClose\n                        onCancel={onCancelSurvey}\n                    >\n                        <Survey\n                            id=\"surveyContainer\"\n                            model={survey}\n                            css={mySurveyCss}\n                        />\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal) => [\n    {\n        key: 'id',\n        title: '紀錄ID',\n        dataIndex: 'id',\n        width: 100,\n        render: (id) => `${id.slice(0, 5)}....`,\n    },\n    {\n        key: 'isGT30',\n        title: '長途騎乘',\n        width: 100,\n        render: (currRecord) => {\n            if (isWorkoutTimeGT30(currRecord)) {\n                return (\n                    <CrownOutlined\n                        style={{\n                            fontSize: '1.5em',\n                            color: '#fb8b24',\n                        }}\n                    />\n                );\n            } else {\n                return ' ';\n            }\n        },\n        align: 'center',\n    },\n    {\n        key: 'userData',\n        title: '騎乘者姓名',\n        dataIndex: 'userData',\n        width: 200,\n        render: (userData) => userData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '騎乘關卡',\n        dataIndex: 'difficultyData',\n        width: 200,\n        render: (difficultyData) => difficultyData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '騎乘開始時間',\n        dataIndex: 'beginWorkoutTime',\n        width: 200,\n        render: (beginWorkoutTime) => beginWorkoutTime.toLocaleString(),\n    },\n    {\n        key: 'beginWorkoutTime',\n        title: '騎乘時間',\n        width: 200,\n        render: (currRecord) => calWorkoutTime(currRecord),\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => (\n            <Button type=\"link\" onClick={() => openViewModal(id)}>\n                查看\n            </Button>\n        ),\n        width: 150,\n    },\n];\n\nconst calWorkoutTime = (currRecord) => {\n    if (_.isEmpty(currRecord)) {\n        return;\n    }\n    const begin = moment(currRecord?.beginWorkoutTime);\n    const end = moment(currRecord?.finishedWorkoutTime);\n\n    const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n    const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n    const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n    const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n    let returnStr = '';\n\n    if (h != '00') returnStr += `${h} 小時 `;\n    returnStr += `${m} 分 ${s} 秒`;\n\n    return returnStr;\n};\n\nconst isWorkoutTimeGT30 = (currRecord) => {\n    if (_.isEmpty(currRecord)) {\n        return;\n    }\n    const begin = moment(currRecord?.beginWorkoutTime);\n    const end = moment(currRecord?.finishedWorkoutTime);\n\n    const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n    const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2); // 分\n\n    return parseInt(m) >= 30;\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nexport default RecordList;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    getDoc,\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n    collection,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Table,\n    Space,\n    Descriptions,\n    Popover,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport styles from './styles.module.scss';\n\nimport { usersRef } from '../../services/firebase';\n\nconst { Content } = Layout;\n\nconst TrainingWeekRecord = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n    const [user, setUser] = useState(); // 該會員資料\n    const [records, setRecords] = useState([]); // 該會員全部的訓練週數資料\n    const [isDone, setIsDone] = useState(false);\n\n    const [currRecord, setCurrRecord] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // forms\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchUser();\n        await fetchRecords();\n        setIsDone(true);\n    };\n\n    const fetchUser = async () => {\n        const userPath = doc(usersRef, params.userId);\n\n        const userSnapshot = await getDoc(userPath);\n        const user = userSnapshot.data();\n\n        setUser(user);\n    };\n\n    const fetchRecords = async () => {\n        const recordsPath = collection(\n            usersRef,\n            params.userId,\n            'trainingWeekRecords',\n        );\n        const q = query(recordsPath, where('isDeleted', '!=', true));\n\n        const records = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            records.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        console.log(records);\n\n        setRecords(records);\n    };\n\n    const onCreateUser = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            console.log(values);\n\n            setLoading(true);\n            const recordsPath = collection(\n                usersRef,\n                params.userId,\n                'trainingWeekRecords',\n            );\n            await addDoc(recordsPath, {\n                weekNumber: values.weekNumber,\n                content: values.content,\n                isDeleted: false,\n            });\n\n            await fetchRecords();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增週次紀錄！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            message.error(e?.message);\n        }\n    };\n\n    const onPatchRecord = async () => {\n        try {\n            const values = await editForm.validateFields();\n\n            setLoading(true);\n            const currRecordPath = doc(\n                usersRef,\n                params.userId,\n                'trainingWeekRecords',\n                currRecord.id,\n            );\n            await updateDoc(currRecordPath, {\n                content: values.content,\n            });\n\n            await fetchRecords();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新騎乘者！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onDeleteRecord = (id) => {\n        const theRecord = records.find((u) => u.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除週次：${theRecord.weekNumber}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，週次訓練資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteRecord(id),\n        });\n    };\n\n    const deleteRecord = async (id) => {\n        const currRecordPath = doc(\n            usersRef,\n            params.userId,\n            'trainingWeekRecords',\n            id,\n        );\n        await updateDoc(currRecordPath, {\n            isDeleted: true,\n        });\n\n        await fetchRecords();\n\n        message.info('週次紀錄已刪除。');\n    };\n\n    const openViewModal = (id) => {\n        const currRecord = records.find((u) => u.id === id);\n        setCurrRecord(currRecord);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currRecord = records.find((u) => u.id === id);\n\n        editForm.setFieldsValue({\n            weekNumber: currRecord.weekNumber,\n            content: currRecord.content,\n        });\n\n        setCurrRecord(currRecord);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrRecord();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrRecord();\n        closeAllModals();\n    };\n\n    const goBack = () => {\n        navigate(-1);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title={`${user.name}的訓練週數紀錄`}\n                        // subTitle={`管理${user.name}的訓練週數紀錄`}\n                        onBack={goBack}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增訓練週次紀錄\n                            </Button>,\n                        ]}\n                    />\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteRecord,\n                        )}\n                        dataSource={records}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視週次紀錄\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width=\"70vw\"\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"週次\" span={3}>\n                                {currRecord?.weekNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"紀錄內容\" span={3}>\n                                {currRecord?.content}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增週次紀錄\"\n                        visible={createModalVisible}\n                        onOk={onCreateUser}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                        width=\"70vw\"\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item\n                                label=\"週次\"\n                                name=\"weekNumber\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上週次',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"輸入第幾週\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"紀錄內容\"\n                                name=\"content\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填寫紀錄內容',\n                                    },\n                                ]}\n                            >\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"訓練情形、特殊狀況等等．．．\"\n                                    maxLength={300}\n                                    autoSize={{ minRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯週次紀錄\"\n                        visible={editModalVisible}\n                        onOk={onPatchRecord}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                        width=\"70vw\"\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item label=\"週數\">\n                                {currRecord?.weekNumber}\n                            </Form.Item>\n                            <Form.Item label=\"紀錄內容\" name=\"content\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"訓練情形、特殊狀況等等．．．\"\n                                    maxLength={300}\n                                    autoSize={{ minRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteUser) => [\n    {\n        key: 'weekNumber',\n        title: '週次',\n        dataIndex: 'weekNumber',\n        width: 200,\n    },\n    {\n        key: 'content',\n        title: '紀錄內容',\n        dataIndex: 'content',\n        render: (content) => {\n            if (content.length > 100) {\n                return content.slice(0, 97) + '...';\n            }\n            return content;\n        },\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看週次紀錄\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯週次紀錄\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteUser(id)}\n                            >\n                                刪除週次紀錄\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 7,\n        // offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default TrainingWeekRecord;\n","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { ROUTE_PATH, ROLES } from '../constants/';\n\nimport ProtectedRoutes from './ProtectedRoutes';\nimport SignIn from '../layouts/SignIn';\nimport AdminDashboard from '../layouts/AdminDashboard';\nimport Missing from '../layouts/Missing';\nimport Unauthorized from '../layouts/Unauthorized';\nimport PrepareWorkout from '../layouts/PrepareWorkout';\nimport MonitoringWorkout from '../layouts/MonitoringWorkout';\nimport UserList from '../layouts/UserList';\nimport DifficulityList from '../layouts/DifficulityList';\nimport FinishedWorkout from '../layouts/FinishedWorkout';\nimport RecordList from '../layouts/RecordList';\nimport TrainingWeekRecord from '../layouts/TrainingWeekRecord';\n\nconst AppRoutes = () => {\n    return (\n        <Routes>\n            <Route\n                path={ROUTE_PATH.home}\n                element={<Navigate replace to={ROUTE_PATH.sign_in} />}\n            />\n            <Route path={ROUTE_PATH.sign_in} element={<SignIn />} />\n            <Route path={ROUTE_PATH.unauthorized} element={<Unauthorized />} />\n\n            {/* only Admin can visit */}\n            <Route element={<ProtectedRoutes allowedRoles={[ROLES.Admin]} />}>\n                <Route\n                    path={ROUTE_PATH.admin_dashbaord}\n                    element={<AdminDashboard />}\n                />\n                <Route\n                    path={ROUTE_PATH.prepare_workout}\n                    element={<PrepareWorkout />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.monitoring_workout}/:recordId`}\n                    element={<MonitoringWorkout />}\n                />\n                <Route path={ROUTE_PATH.user_list} element={<UserList />} />\n                <Route\n                    path={`${ROUTE_PATH.record_list}/:userId`}\n                    element={<RecordList />}\n                />\n                <Route\n                    path={ROUTE_PATH.difficulty_list}\n                    element={<DifficulityList />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.finsished_workout}/:recordId`}\n                    element={<FinishedWorkout />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.training_week_record}/:userId`}\n                    element={<TrainingWeekRecord />}\n                />\n            </Route>\n\n            {/* catch all */}\n            <Route path=\"*\" element={<Missing />} />\n        </Routes>\n    );\n};\n\nexport default AppRoutes;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport { ConfigProvider } from 'antd';\nimport 'moment/locale/zh-tw';\nimport locale from 'antd/lib/locale/zh_TW';\nimport React, { useEffect, useState } from 'react';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport _ from '../../util/helper';\n// import moment from 'moment';\n\n// import styles from './styles.module.scss';\nimport 'antd/dist/antd.css';\nimport '@ant-design/flowchart/dist/index.css';\n\n/*\n    expect: \n        ConfigProvider\n*/\n\nconst AppProvider = ({ children }) => {\n    const { dispatch } = useStore();\n    const [initializedDone, setInitializedDone] = useState(false);\n\n    useEffect(() => {\n        attempLogin();\n\n        // window.addEventListener('beforeunload', beforeunloadListener);\n        // window.addEventListener('visibilitychange', visibilitychangeListener);\n        // return () => {\n        //     window.removeEventListener(\n        //         'beforeunload',\n        //         visibilitychangeListener,\n        //     );\n        // };\n    }, []);\n\n    const beforeunloadListener = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: SET_AUTH,\n            payload: {\n                isValid: false,\n                roles: [],\n            },\n        });\n    };\n\n    const visibilitychangeListener = (e) => {\n        if (document.visibilityState == 'hidden') {\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: false,\n                    roles: [],\n                },\n            });\n        }\n    };\n\n    const attempLogin = () => {\n        // console.log('executing attemp login');\n        // const expiredIn = window.localStorage.getItem(\n        //     'inventory-system-expired-in',\n        // );\n        setInitializedDone(true);\n\n        // Example Down Below\n        // if (_.isNullOrUndefined(expiredIn)) {\n        //     setInitializedDone(true);\n        //     return;\n        // }\n        // if (moment(expiredIn).endOf('day').isSameOrAfter(moment())) {\n        //     dispatch({\n        //         type: SET_AUTH,\n        //         payload: {\n        //             isValid: true,\n        //             roles: [5051],\n        //         },\n        //     });\n        // }\n        // setInitializedDone(true);\n    };\n\n    if (!initializedDone) {\n        return null;\n    }\n\n    return <ConfigProvider locale={locale}>{children}</ConfigProvider>;\n};\n\nexport default AppProvider;\n\n// Example Down Below\n\n// /* eslint-disable react/prop-types */\n// import React from 'react';\n// import { ConfigProvider } from 'antd';\n// import 'moment/locale/zh-tw';\n// import locale from 'antd/lib/locale/zh_TW';\n\n// // import styles from './styles.module.scss';\n\n// const App = ({ children }) => (\n//     <ConfigProvider locale={locale}>{children}</ConfigProvider>\n// );\n\n// export default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './global.scss';\n\nimport { StoreProvider } from './store';\nimport AppRoutes from './routes';\nimport AppProvider from './layouts/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <StoreProvider>\n            <BrowserRouter>\n                <AppProvider>\n                    {/* <Routes>\n                        <Route path=\"*\" element={<AppRoutes />} />\n                    </Routes> */}\n                    <AppRoutes />\n                </AppProvider>\n            </BrowserRouter>\n        </StoreProvider>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2O6lW\",\"glass\":\"styles_glass__3MZ6q\",\"col\":\"styles_col__3dx1b\",\"mainCol\":\"styles_mainCol__2K9mE\",\"col1\":\"styles_col1__1e9Hq\",\"col2\":\"styles_col2__2sM5V\",\"col3\":\"styles_col3__ZFdLr\",\"unit\":\"styles_unit__2gnSy\",\"stopWatchWrapper\":\"styles_stopWatchWrapper__YtDaA\",\"difficulty\":\"styles_difficulty__27-NT\"};"],"sourceRoot":""}