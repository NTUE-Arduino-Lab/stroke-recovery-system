{"version":3,"sources":["layouts/UserList/styles.module.scss","layouts/AdminDashboard/styles.module.scss","layouts/Game1Direct/styles.module.scss","layouts/Game2Direct/styles.module.scss","layouts/Game3Direct/styles.module.scss","layouts/Game1Moni/styles.module.scss","layouts/Game2Moni/styles.module.scss","layouts/FinishedWorkout/styles.module.scss","layouts/DifficulityList/styles.module.scss","layouts/RecordList/styles.module.scss","layouts/TrainingWeekRecord/styles.module.scss","components/CustomModal/styles.module.scss","layouts/SignIn/styles.module.scss","components/Header/styles.module.scss","layouts/Missing/styles.module.scss","layouts/Unauthorized/styles.module.scss","store/actions.js","constants/path.js","constants/roles.js","constants/warn.js","store/index.js","routes/ProtectedRoutes.js","services/firebase.js","layouts/SignIn/index.js","assets/images/dashboard_icon.png","layouts/AdminDashboard/index.js","assets/images/right-arrow.png","components/Header/index.js","layouts/Missing/index.js","layouts/Unauthorized/index.js","util/helper.js","assets/images/leave_icon.png","assets/images/page_icon.png","components/CustomModal/index.js","assets/images/modal_close.png","util/wait.js","layouts/PrepareWorkout/index.js","layouts/MonitoringWorkout/index.js","util/formatSeconds.js","util/configLineChart.js","components/StopWatch/index.js","layouts/UserList/index.js","layouts/DifficulityList/index.js","layouts/FinishedWorkout/index.js","layouts/RecordList/index.js","layouts/TrainingWeekRecord/index.js","layouts/PersonnelInfo/index.js","assets/images/game_dir_leave.png","assets/images/game_dir_home.png","assets/images/game1_dir_img.png","layouts/Game1Direct/index.js","assets/images/game2_dir_img.png","layouts/Game2Direct/index.js","assets/images/game3_dir_img.png","layouts/Game3Direct/index.js","components/ShapeCircle/index.js","layouts/Game1Moni/index.js","components/ShapeHexagon/index.js","components/ShapeSquare/index.js","components/ShapeTriangle/index.js","components/ShapeRectangle/index.js","layouts/Game2Moni/index.js","routes/index.js","layouts/App/index.js","index.js","layouts/PersonnelInfo/styles.module.scss","layouts/MonitoringWorkout/styles.module.scss","layouts/PrepareWorkout/styles.module.scss"],"names":["module","exports","SET_AUTH","ROUTE_PATH","home","sign_in","unauthorized","admin_dashbaord","prepare_workout","monitoring_workout","user_list","difficulty_list","record_list","finsished_workout","training_week_record","personnel_info","game1_direct","game2_direct","game3_direct","game1_monitoring","game2_monitoring","game3_monitoring","ROLES","WARN","WARN_THRESHOLD","StoreContext","createContext","initialState","auth","isValid","roles","Admin","reducer","state","action","type","payload","StoreProvider","children","useReducer","value","dispatch","Provider","useStore","useContext","ProtectedRoutes","allowedRoles","find","role","includes","replace","to","app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","getAuth","usersRef","collection","recordsRef","difficultiesRef","validateInputPairId","pairId","a","q","query","where","getDocs","querySnapshot","empty","size","forEach","doc","record","data","recordId","id","finishedWorkoutTime","Content","Layout","Title","Typography","formLayout","labelCol","span","wrapperCol","tailLayout","offset","SignIn","navigate","useNavigate","Form","useForm","form","useState","loading","setLoading","login","validateFields","values","console","log","signInWithEmailAndPassword","email","password","userCredential","user","goDashboard","message","error","className","style","padding","styles","container","layout","autoComplete","Item","label","colon","marginBottom","level","name","rules","required","placeholder","Password","htmlType","onClick","TileWithIconAndAction","icon","tile","addOn","backgroundImage","tileIcon","tileLabel","AdminDashboard","goUserList","goPrepareWorkout","background","Logo","width","height","backgroundSize","backgroundRepeat","cst_btn","display","TeamOutlined","SlidersOutlined","ProfileOutlined","RocketOutlined","Header","Missing","Unauthorized","helper","object","defaults","_","list","iteratee","context","Set","Array","from","index","array","call","each","map","obj","mapObject","memo","reduce","every","some","predicate","result","Map","entries","entry","key","findIndex","filter","this","length","max","min","any","isArray","n","isEmpty","first","last","has","b","test","File","i","Math","JSON","stringify","isNullOrUndefined","isString","isPrimitive","Object","isBoolean","isNumber","isFunction","isDate","isNull","isUndefined","undefined","isExisted","isNotExisted","isObject","Number","isInteger","isFinite","isNaN","isFile","json","parse","e","proto","getPrototypeOf","prototype","React","isValidElement","Modal","open","onClose","overlayColour","overlay","backgroundColor","stopPropagation","modalContainer","right","top","position","wait","ms","Promise","resolve","setTimeout","Statistic","Countdown","Select","Option","Text","yodelBuffer","yodelBuffer2","yodelBuffer3","yodelBuffer4","yodelBuffer5","unsubscribe","PrepareWorkout","setUsers","setDifficulties","setIsDone","isPairing","setIsPairing","targetgetRecordId","isAppConnected","setIsAppConnected","setPairDeadline","inputPairId","setInputPairId","setOpen","useEffect","init","fetchUsers","users","fetchDiffs","difficulties","targetRecordRef","onSnapshot","currData","updateDoc","success","push","confirm","title","ExclamationCircleOutlined","content","onOk","deleteRecord","leave","deleteDoc","pairWithApp","theRecordId","alert","pairing","Search","left","innerContainer","Leave_Icon","item_btn","CustomModal","modal_btn","formatSeconds","input","sec_num","parseInt","hours","floor","minutes","seconds","formatted","configLineChart","targetHeartRate","xField","yField","yAxis","rpm","text","heartRate","legend","itemName","formatter","item","meta","alias","geometryOptions","geometry","color","lineStyle","lineWidth","lineDash","smooth","opacity","point","shape","stroke","fill","annotations","start","end","offsetY","textAlign","tooltip","showTitle","StopWatch","initialValue","time","setTime","miliDisplay","setMiliDisplay","interval","displayInterval","setInterval","clearInterval","slice","unsubscribeRecord","unsubscribePackets","other_notification_url","window","AudioContext","webkitAudioContext","createGain","gain","MonitoringWorkout","params","useParams","setRecord","setUser","difficulty","setDifficulty","packets","setPackets","isInitRecordDone","setIsInitRecordDone","isInitPacketsDone","setIsInitPacketsDone","isBuffersDone","setIsBuffersDone","beginStopWatch","setBeginStopWatch","nextHeartRateVal","setNextHeartRateVal","fetchBuffers","grantAudioPerssion","beginWorkoutTime","begin","isNotEmpty","evaluateCurrPacket","checkIntegrity","listenRecordChange","listenPacketsChange","fetch","response","arrayBuffer","decodeAudioData","audioBuffer","playAudio","buffer","source","createBufferSource","connect","destination","info","maskClosable","recordRef","getDoc","recordSnapshot","recordData","userRef","userSnapshot","difficultyRef","diffSnapshot","toDate","packetsRef","newPackets","timeLabel","formatWithMoment","sort","splice","packet","getExactThresholdValue","overSlight","overMedium","overHigh","sendNotification","calBase","upperLimitHeartRate","ceil","addRpmAndHeartRate","Timestamp","now","nextPacket","addDoc","goFinishWorkout","warn","notification","description","SmileOutlined","popoverContent","allowClear","enterButton","onChange","target","onSearch","src","muted","glass","col","col1","age","col2","stopWatchWrapper","moment","duration","diff","asMilliseconds","getStopWatchInitialValue","format","col3","unit","placement","trigger","SettingOutlined","mainCol","UserList","setFilteredUser","useRef","horiLine","listWrapper","columns","openViewModal","openEditModal","onDeleteDiff","dataIndex","sorter","compare","targetWorkoutTime","align","render","direction","danger","MoreOutlined","rotate","fontSize","WarnHRValueDisplay","phase","overVal","modalFormLayout","DifficulityList","filteredDiffs","setFilteredDiffs","searchBarRef","isDone","currDiff","setCurrDiff","warnHRValues","setWarnHRValues","searchForm","editForm","createForm","createFormChange","setCreateFormChange","editFormChange","setEditFormChange","createModalVisible","setCreateModalVisible","viewModalVisible","setViewModalVisible","editModalVisible","setEditModalVisible","d","current","blur","onCreateDiff","note","isDeleted","closeAllModals","resetFields","onPatchDiff","currUserRef","deleteDiff","theDiffRef","onFormValueChange","changedVal","allVal","formKey","subTitle","onBack","extra","PlusOutlined","marginTop","gutter","clearIcon","CloseCircleFilled","ref","SearchOutlined","setFieldsValue","theDiff","okText","okType","cancelText","dataSource","pagination","pageSize","marginLeft","marginRight","visible","onCancel","footer","bordered","descriptions","column","alignItems","confirmLoading","destroyOnClose","onValuesChange","addonAfter","TextArea","showCount","maxLength","autoSize","minRows","maxRows","PageHeader","StylesManager","applyTheme","sixSurveyJson","SixSurveyJson","copdSurveyJson","COPDSurveyJson","sgrSurveyJson","SGRSurveyJson","borgScaleSurveyJson","BorgScaleSurveyJson","mySurveyCss","controlDisabled","rating","selected","FinishedWorkout","therapist","setTherapist","comment","setComment","safeHRIndex","setSafeHRIndex","hrVariabilityIndex","setHRVariabilityIndex","spo2","setSpo2","surveyModalVisible","setSurveyModalVisible","curSurveyName","setCurSurveyName","Model","survey","setSurvey","sixSurveyData","setSixSurveyData","copdSurveyData","setCopdSurveyData","sgrSurveyData","setSGRSurveyData","borgScaleSurveyData","setBorgScaleSurveyData","focusFirstQuestionAutomatic","showNavigationButtons","showCompletedPage","onComplete","add","sender","results","surveyCompleted","openSurveyModal","surveyName","onOKSurvey","hasErrors","doComplete","question2","question3","idNumber","question5","question9","question10","weight","question1","text1","text2","onFormSubmit","preventDefault","updateTherapistInfo","sixSurvey","borgScaleSurvey","sgrSurvey","copdSurvey","h","m","s","returnStr","calWorkoutTime","toLocaleString","CheckOutlined","prefix","UserOutlined","EditOutlined","LineChartOutlined","model","css","currRecord","isWorkoutTimeGT30","CrownOutlined","userData","difficultyData","RecordList","records","setReocrds","filteredRecords","setFilteredReocrds","setCurrRecord","currReocrdPackets","setCurrRecordPackets","fetchRecords","patchRecordsWithUserAndDiff","getTime","patchedRecords","u","userId","r","mode","onDeleteUser","TrainingWeekRecord","setRecords","fetchUser","userPath","recordsPath","onCreateUser","weekNumber","onPatchRecord","currRecordPath","theRecord","PersonnelInfo","goGame1Direct","goGame2Direct","goGame3Direct","grid_wrapper","onSubmit","htmlFor","labelWrapper","birth","Game1Direct","leftContainer","subject","Dir_Img","bottom","rightContainer","Home_Icon","Game2Direct","Game3Direct","ShapeCircle","viewBox","xmlns","cx","cy","transform","Game1Moni","goGameDirect","contentTime","contentScore","flexGrow","ShapeHexagon","ShapeSquare","y","rx","ShapeTriangle","ShapeRectangle","Game2Moni","AppRoutes","path","element","AppProvider","initializedDone","setInitializedDone","attempLogin","locale","ReactDOM","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.9b3ec7b7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3BM2M\",\"innerContainer\":\"styles_innerContainer__3Y3fM\",\"horiLine\":\"styles_horiLine__14xoM\",\"listWrapper\":\"styles_listWrapper__30jOF\",\"item_btn\":\"styles_item_btn__1L0Li\",\"cst_btn\":\"styles_cst_btn__15dl3\",\"descriptions\":\"styles_descriptions__2Jtwo\",\"form\":\"styles_form__a3cRe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3-pv1\",\"cst_btn\":\"styles_cst_btn__3zf2q\",\"tile\":\"styles_tile__ld1d9\",\"addOn\":\"styles_addOn__lAcI5\",\"tileIcon\":\"styles_tileIcon__3Rzsu\",\"tileLabel\":\"styles_tileLabel__21knx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__36U_i\",\"leftContainer\":\"styles_leftContainer__4w_-1\",\"rightContainer\":\"styles_rightContainer__20xKF\",\"subject\":\"styles_subject__zHz6E\",\"start\":\"styles_start__31NXr\",\"pairIdWrapper\":\"styles_pairIdWrapper__jqrZ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2IBkG\",\"leftContainer\":\"styles_leftContainer__hy5UW\",\"rightContainer\":\"styles_rightContainer__3EvaR\",\"subject\":\"styles_subject__3zWYr\",\"start\":\"styles_start__15LIT\",\"pairIdWrapper\":\"styles_pairIdWrapper__2hTKM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__FUEjQ\",\"leftContainer\":\"styles_leftContainer__3d2oG\",\"rightContainer\":\"styles_rightContainer__aBVMc\",\"subject\":\"styles_subject__nUDSm\",\"start\":\"styles_start__1zt1u\",\"pairIdWrapper\":\"styles_pairIdWrapper__2_zoN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3p_uw\",\"leftContainer\":\"styles_leftContainer__efI7j\",\"rightContainer\":\"styles_rightContainer__36nm5\",\"contentTime\":\"styles_contentTime__1CWu0\",\"contentScore\":\"styles_contentScore__8vWSV\",\"start\":\"styles_start__3jBX2\",\"pairIdWrapper\":\"styles_pairIdWrapper__1U1HK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3GJwe\",\"leftContainer\":\"styles_leftContainer__-6UCB\",\"rightContainer\":\"styles_rightContainer__1kNBT\",\"contentTime\":\"styles_contentTime__1BAsr\",\"contentScore\":\"styles_contentScore__2gkc6\",\"start\":\"styles_start__1mgHy\",\"pairIdWrapper\":\"styles_pairIdWrapper__3t8ZI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__msRCF\",\"pageHeader\":\"styles_pageHeader__242Ry\",\"descriptions\":\"styles_descriptions__aLChC\",\"form\":\"styles_form__3ok_y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2hB-r\",\"descriptions\":\"styles_descriptions__1kY2t\",\"form\":\"styles_form__1Qnic\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3HuKR\",\"descriptions\":\"styles_descriptions__3UP8P\",\"form\":\"styles_form__1qrcZ\",\"pageHeader\":\"styles_pageHeader__3-ZV-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2Tnc6\",\"descriptions\":\"styles_descriptions__2F6gm\",\"form\":\"styles_form__Z2w7o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"styles_overlay__3RZmO\",\"modalContainer\":\"styles_modalContainer__2G28S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2s08f\",\"scroll\":\"styles_scroll__2lbTr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__103ut\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__Hfgws\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__333xu\"};","export const SET_AUTH = 'SET_AUTH';\n","const ROUTE_PATH = {\n    home: '/',\n    sign_in: '/sign-in',\n    unauthorized: '/unauthorized',\n    admin_dashbaord: '/dashboard',\n    prepare_workout: '/prepare-workout',\n    monitoring_workout: '/monitoring-workout',\n    user_list: '/user-list',\n    difficulty_list: '/difficulty-list',\n    record_list: '/record-list',\n    finsished_workout: '/finished-workout',\n    training_week_record: '/training-week-record',\n\n    personnel_info: '/personnel-info',\n    game1_direct: '/game1_direct',\n    game2_direct: '/game2_direct',\n    game3_direct: '/game3_direct',\n    game1_monitoring: '/game1_monitoring',\n    game2_monitoring: '/game2_monitoring',\n    game3_monitoring: '/game3_monitoring',\n};\n\nexport default ROUTE_PATH;\n","const ROLES = {\n    'User': 2001,\n    'Editor': 1984,\n    'Admin': 5150,\n};\n\nexport default ROLES;\n","const WARN = {\n    Slight: 'slight',\n    Medium: 'medium',\n    High: 'high',\n};\n\nconst WARN_THRESHOLD = {\n    Slight: 105,\n    Medium: 115,\n    High: 120,\n};\n\nexport { WARN, WARN_THRESHOLD };\n","import { createContext, useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { SET_AUTH } from './actions';\n\nimport { ROLES } from '../constants';\n\nconst StoreContext = createContext();\n\nconst initialState = {\n    auth: {\n        isValid: true,\n        roles: [ROLES.Admin], // 1984: Editor ; 5150: Admin\n    },\n};\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case SET_AUTH:\n            return {\n                ...state,\n                auth: {\n                    ...action.payload,\n                },\n            };\n        default:\n            return state;\n    }\n};\n\nconst StoreProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const value = { state, dispatch };\n\n    return (\n        <StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n    );\n};\n\nconst useStore = () => {\n    return useContext(StoreContext);\n\n    // Used as custom-hook;\n    // const store = useStore();\n    //\n    // console.log(store)\n    // OUTPUT:\n    // {state: {…}, dispatch: ƒ}\n};\n\nStoreProvider.propTypes = {\n    children: PropTypes.object,\n};\n\nexport { StoreProvider, StoreContext, useStore };\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { Outlet, Navigate } from 'react-router-dom';\nimport { useStore } from '../store';\nimport { ROUTE_PATH } from '../constants';\n\nconst ProtectedRoutes = ({ allowedRoles }) => {\n    const {\n        state: { auth },\n    } = useStore();\n\n    if (!auth.isValid) {\n        return <Navigate replace to={ROUTE_PATH.sign_in} />;\n    }\n\n    return auth.roles.find((role) => allowedRoles?.includes(role)) ? (\n        <Outlet />\n    ) : (\n        <Navigate replace to={ROUTE_PATH.unauthorized} />\n    );\n};\n\nexport default ProtectedRoutes;\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from 'firebase/app';\n// import { getAnalytics } from 'firebase/analytics';\nimport {\n    getFirestore,\n    collection,\n    query,\n    where,\n    getDocs,\n} from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_API_KEY,\n    authDomain: 'stroke-recovery-system.firebaseapp.com',\n    projectId: 'stroke-recovery-system',\n    storageBucket: 'stroke-recovery-system.appspot.com',\n    messagingSenderId: '344233774087',\n    appId: process.env.REACT_APP_APP_ID,\n    measurementId: 'G-S5GSD31L4H',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n// const analytics = getAnalytics(app);\nconst db = getFirestore(app);\nexport const auth = getAuth(app);\n\nexport const usersRef = collection(db, 'users');\nexport const recordsRef = collection(db, 'records');\nexport const difficultiesRef = collection(db, 'difficulties');\n\nexport const validateInputPairId = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty || querySnapshot.size != 1) {\n        return false;\n    }\n\n    let record;\n    let recordId;\n    querySnapshot.forEach((doc) => {\n        record = doc.data();\n        recordId = doc.id;\n    });\n\n    if (record?.finishedWorkoutTime != null) {\n        return false;\n    }\n\n    return recordId;\n};\n\nexport const getRpmsWithPairdId = async (pairId) => {\n    let targetRecordId = null;\n\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return null;\n    }\n    if (querySnapshot.size == 1) {\n        querySnapshot.forEach((doc) => {\n            targetRecordId = doc.id;\n        });\n    }\n    console.log(targetRecordId);\n    return collection(recordsRef, targetRecordId, 'rpms');\n};\n\nexport const generateValidPairId = async () => {\n    let pass = false;\n    let pairId = null;\n\n    while (!pass) {\n        const test = getRandomPairId();\n        const validated = await isPairIdValid(test);\n\n        if (validated) {\n            pass = true;\n            pairId = test;\n        }\n    }\n\n    return pairId;\n};\n\nconst isPairIdValid = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return true;\n    } else return false;\n};\n\nconst getRandomPairId = () => {\n    return Math.floor(Math.random() * (9999 - 1000) + 1000).toString();\n};\n","/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Layout, Input, Button, message, Form, Typography } from 'antd';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\n\n// import Header from '../../components/Header';\nimport styles from './styles.module.scss';\nimport { ROUTE_PATH, ROLES } from '../../constants';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport { auth } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Title } = Typography;\n\nconst SignIn = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n    const { dispatch } = useStore();\n    const [loading, setLoading] = useState(false);\n\n    const login = async () => {\n        try {\n            setLoading(true);\n\n            const values = await form.validateFields();\n            console.log(values);\n\n            const userCredential = await signInWithEmailAndPassword(\n                auth,\n                values.email,\n                values.password,\n            );\n\n            const user = userCredential.user;\n            setLoading(false);\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: true,\n                    roles: [ROLES.Admin],\n                },\n            });\n\n            goDashboard();\n        } catch (e) {\n            console.log(e);\n            console.log(e?.message);\n            setLoading(false);\n            message.error('帳號或密碼有誤。');\n        }\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <Form\n                        {...formLayout}\n                        form={form}\n                        layout=\"horizontal\"\n                        autoComplete=\"off\"\n                    >\n                        <Form.Item\n                            label=\" \"\n                            colon={false}\n                            style={{ marginBottom: 12 }}\n                        >\n                            <Title level={2}>長庚大學-物理治療系統登入A</Title>\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Email\"\n                            name=\"email\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '請填入 Email',\n                                },\n                            ]}\n                        >\n                            <Input placeholder=\"\" type=\"email\" />\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Password\"\n                            name=\"password\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '請填入 Password',\n                                },\n                            ]}\n                        >\n                            <Input.Password placeholder=\"\" />\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={login}\n                                loading={loading}\n                            >\n                                登入\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 7,\n    },\n    wrapperCol: {\n        span: 12,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 7,\n        span: 16,\n    },\n};\n\nexport default SignIn;\n","export default __webpack_public_path__ + \"static/media/dashboard_icon.ca3d7924.png\";","/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    TeamOutlined,\n    SlidersOutlined,\n    ProfileOutlined,\n    RocketOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport addOnImg from '../../assets/images/right-arrow.png';\nimport Logo from '../../assets/images/dashboard_icon.png';\n\nconst AdminDashboard = () => {\n    const navigate = useNavigate();\n\n    const goUserList = () => {\n        navigate(ROUTE_PATH.user_list);\n    };\n\n    const goDifficulityList = () => {\n        navigate(ROUTE_PATH.difficulty_list);\n    };\n\n    const goRecordList = () => {\n        navigate(`${ROUTE_PATH.record_list}/123`);\n    };\n\n    const goPrepareWorkout = () => {\n        navigate(ROUTE_PATH.prepare_workout);\n    };\n    \n    const goPersonnelInfo = () => {\n        navigate(ROUTE_PATH.personnel_info);\n    }\n\n    return (\n        <div className={styles.container}>\n            <legend>\n                醫生端\n            </legend>\n            <div\n                style={{\n                    background: `url(${Logo})`,\n                    width: 240,\n                    height: 270,\n                    backgroundSize: '100%',\n                    backgroundRepeat: 'no-repeat',\n                }}\n            />\n            <div className={styles.cst_btn} onClick={goUserList}>\n                病歷資訊\n            </div>\n            <div className={styles.cst_btn} onClick={goPrepareWorkout}>\n                連線配對\n            </div>\n            <div className={styles.cst_btn} onClick={goPersonnelInfo}>\n                基本資料填寫\n            </div>\n            <fieldset style={{display: 'none'}}>\n                <TileWithIconAndAction\n                    icon={<TeamOutlined />}\n                    label=\"管理會員資訊\"\n                    action={goUserList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<SlidersOutlined />}\n                    label=\"騎乘關卡設定\"\n                    action={goDifficulityList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<ProfileOutlined />}\n                    label=\"騎乘紀錄查詢\"\n                    action={goRecordList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<RocketOutlined />}\n                    label=\"開始騎乘作業\"\n                    action={goPrepareWorkout}\n                />\n            </fieldset>\n        </div>\n    );\n};\n\nconst TileWithIconAndAction = ({ icon, label, action }) => (\n    <span className={styles.tile} onClick={action}>\n        <span\n            className={styles.addOn}\n            style={{ backgroundImage: `url(${addOnImg})` }}\n        ></span>\n        <span className={styles.tileIcon}>{icon}</span>\n        <span className={styles.tileLabel}>{label}</span>\n    </span>\n);\n\nexport default AdminDashboard;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5gUPACMKwjZTZgAAAfBJREFUaN7tmDFLHEEYht9vPRRJc+lCtHDXI4V/ICmEQIo0IhbeIqIwe4USPLwmXQIGhAuBYHPdieEInN6pVRCSIm0qC0VCmsREUBELYykSb/dNEfYKg8jhruvgPM0UMwzf+8B8wwxgMBgMBoM29K24WQbt7YDrkm1tSddzbdgzao3M5520Inl66uS9DfL42P6tFsjh4aTri41Mafojg46OZnDH80gyHO26+kWenfUO5e6TIyOt7m8lHfAytguHFUijgTHZBE5Ozs/LC5kFUqlgNPgCVKutirjxAoDVVRHf5yw3gIkJvuYM0GhEJUKSjtcqdjFXZJDNojcYhdRqYfD/Fj6DDfg+v8su6Hk7C5V3YlWr2guIWoS2AqISIY6jSuTAAOfEB8pleY4toKsr6WBxEfYQ6y1swHXF/qZ+kHt7MihFoLs76QKvTcQaXwL7+xrcAjHxQKYB0rL6+RWYnAyNJF1X3DSPwCN+AgoF/Ztgj6cYuC7e8BVkaenSJviQGUCpncfvx0QWF7UVcNXg4bR2AqIKrp2A5qvvM54A9fpFwZtnvGb1A+PjPz9UDkSWly/aVwMB/979ztM7d4GjI2zjD5BOXzV4yI2/BjOlezkwlcI6y0BnZ1TBtcPe9ObJqalb9yFynlv7JWYwGAyGGPgL5etGn1vyhAgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDUtMTVUMDA6MzU6MTArMDA6MDBS2JlGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTA1LTE1VDAwOjM1OjEwKzAwOjAwI4Uh+gAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ROUTE_PATH } from '../../constants/';\n\nimport styles from './styles.module.scss';\n\nconst Header = () => {\n    return (\n        <div className={styles.container}>\n            <Link to={ROUTE_PATH.admin_dashbaord}>Dashboard</Link>\n        </div>\n    );\n};\n\nexport default Header;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Missing = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <h1>!NOT FOUND!</h1>\n            <p>Sorry, the page you visited is not exist</p>\n        </div>\n    );\n};\n\nexport default Missing;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Unauthorized = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <p>Sorry, you are not authorized to view this page</p>\n        </div>\n    );\n};\n\nexport default Unauthorized;\n","import _ from 'underscore';\nimport React from 'react';\n\nclass Helper {\n    defaults(object, defaults) {\n        return _.defaults({ ...object }, defaults);\n    }\n    each(list, iteratee, context) {\n        if (list instanceof Set) {\n            let array = Array.from(list);\n            array.forEach((value, index, array) =>\n                iteratee.call(context, value, index, array),\n            );\n        } else {\n            _.each(list, iteratee, context);\n        }\n    }\n\n    map(list, iteratee, context) {\n        return _.map(list, iteratee, context);\n    }\n\n    mapObject(obj, iteratee, context) {\n        return _.mapObject(obj, iteratee, context);\n    }\n\n    reduce(list, iteratee, memo, context) {\n        return _.reduce(list, iteratee, memo, context);\n    }\n\n    every(list, iteratee, context) {\n        return _.every(list, iteratee, context);\n    }\n\n    some(list, iteratee, context) {\n        return _.some(list, iteratee, context);\n    }\n\n    find(list, predicate, context) {\n        let result = null;\n        if (list instanceof Map) {\n            for (const entry of list.entries()) {\n                let value = entry[1];\n                let key = entry[0];\n                let test = predicate.call(context, value, key, list);\n                if (test) {\n                    result = value;\n                    break;\n                }\n            }\n        } else {\n            result = _.find(list, predicate, context);\n        }\n        return result;\n    }\n\n    findIndex(list, predicate, context) {\n        return _.findIndex(list, predicate, context);\n    }\n\n    filter(list, predicate, context) {\n        return _.filter(list, predicate, context);\n    }\n\n    count(list, predicate, context) {\n        return this.filter(list, predicate, context).length;\n    }\n\n    max(list, iteratee, context) {\n        return _.max(list, iteratee, context);\n    }\n\n    min(list, iteratee, context) {\n        return _.min(list, iteratee, context);\n    }\n\n    toArray(any) {\n        if (this.isValid(any)) {\n            return _.isArray(any) ? any : [any];\n        } else {\n            return any;\n        }\n    }\n    first(array, n) {\n        return _.isEmpty(array) ? null : _.first(array, n);\n    }\n\n    last(array, n) {\n        return _.isEmpty(array) ? null : _.last(array, n);\n    }\n\n    has(object, key) {\n        return _.has(object, key);\n    }\n\n    values(object) {\n        return _.values(object);\n    }\n\n    isEqual(a, b) {\n        let test = true;\n        if (a instanceof File && b instanceof File) {\n            test = a.size === b.size;\n        } else if (this.isArray(a) && this.isArray(b)) {\n            for (let i = 0; i < Math.max(a.length, b.length); i++) {\n                if (a[i] !== b[i]) {\n                    test = false;\n                    break;\n                }\n            }\n        } else {\n            test = JSON.stringify(a) === JSON.stringify(b);\n        }\n        return test;\n    }\n    isEmpty(value) {\n        let test = false;\n        if (this.isNullOrUndefined(value)) {\n            test = true;\n        } else if (_.isString(value) || _.isArray(value)) {\n            test = value.length === 0;\n        } else if (!this.isPrimitive(value)) {\n            test = Object.entries(value).length === 0;\n        }\n        return test;\n    }\n    isNotEmpty(object) {\n        return !this.isEmpty(object);\n    }\n    isBoolean(object) {\n        return _.isBoolean(object);\n    }\n    isFalse(value) {\n        return value === false;\n    }\n    isTrue(value) {\n        return value === true;\n    }\n    isString(object) {\n        return _.isString(object);\n    }\n    isNumber(object) {\n        return _.isNumber(object);\n    }\n    isFunction(object) {\n        return _.isFunction(object);\n    }\n    isDate(object) {\n        return _.isDate(object);\n    }\n    isNull(...values) {\n        return values.every((value) => _.isNull(value));\n    }\n    isNotNull(...values) {\n        return values.every((value) => !_.isNull(value));\n    }\n    isUndefined(...values) {\n        return values.every((value) => _.isUndefined(value));\n    }\n    isNotUndefined(...values) {\n        return values.every((value) => !_.isUndefined(value));\n    }\n    isNullOrUndefined(...values) {\n        return values.every(\n            (value) => this.isNull(value) || this.isUndefined(value),\n        );\n    }\n    isNotNullOrUndefined(...values) {\n        return values.every((value) => !this.isNullOrUndefined(value));\n    }\n    isExisted(object) {\n        return !(object === null || object === undefined);\n    }\n    isNotExisted(object) {\n        return object === null || object === undefined;\n    }\n    isValid(object) {\n        return this.isExisted(object);\n    }\n    isNotValid(object) {\n        return this.isNotExisted(object);\n    }\n    isArray(object) {\n        return Array.isArray(object);\n    }\n    isObject(object) {\n        return _.isObject(object);\n    }\n    isInteger(object) {\n        return Number.isInteger(object);\n    }\n    isFinite(value) {\n        return Number.isFinite(value);\n    }\n    isFile(object) {\n        return object instanceof File;\n    }\n    isNaN(object) {\n        return _.isNaN(object);\n    }\n    isPrimitive(value) {\n        return (\n            this.isNumber(value) ||\n            this.isString(value) ||\n            this.isDate(value) ||\n            this.isBoolean(value) ||\n            this.isFile(value)\n        );\n    }\n    isJson(json) {\n        if (!_.isString(json)) return false;\n\n        try {\n            JSON.parse(json);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n    isPojo(object) {\n        if (object == null || typeof object !== 'object') {\n            return false;\n        }\n        const proto = Object.getPrototypeOf(object);\n        if (proto == null) {\n            return true; // `Object.create(null)`\n        }\n        return proto === Object.prototype;\n    }\n    isElement(object) {\n        return React.isValidElement(object);\n    }\n}\n\nlet helper = new Helper();\n\nexport default helper;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIMAAAA3CAYAAAAvxvkFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfTSURBVHgB7Z1fUFRVHMd/514EJtMwK6NM0DRl0kSbRsegVn0IGyUYxIF6MPoz9WLIjD2ED8BD1oMzgD3mSD40JmgiOkkP6hrEoE2yZn8EKVfSNDNdFR1l/5zO9wI7u3fvLsuyu3Gu+5lxdvfu3buM53t//87vnGUUZSyWhjT3pMkFRMpCIk8mMZYtDqcN/UsQGQ5GZOecOcRzG3H3MafLaetsLbVTFGEUBSAAz+S0cs65RVzRQgnighg8m5vznW7nQHM0hDEmMeSsbrIwplYlBDAO4LyZc099+8FiK0VIRGJY9mpjtqom1SZEMA7hzOp03i2LxFKMSgxD7qCKE99ICcY1jFj1dy2FNaP7TJhY8nZlupNTjoqnmZRAFuzOgXvLw7USSjgn5a7eUyCE0EUJIchG5gQxbhi/cE5WRzrhpfx95SI9/EI8TSWTUZw/m7ZWLaPX8mZqr3/tuU4mJFWMX0nGM+tu9PU0doY6MaSbgBBEfFBHJqSsNIvKSuZ5X/ffdtK6d7/VHk0L5xVtB4qCjmdQNwHTcr8IATw4cQKZHsZqQ7kMQzEgWCRFaSATYiQE0NTSa26rMIwY16UYX6O3jA4OZQ2mKx8HE8KlK3eo99wNyl2STovmP2J2K5EmgsqjKBPo3wiIGUScgDpCNZmMYEIIBsTRdfofajrwO10WYjEbog5RJ+oQFf7HfBiqJZwjE7KjbgXNnvkQRYLt56u0pf5H04nC7XIt6vhmnW34tZ+bcKekmjJOALfGEA9kC9fR+PkrtOGd50zlQlR1Qq3va68YMOlEmHU0KZ9t/2nMAWLxmqc1C/P4Yw+QKWDcoo37EN6i04y5JbWMsfCdqmRcc9yj4yf/ppW50yk52b/WBpFsqumgPSI+OCHOuXb9Lk2dkmpoBXAsd+kT1CVcB64pO4zUzL6e3TsHn5O5YgVkAzkiK+g9d5MOHTkf8D7ihm0f5wYMNOIBFJ18QXYB12BkCSCgtzYeMUUcod68McVqLXNot8iTWa+/KaxCHkkOhFAvBvrZuQ+LuzddGzB9iTmYhYA4Dh3p83MlfRf7tWxCu/aCR/2ug8/CQuAzA04PyYwnJeVeX3ejVYsZhBDWk+Tg7v2o/Hm/YxgsI5A2frC5zW/gcYcHu8sbvjoTcH6w75QRxpWX8ajCRXA16VOSnA1vLwi4e+HX249fMjwfFuJw2wXt+Z/CAiB1DBVgQii/dF+jVSsz/I5nTJ+kfY/U7oJR5qz0vHr1qXmlFsxqkcTgDq3U3aEY2JqtP4QcYLx3ousKtQnBhJNpYMCRoi5ZPM3/+6dNpFbhLmTGlZzSrXBFsZDkGFUWt20/HZO7FRkHLIEviFVQi5AZhbNsRcQLC0ly9LEBRNBqkElEi4ZdvwUc07sP2WAKZSqcc6knpJD+6dPEHbvOUCxBeVpvHfB3SM5ChUneymZkntuP/0Wxpr3T/zsgyEjnPsYJaUgtpbYMc2b5//m4a+PRl9BmkKXMMYEYpEZfHTz7h4PiAeISo7qDzJhODPHsVgoQg0gxZQZiiM+tlGC840iIIYr09w+QrGCVN1JLG0mMvrAUT1P9f7qoaOPhTFgGxmJXnYkDl3RiiFdEb5RGnhXT5tLC+SmFSW4ZenXZAwYpHq1piwzqG5ev3CZZYeSxKqqqNJPEGOX7q1bMoFiDpXm+XB5qt5cVZ5JqU6zNhQ7hKqwkKRgAva/WD1S0QelZHy/oy9MygR1gOpsL7VqdgXPPMZIUCOHQYf+wBwOF5tVYgVY4PUaTV7KArYDwqIkhSVGkXlM53JrmCxbNxKIiaHRdtL7J3NziHgoVNDHI7iowEFgr6QuCSDS+RlMQcD9GvRMyWwXBfrgIPPGWo7nbNaotX8Yb6FMMqDkIIURLEBACWusCvlcIQWarwD1ur1fwtgf39TTZM+aVWEjSKW10KCOIM+p6RvNL/21XRNE+Pv/e+vmGFgEzpJ9sO0mywjmzth8s8hoBv9Uk07NKTimc3idJQZPrv9fvBnQ+DQoiXWuYDdUFrf/MG2vnUvWmF4LUFO5Q5ZZOqauOLpUtv3Bmt7dQE7AKOyf/6zpxsJwkJk/UGSpDtLBrMYYIOvVxBhhurg1VvMLn0TovtXsgXtPeUlTteyxgT6dZWSWdnBO6paVteoE7QDEKXczBlsjhPay66rt4y++9LZVLte4p/RK8YXDdD2s6ZF9aZxdCKNQfDOhnQGahKmw5ST6bObxQRl+D8CV7/lSDY8ZdznAHWLy7WXLXIHA4B8c3AEP524UfyZhT3C37egoMGhbRoA4Aa6Bvkdvfag8IKrNFXJHuk33gGl/u7dHWYNgkrjJ68XhKO1qKDHd9C7nb24tr9m5UGKslk4B4AHf+YjHgJ09fNWynh2iGMwcISeYysx4P5xXfh9jtbcQdYs0miPuVkYQAwtouWNsubnD3t8RvRsiHQ7iGsraDa0ecnQ5/7+iCfZluD0/sHS0XdgSLw+XmkRj1Twzk5O+tZsSqKMG4hnuoPimJVWvzTmES0e9NwEq4ODUwE+8BJSuiRmT1qKyio7lw1B1sY/4lGlKTyoUowtq1PEHsgAjEbGNN3H+JRg8shdPtKcAOMOKC2ZQgLmgCYPwY+lFG4w6CERUx+KIFmi53trbvA5b7c542tLg3kYlEDgbawRmzif/P82hiRu9qNATgy3/NyGNSM2IIMgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/page_icon.4b388fdb.png\";","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport styles from './styles.module.scss';\n\nimport Close_btn from '../../assets/images/modal_close.png';\n\nconst Modal = ({ open, onClose, overlayColour, children }) => {\n    if (!open) return null;\n    return (\n        <div\n            onClick={onClose}\n            className={styles.overlay}\n            style={{ backgroundColor: overlayColour }}\n        >\n            <div\n                onClick={(e) => {\n                    e.stopPropagation();\n                }}\n                className={styles.modalContainer}\n            >\n                <div\n                    onClick={onClose}\n                    style={{\n                        background: `url(${Close_btn})`,\n                        width: 70,\n                        height: 84,\n                        right: 30,\n                        top: 30,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                {children}\n            </div>\n        </div>\n    );\n};\n\nexport default Modal;\n","export default \"data:image/png;base64,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\"","export default function wait(ms, value) {\n    return new Promise((resolve) => setTimeout(resolve, ms, value));\n}\n","/* eslint-disable no-unreachable */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport Leave_Icon from '../../assets/images/leave_icon.png';\nimport Logo from '../../assets/images/page_icon.png';\nimport CustomModal from '../../components/CustomModal';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst PrepareWorkout = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    //\n    /// 針對中風復健新增的內容\n    ////\n    /////\n    const [open, setOpen] = useState(false);\n    //\n    ///\n    ////\n    /////\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    return (\n        <div className={styles.container}>\n            <div\n                style={{\n                    background: `url(${Logo})`,\n                    width: 258,\n                    height: 56,\n                    left: 24,\n                    top: 20,\n                    position: 'absolute',\n                    backgroundSize: '100%',\n                    backgroundRepeat: 'no-repeat',\n                }}\n            />\n            <legend>醫生端</legend>\n            <div className={styles.innerContainer}>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: 84,\n                        height: 56,\n                        right: 24,\n                        top: 1,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <caption>輸入配對碼...</caption>\n                <div className={styles.item_btn}>\n                    <span>配</span>\n                    <span>對</span>\n                    <span>碼</span>\n                </div>\n                <input />\n                <div className={styles.cst_btn} onClick={() => setOpen(true)}>\n                    進入遊戲\n                </div>\n                <div className={styles.cst_btn} onClick={goDashboard}>\n                    返回主頁\n                </div>\n            </div>\n            <CustomModal\n                open={open}\n                onClose={() => setOpen(false)}\n                overlayColour=\"rgba(243, 151, 0, 50%)\"\n            >\n                <div className={styles.modal_btn} onClick={goDashboard}>\n                    圓柱練習\n                </div>\n                <div className={styles.modal_btn} onClick={goDashboard}>\n                    多元練習\n                </div>\n                <div className={styles.modal_btn} onClick={goDashboard}>\n                    細圓柱練習\n                </div>\n            </CustomModal>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"準備騎乘！進行騎乘設定\"\n                        subTitle=\"選擇騎乘者及關卡資訊\"\n                        onBack={goDashboard}\n                    />\n\n                    <Form {...formLayout} form={form} style={{ marginTop: 36 }}>\n                        <Form.Item\n                            name=\"user\"\n                            label=\"騎乘者\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇騎乘者',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇騎乘者\"\n                                        onChange={onUserChange}\n                                        disabled={pairId}\n                                    >\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedUser}\n                                        onClick={openUserModal}\n                                    >\n                                        查看騎乘者資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"difficulty\"\n                            label=\"關卡資訊\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇關卡資訊',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇關卡資訊\"\n                                        onChange={onDiffChange}\n                                        disabled={pairId}\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}・\n                                                {diff.targetWorkoutTime}{' '}\n                                                分鐘・目標{' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedDiff}\n                                        onClick={openDiffModal}\n                                    >\n                                        查看關卡資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={confirmUserAndDiff}\n                                disabled={pairId}\n                            >\n                                下一步，生成配對碼\n                            </Button>\n                        </Form.Item>\n                    </Form>\n\n                    <Modal\n                        title=\"檢視騎乘者\"\n                        visible={userModalVis}\n                        onCancel={closeUserModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"會員編號\" span={3}>\n                                {selectedUserData?.idNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"姓名\" span={3}>\n                                {selectedUserData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"身高\" span={3}>\n                                {selectedUserData?.height} 公分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"體重\" span={3}>\n                                {selectedUserData?.weight} 公斤\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動心率\" span={3}>\n                                {selectedUserData?.exerciseHeartRate} BPM\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動阻力\" span={3}>\n                                {selectedUserData?.exerciseResist}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動速度\" span={3}>\n                                {selectedUserData?.exerciseSpeed}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"是否服用藥物\" span={3}>\n                                {selectedUserData?.medicine ? '是' : '否'}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={3}>\n                                {selectedUserData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    <Modal\n                        title=\"檢視難度\"\n                        visible={diffModalVis}\n                        onCancel={closeDiffModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"難度名稱\" span={1}>\n                                {selectedDiffData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標騎乘時間\" span={1}>\n                                {selectedDiffData?.targetWorkoutTime} 分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標心率數值\" span={2}>\n                                {selectedDiffData?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"上限心率數值\" span={2}>\n                                {selectedDiffData?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        警示心率門檻\n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{\n                                                fontSize: '0.8em',\n                                            }}\n                                        >\n                                            依據上限心率數值計算\n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={2}>\n                                {selectedDiffData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n\n                    {pairId && (\n                        <>\n                            <Divider\n                                dashed={true}\n                                style={{\n                                    minWidth: '90%',\n                                    width: '90%',\n                                    borderWidth: '2px',\n                                    margin: 'auto',\n                                    marginRight: 'auto',\n                                    marginTop: '4em',\n                                    marginBottom: '4em',\n                                }}\n                            />\n                            <Form {...formLayout}>\n                                <Form.Item\n                                    label={\n                                        <>\n                                            配對碼\n                                            <Popover\n                                                content={simulateAppCotent}\n                                                placement=\"bottomRight\"\n                                                title=\"更多操作\"\n                                                trigger=\"click\"\n                                            >\n                                                <SettingOutlined\n                                                    width={'1em'}\n                                                />\n                                            </Popover>\n                                        </>\n                                    }\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                >\n                                    <div className={styles.pairIdWrapper}>\n                                        {pairId.split('').map((c, i) => (\n                                            <pre key={c + i}>{c}</pre>\n                                        ))}\n\n                                        {/* <Countdown\n                                            title=\"有效時間\"\n                                            value={Date.now() + 1000 * 60 * 10}\n                                            onFinish={onDeadlineExpired}\n                                        /> */}\n                                        {pairDeadline && (\n                                            <Countdown\n                                                title=\"有效時間\"\n                                                value={pairDeadline}\n                                                onFinish={onDeadlineExpired}\n                                            />\n                                        )}\n                                    </div>\n                                </Form.Item>\n                                {!isAppConnected && (\n                                    <Form.Item\n                                        label=\" \"\n                                        colon={false}\n                                        style={{ marginTop: '3em' }}\n                                    >\n                                        <Spin\n                                            indicator={\n                                                <LoadingOutlined\n                                                    style={{\n                                                        fontSize: 24,\n                                                        marginRight: '1em',\n                                                    }}\n                                                    spin\n                                                />\n                                            }\n                                        />\n                                        等待配對中...\n                                    </Form.Item>\n                                )}\n\n                                <Form.Item\n                                    label=\" \"\n                                    colon={false}\n                                    style={{ marginTop: '5em' }}\n                                >\n                                    <Button\n                                        onClick={goMonitoring}\n                                        type={\n                                            isAppConnected\n                                                ? 'primary'\n                                                : 'dashed'\n                                        }\n                                        disabled={!isAppConnected}\n                                        icon={\n                                            isAppConnected && (\n                                                <ArrowRightOutlined />\n                                            )\n                                        }\n                                        size=\"large\"\n                                    >\n                                        前往監視畫面\n                                    </Button>\n                                </Form.Item>\n                            </Form>\n                        </>\n                    )}\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default PrepareWorkout;\n","/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    onSnapshot,\n    collection,\n    addDoc,\n    doc,\n    updateDoc,\n    Timestamp,\n    getDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport { Modal, Popover, Button, Input, message, notification } from 'antd';\nimport {\n    SettingOutlined,\n    ExclamationCircleOutlined,\n    SmileOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN, WARN_THRESHOLD } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport wait from '../../util/wait';\n// import useAudio from '../../util/useAudio';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nimport StopWatch from '../../components/StopWatch';\n\nlet unsubscribeRecord = null;\nlet unsubscribePackets = null;\n\nconst warn_slight_url = '/assets/sounds/warn-slight.wav';\nconst warn_medium_url = '/assets/sounds/warn-medium.wav';\nconst warn_high_url = '/assets/sounds/warn-high.wav';\nconst other_notification_url = '/assets/sounds/notification.wav';\nconst other_archieved_url = '/assets/sounds/goal-archieved.wav';\n\nconst https_yodel =\n    'https://s3-us-west-2.amazonaws.com/s.cdpn.io/123941/Yodel_Sound_Effect.mp3';\n\n//:\n//:\n//:\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar context = new AudioContext(); // Make it crossbrowser\nvar gainNode = context.createGain();\ngainNode.gain.value = 1; // set volume to 100%\nvar yodelBuffer; // slight\nvar yodelBuffer2; // medium\nvar yodelBuffer3; // high\nvar yodelBuffer4; // archieved\nvar yodelBuffer5; // notfication\n//:\n//:\n//:\n\nconst MonitoringWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [record, setRecord] = useState();\n    const [user, setUser] = useState();\n    const [difficulty, setDifficulty] = useState();\n    const [packets, setPackets] = useState([]);\n\n    const [isInitRecordDone, setIsInitRecordDone] = useState(false);\n    const [isInitPacketsDone, setIsInitPacketsDone] = useState(false);\n\n    const [isBuffersDone, setIsBuffersDone] = useState(false);\n\n    // const {\n    //     playWarnSound,\n    //     playOtherSound,\n    //     OTHER_SOUND,\n    //     getAudioPermission,\n    // } = useAudio();\n\n    // 騎乘計時碼表\n    const [beginStopWatch, setBeginStopWatch] = useState(false);\n\n    // for prototype\n    const [nextHeartRateVal, setNextHeartRateVal] = useState('');\n\n    useEffect(() => {\n        init();\n        fetchBuffers();\n\n        return () => {\n            if (_.isFunction(unsubscribeRecord)) unsubscribeRecord();\n            if (_.isFunction(unsubscribePackets)) unsubscribePackets();\n        };\n    }, []);\n\n    useEffect(() => {\n        if (\n            isInitRecordDone &&\n            isInitPacketsDone &&\n            !_.isEmpty(difficulty) &&\n            isBuffersDone\n        ) {\n            grantAudioPerssion();\n        }\n    }, [isInitRecordDone, isInitPacketsDone, difficulty, isBuffersDone]);\n\n    useEffect(() => {\n        if (_.isEmpty(record?.beginWorkoutTime)) return;\n\n        const begin = record.beginWorkoutTime;\n        const end = record.finishedWorkoutTime;\n\n        if (_.isNotEmpty(begin)) setBeginStopWatch(true);\n        if (_.isNotEmpty(end)) setBeginStopWatch(false);\n    }, [record]);\n\n    useEffect(() => {\n        if (_.isEmpty(record)) return;\n        if (!isInitRecordDone || !isInitPacketsDone) return;\n\n        evaluateCurrPacket(packets[packets.length - 1]);\n    }, [packets]);\n\n    const init = async () => {\n        checkIntegrity();\n        listenRecordChange();\n        listenPacketsChange();\n    };\n\n    const fetchBuffers = async () => {\n        let response;\n        let arrayBuffer;\n\n        response = await fetch(warn_slight_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(warn_medium_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer2 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(warn_high_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer3 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(other_archieved_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer4 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        response = await fetch(other_notification_url);\n        arrayBuffer = await response.arrayBuffer();\n        context.decodeAudioData(\n            arrayBuffer,\n            (audioBuffer) => {\n                yodelBuffer5 = audioBuffer;\n            },\n            (error) => console.error(error),\n        );\n\n        setIsBuffersDone(true);\n    };\n\n    const playAudio = (buffer) => {\n        var source = context.createBufferSource();\n        source.buffer = buffer;\n        source.connect(context.destination);\n        source.start();\n    };\n\n    const grantAudioPerssion = () => {\n        Modal.info({\n            title: '提示：監控過程會產生提示聲響，請確保聲音打開！',\n            // content: <button onClick={getAudioPermission}>點我測試;</button>,\n            onOk() {\n                playAudio(yodelBuffer5);\n            },\n            maskClosable: false,\n        });\n    };\n\n    const formatBeginWorkoutTime = () => {\n        if (_.isEmpty(record.beginWorkoutTime)) {\n            return '';\n        }\n\n        return moment(record.beginWorkoutTime).format('YYYY/MM/DD HH:mm');\n    };\n\n    const checkIntegrity = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        // check if a valid record\n        if (recordData.finishedWorkoutTime != null) {\n            alert('此筆紀錄已完成，將自動導回首頁！');\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        setUser(user);\n        setDifficulty(difficulty);\n    };\n\n    const listenRecordChange = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        unsubscribeRecord = onSnapshot(recordRef, async (recordSnapshot) => {\n            const recordData = recordSnapshot.data();\n            const record = {\n                ...recordData,\n                beginWorkoutTime: recordData.beginWorkoutTime?.toDate(),\n            };\n\n            setRecord(record);\n            setIsInitRecordDone(true);\n        });\n    };\n\n    const listenPacketsChange = () => {\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        unsubscribePackets = onSnapshot(packetsRef, (querySnapshot) => {\n            if (querySnapshot.empty) {\n                alert('監測數據有誤，請重新配對，即將退回選擇畫面！');\n                navigate(ROUTE_PATH.prepare_workout, { replace: true });\n                return;\n            }\n            const newPackets = [];\n            querySnapshot.forEach((doc) => {\n                newPackets.push({\n                    ...doc.data(),\n                    timeLabel: formatWithMoment(doc.data().time),\n                });\n            });\n\n            newPackets.sort((a, b) => a.time - b.time);\n            newPackets.splice(0, 1);\n\n            setPackets(newPackets);\n            setIsInitPacketsDone(true);\n        });\n    };\n\n    const evaluateCurrPacket = (packet) => {\n        const targetHeartRate = record.targetHeartRate;\n        const [overSlight, overMedium, overHigh] = getExactThresholdValue();\n\n        console.log(packet);\n\n        if (packet.heartRate >= overHigh) {\n            console.log('playing: high warn');\n            playAudio(yodelBuffer3);\n            sendNotification(WARN.High, packet.heartRate);\n        } else if (\n            packet.heartRate < overHigh &&\n            packet.heartRate >= overMedium\n        ) {\n            console.log('playing: medium warn');\n            playAudio(yodelBuffer2);\n            sendNotification(WARN.Medium, packet.heartRate);\n        } else if (\n            packet.heartRate < overMedium &&\n            packet.heartRate >= overSlight\n        ) {\n            console.log('playing: slight warn');\n            playAudio(yodelBuffer);\n            sendNotification(WARN.Slight, packet.heartRate);\n        } else if (\n            packet.heartRate >= targetHeartRate &&\n            packet.heartRate < overSlight\n        ) {\n            console.log('playing: archieved');\n            playAudio(yodelBuffer4);\n            sendNotification('Archieved', packet.heartRate, targetHeartRate);\n        }\n    };\n\n    const getExactThresholdValue = () => {\n        const upperLimitHeartRate = record.upperLimitHeartRate;\n\n        const calBase = upperLimitHeartRate / 100;\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    // for prototype testing\n    const addRpmAndHeartRate = async () => {\n        // set the begin time\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const record = recordSnapshot.data();\n        if (record.beginWorkoutTime == null) {\n            await updateDoc(recordRef, {\n                beginWorkoutTime: Timestamp.now(),\n            });\n        }\n\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        const time = (packets.length + 1) * 5;\n        const heartRate = _.isNotEmpty(nextHeartRateVal)\n            ? parseInt(nextHeartRateVal)\n            : 95 + packets.length;\n\n        // simulate incoming rpm & heart rate\n        const rpm = 30;\n        const nextPacket = {\n            time,\n            rpm: rpm + packets.length,\n            heartRate: heartRate,\n        };\n\n        await addDoc(packetsRef, nextPacket);\n    };\n\n    const confirmFinish = () => {\n        Modal.confirm({\n            title: '即將結束！',\n            icon: <ExclamationCircleOutlined />,\n            content: '確定結束本次騎乘？',\n            onOk: () => goFinishWorkout(),\n        });\n    };\n\n    const goFinishWorkout = async () => {\n        setBeginStopWatch(false);\n\n        await wait(2000);\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            finishedWorkoutTime: Timestamp.now(),\n            pairId: null,\n        });\n\n        message.success({ content: '已結束！自動跳轉至統計畫面' });\n\n        await wait(1000);\n        navigate(`${ROUTE_PATH.finsished_workout}/${params.recordId}`, {\n            replace: true,\n        });\n    };\n\n    const getStopWatchInitialValue = () => {\n        if (_.isEmpty(record?.beginWorkoutTime)) {\n            return 0;\n        }\n\n        const begin = moment(record.beginWorkoutTime);\n        const now = moment();\n        const accumlated = moment.duration(now.diff(begin)).asMilliseconds();\n\n        return accumlated;\n    };\n\n    // 右上角通知顯示\n    const sendNotification = (warn, heartRate, targetHeartRate) => {\n        if (warn === WARN.High) {\n            // high warn\n            notification.warn({\n                message: '第三階段警示，請檢查騎乘者身體狀況',\n                description: `達到第三階段警示心率。最新心率：${heartRate} BPM。`,\n            });\n        } else if (warn === WARN.Medium) {\n            // medium warn\n            notification.info({\n                message: '第二階段警示，請留意騎乘者身體狀況',\n                description: `達到第一階段警示心率。最新心率：${heartRate} BPM。`,\n            });\n        } else if (warn === WARN.Slight) {\n            // slight warn\n            notification.open({\n                message: '第一階段警示',\n                description: `達到第一階段警示心率。最新心率：${heartRate} BPM。`,\n                icon: <SmileOutlined style={{ color: '#108ee9' }} />,\n            });\n        } else {\n            // archived\n            notification.success({\n                message: '恭喜達到目標訓練心率！',\n                description: `達到目標訓練心率（${targetHeartRate} BPM）。最新心率：${heartRate} BPM。`,\n            });\n        }\n    };\n\n    if (\n        !isInitRecordDone ||\n        !isInitPacketsDone ||\n        _.isEmpty(difficulty) ||\n        !isBuffersDone\n    ) {\n        return <div className={styles.container}>監控畫面初始化中...</div>;\n    }\n\n    const popoverContent = (\n        <>\n            <Input.Search\n                placeholder=\"下個心率是？\"\n                allowClear\n                enterButton=\"新增\"\n                size=\"Large\"\n                onChange={(e) => setNextHeartRateVal(e.target.value)}\n                onSearch={addRpmAndHeartRate}\n            />\n            <Button onClick={confirmFinish}>結束騎乘</Button>\n        </>\n    );\n\n    console.log(record.targetHeartRate);\n\n    // TODO:\n    // refactoring <table> to component\n    return (\n        <div className={styles.container}>\n            <audio id=\"audio\" src={other_notification_url} muted></audio>\n            <div className={styles.glass}>\n                {/* <h1>騎乘監控畫面</h1> */}\n                <div className={`${styles.col} ${styles.col1}`}>\n                    <span>騎乘者：{user?.name}</span>\n                    <span>騎乘者身體年齡：{user?.age}</span>\n                </div>\n                <div className={`${styles.col} ${styles.col2}`}>\n                    <div className={styles.stopWatchWrapper}>\n                        <span>騎乘進行了：</span>\n                        <StopWatch\n                            start={beginStopWatch}\n                            initialValue={getStopWatchInitialValue()}\n                        />\n                    </div>\n                    <caption>(開始於 {formatBeginWorkoutTime()})</caption>\n                </div>\n                <div className={`${styles.col} ${styles.col3}`}>\n                    <span>平均速率：20 <span className={styles.unit}>RPM</span></span>\n                    <span>平均心率：30 <span className={styles.unit}>BPM</span></span>\n                    <span>運動強度：23 <span className={styles.unit}>WATTS</span></span>\n                    <span>累積熱量消耗：12 <span className={styles.unit}>CAL</span></span>\n                </div>\n                <div className={`${styles.col} ${styles.difficulty}`}>\n                    <Popover\n                        content={popoverContent}\n                        placement=\"bottomRight\"\n                        title=\"更多操作\"\n                        trigger=\"click\"\n                    >\n                        <SettingOutlined width={'1em'} />\n                    </Popover>\n                    <span>騎乘關卡：{difficulty.name}</span>\n                    <span>目標心率：{difficulty.targetHeartRate}</span>\n                    <span>上限心率：{difficulty.upperLimitHeartRate}</span>\n                    <caption>\n                        分階警示心率：{getExactThresholdValue()[0]}/\n                        {getExactThresholdValue()[1]}/\n                        {getExactThresholdValue()[2]}\n                    </caption>\n                </div>\n                <div className={styles.mainCol}>\n                    <LineChart\n                        {...configLineChart(packets, record.targetHeartRate)}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default MonitoringWorkout;\n","const formatSeconds = (input) => {\n    const sec_num = parseInt(input, 10);\n    const hours = Math.floor(sec_num / 3600);\n    const minutes = Math.floor((sec_num - hours * 3600) / 60);\n    const seconds = sec_num - hours * 3600 - minutes * 60;\n\n    let formatted = '';\n    if (hours != 0) formatted += `${hours}時 `;\n    if (minutes != 0) formatted += `${minutes}分 `;\n    if (seconds != 0) formatted += `${seconds}秒`;\n\n    return formatted;\n};\n\nexport default formatSeconds;\n","const configLineChart = (data, targetHeartRate) => ({\n    data: [data, data],\n    xField: 'timeLabel',\n    yField: ['rpm', 'heartRate'],\n    yAxis: {\n        rpm: {\n            title: {\n                text: 'RPM',\n            },\n        },\n        heartRate: {\n            title: {\n                text: '心率',\n            },\n        },\n    },\n    // xAxis: {\n    //     title: {\n    //         text: '時間',\n    //     },\n    // },\n    legend: {\n        itemName: {\n            formatter: (text, item) => {\n                return item.value === 'rpm' ? 'RPM' : '心率';\n            },\n        },\n    },\n    meta: {\n        rpm: {\n            alias: 'RPM值 ',\n            formatter: (value) => {\n                return `${value} RPM`;\n            },\n        },\n        heartRate: {\n            alias: '心率',\n            formatter: (value) => {\n                return `${value} BPM`;\n                // return Number((v / 100).toFixed(1));\n            },\n        },\n    },\n    geometryOptions: [\n        {\n            geometry: 'line',\n            color: '#5B8FF9',\n            lineStyle: {\n                lineWidth: 2,\n                lineDash: [5, 5],\n            },\n        },\n        {\n            geometry: 'line',\n            color: '#5AD8A6',\n            smooth: true,\n            lineStyle: {\n                lineWidth: 4,\n                opacity: 0.5,\n            },\n            point: {\n                shape: 'circle',\n                size: 4,\n                style: {\n                    opacity: 0.5,\n                    stroke: '#5AD8A6',\n                    fill: '#fff',\n                },\n            },\n        },\n    ],\n    annotations: {\n        heartRate: [\n            {\n                type: 'line',\n                start: ['min', targetHeartRate], // TODO: change [138] to 目標心率\n                end: ['max', targetHeartRate], // TODO: change [138] to 目標心率\n                style: {\n                    lineWidth: 2,\n                    lineDash: [3, 3],\n                    stroke: '#F4664A',\n                },\n                text: {\n                    content: `目標心率(${targetHeartRate})`, // TODO: change [138] to 目標心率\n                    offsetY: -4,\n                    position: 'end',\n                    style: {\n                        textAlign: 'end',\n                    },\n                },\n            },\n        ],\n    },\n    tooltip: {\n        showTitle: true,\n    },\n});\n\nexport default configLineChart;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './styles.module.scss';\n\nconst StopWatch = ({ start, initialValue }) => {\n    const [time, setTime] = useState(initialValue);\n    const [miliDisplay, setMiliDisplay] = useState(0);\n\n    useEffect(() => {\n        let interval = null;\n        let displayInterval = null;\n\n        if (start) {\n            interval = setInterval(() => {\n                setTime((time) => time + 10);\n            }, 10);\n\n            displayInterval = setInterval(() => {\n                setMiliDisplay((miliDisplay) => {\n                    if (miliDisplay + 10 > 1000) return 0;\n                    else return miliDisplay + 10;\n                });\n            }, 10);\n        } else {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        }\n\n        return () => {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        };\n    }, [start]);\n\n    return (\n        <div className={styles.container}>\n            <span className=\"digits\">\n                {('0' + Math.floor(time / 3600000)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 60000) % 60)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 1000) % 60)).slice(-2)}.\n            </span>\n            <span className=\"digits mili-sec\">\n                {('0' + ((miliDisplay / 10) % 100)).slice(-2)}\n            </span>\n        </div>\n    );\n};\n\nStopWatch.propTypes = {\n    start: PropTypes.bool,\n    initialValue: PropTypes.number,\n};\n\nexport default StopWatch;\n","/* eslint-disable no-unreachable */\n/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n    Checkbox,\n    Typography,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { usersRef } from '../../services/firebase';\n\nimport Logo from '../../assets/images/page_icon.png';\nimport Leave_Icon from '../../assets/images/leave_icon.png';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst UserList = () => {\n    const navigate = useNavigate();\n    const [users, setUsers] = useState([]); // 全部使用者資料\n    const [filteredUser, setFilteredUser] = useState([]); // 過濾的使用者資料\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currUser, setCurrUser] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchUsers();\n        setIsDone(true);\n    };\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setUsers(users);\n        setFilteredUser(users);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredUser = users.filter((u) => u.name.includes(values.name));\n\n        searchBarRef.current.blur();\n\n        setFilteredUser(filteredUser);\n    };\n\n    const onCreateUser = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(usersRef, {\n                name: values.name,\n                idNumber: values.idNumber,\n                height: values.height,\n                weight: values.weight,\n                exerciseHeartRate: values.exerciseHeartRate,\n                exerciseResist: values.exerciseResist ?? null,\n                exerciseSpeed: values.exerciseSpeed ?? null,\n                medicine: values.medicine ?? false,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增會員！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            message.error(e?.message);\n        }\n    };\n\n    const onPatchUser = async () => {\n        try {\n            const values = await editForm.validateFields();\n\n            setLoading(true);\n            const currUserRef = doc(usersRef, currUser.id);\n            await updateDoc(currUserRef, {\n                height: values.height,\n                weight: values.weight,\n                exerciseHeartRate: values.exerciseHeartRate,\n                exerciseResist: values.exerciseResist ?? null,\n                exerciseSpeed: values.exerciseSpeed ?? null,\n                medicine: values.medicine ?? false,\n                note: values.note ?? null,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新騎乘者！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onDeleteUser = (id) => {\n        const theUser = users.find((u) => u.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除會員：${theUser.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，會員資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteUser(id),\n        });\n    };\n\n    const deleteUser = async (id) => {\n        const theUserRef = doc(usersRef, id);\n        await updateDoc(theUserRef, {\n            isDeleted: true,\n        });\n\n        await fetchUsers();\n\n        message.info('會員已刪除。');\n    };\n\n    const onViewCurrUserRecord = () => {\n        navigate(`${ROUTE_PATH.record_list}/${currUser.id}`);\n    };\n\n    const openViewModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n        setCurrUser(currUser);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n\n        editForm.setFieldsValue({\n            idNumber: currUser.idNumber,\n            name: currUser.name,\n            height: currUser.height,\n            weight: currUser.weight,\n            exerciseHeartRate: currUser.exerciseHeartRate,\n            exerciseResist: currUser.exerciseResist ?? null,\n            exerciseSpeed: currUser.exerciseSpeed ?? null,\n            medicine: currUser.medicine ?? false,\n            note: currUser.note ?? null,\n        });\n\n        setCurrUser(currUser);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const goTrainingWeekRecord = (targetUserId) => {\n        navigate(`${ROUTE_PATH.training_week_record}/${targetUserId}`);\n    };\n\n    return (\n        <div className={styles.container}>\n            <div\n                style={{\n                    background: `url(${Logo})`,\n                    width: 258,\n                    height: 56,\n                    left: 24,\n                    top: 20,\n                    position: 'absolute',\n                    backgroundSize: '100%',\n                    backgroundRepeat: 'no-repeat',\n                }}\n            />\n            <legend>醫生端</legend>\n            <div className={styles.innerContainer}>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: 84,\n                        height: 56,\n                        right: 24,\n                        top: 32,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div className={styles.cst_btn}>病歷資訊</div>\n                <input />\n                <div className={styles.horiLine} />\n                <caption>近期病例</caption>\n                <div className={styles.listWrapper}>\n                    {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].map(\n                        (e, i) => (\n                            <section key={i}>\n                                <span>2022/10/2</span>\n                                <span>王曉明</span>\n                                <span>1235</span>\n                                <span>左手中風</span>\n                                <span>復健5次</span>\n                                <div className={styles.item_btn}>詳情</div>\n                                <div className={styles.item_btn}>修改</div>\n                            </section>\n                        ),\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"管理會員資訊\"\n                        subTitle=\"會員資訊更新、訓練週數紀錄\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增會員\n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"會員姓名\" name=\"name\">\n                                    <Input\n                                        placeholder=\"輸入會員姓名查詢\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteUser,\n                            goTrainingWeekRecord,\n                        )}\n                        dataSource={filteredUser}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視騎乘者\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"會員編號\" span={3}>\n                                {currUser?.idNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"姓名\" span={3}>\n                                {currUser?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"身高\" span={3}>\n                                {currUser?.height} 公分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"體重\" span={3}>\n                                {currUser?.weight} 公斤\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動心率\" span={3}>\n                                {currUser?.exerciseHeartRate} BPM\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動阻力\" span={3}>\n                                {currUser?.exerciseResist}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動速度\" span={3}>\n                                {currUser?.exerciseSpeed}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"是否服用藥物\" span={3}>\n                                {currUser?.medicine ? '是' : '否'}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={3}>\n                                {currUser?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                        <Button\n                            type=\"primary\"\n                            onClick={onViewCurrUserRecord}\n                            style={{ marginLeft: '24px' }}\n                        >\n                            查看 {currUser?.name} 騎乘紀錄\n                        </Button>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增會員\"\n                        visible={createModalVisible}\n                        onOk={onCreateUser}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item\n                                label=\"會員編號\"\n                                name=\"idNumber\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員編號',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"會員編號為身分證字號\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"姓名\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上姓名',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"身高\"\n                                name=\"height\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員身高',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"體重\"\n                                name=\"weight\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員體重',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公斤'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動心率\"\n                                name=\"exerciseHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員運動心率',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動阻力\"\n                                name=\"exerciseResist\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動速度\"\n                                name=\"exerciseSpeed\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"medicine\"\n                                label=\"是否服用治療藥物\"\n                                valuePropName=\"checked\"\n                            >\n                                <Checkbox>\n                                    <Text type=\"secondary\">\n                                        （有服用請打勾）\n                                    </Text>\n                                </Checkbox>\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"治療藥物註記、其他需留意之處．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯會員\"\n                        visible={editModalVisible}\n                        onOk={onPatchUser}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item label=\"會員編號\">\n                                {currUser?.idNumber}\n                            </Form.Item>\n                            <Form.Item label=\"姓名\">{currUser?.name}</Form.Item>\n                            <Form.Item\n                                label=\"身高\"\n                                name=\"height\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員身高',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"體重\"\n                                name=\"weight\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員體重',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'公斤'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動心率\"\n                                name=\"exerciseHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上會員運動心率',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={250}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動阻力\"\n                                name=\"exerciseResist\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"運動速度\"\n                                name=\"exerciseSpeed\"\n                                // rules={[\n                                //     {\n                                //         required: true,\n                                //         message: '請填上姓名',\n                                //     },\n                                // ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"medicine\"\n                                label=\"是否服用治療藥物\"\n                                valuePropName=\"checked\"\n                            >\n                                <Checkbox>\n                                    <Text type=\"secondary\">\n                                        （有服用請打勾）\n                                    </Text>\n                                </Checkbox>\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"治療藥物註記、其他需留意之處．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (\n    openViewModal,\n    openEditModal,\n    onDeleteUser,\n    goTrainingWeekRecord,\n) => [\n    {\n        key: 'idNumber',\n        title: '會員編號',\n        dataIndex: 'idNumber',\n        // sorter: {\n        //     compare: (a, b) => a.age - b.age,\n        // },\n        width: 200,\n        render: (idNumber) => idNumber.slice(0, 4) + '...',\n    },\n    {\n        key: 'name',\n        title: '會員姓名',\n        dataIndex: 'name',\n        width: 200,\n    },\n    {\n        key: 'medicine',\n        title: '是否服用治療藥物',\n        dataIndex: 'medicine',\n        render: (isMedicine) => (isMedicine ? '是' : '否'),\n        width: 150,\n        align: 'center',\n    },\n    {\n        key: 'note',\n        title: '備註',\n        dataIndex: 'note',\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Button type=\"link\" onClick={() => goTrainingWeekRecord(id)}>\n                    前往訓練週數紀錄\n                </Button>\n            );\n        },\n        width: 150,\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看會員資訊\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯會員資訊\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteUser(id)}\n                            >\n                                刪除會員\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 8,\n        // offset:,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nexport default UserList;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n    Badge,\n    Typography,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { difficultiesRef } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst DifficulityList = () => {\n    const navigate = useNavigate();\n    const [difficulties, setDifficulties] = useState([]); // 全部難度\n    const [filteredDiffs, setFilteredDiffs] = useState([]); // 過濾難度\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currDiff, setCurrDiff] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // 顯示各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // forms changed\n    // 監聽上限數值變化，返回三階段警示心率\n    const [createFormChange, setCreateFormChange] = useState();\n    const [editFormChange, setEditFormChange] = useState();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchDiffs();\n        setIsDone(true);\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setDifficulties(difficulties);\n        setFilteredDiffs(difficulties);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredDiffs = difficulties.filter((d) =>\n            d.name.includes(values.name),\n        );\n\n        searchBarRef.current.blur();\n\n        setFilteredDiffs(filteredDiffs);\n    };\n\n    const onCreateDiff = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(difficultiesRef, {\n                name: values.name,\n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增難度！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onPatchDiff = async () => {\n        try {\n            const values = await editForm.validateFields();\n            // if pass\n            // [values] would be: {age: 12}\n\n            setLoading(true);\n            const currUserRef = doc(difficultiesRef, currDiff.id);\n            await updateDoc(currUserRef, {\n                // 名字不更新\n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新難度！`);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    const onDeleteDiff = (id) => {\n        const theDiff = difficulties.find((d) => d.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除難度：${theDiff.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，難度資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteDiff(id),\n        });\n    };\n\n    const deleteDiff = async (id) => {\n        const theDiffRef = doc(difficultiesRef, id);\n        await updateDoc(theDiffRef, {\n            isDeleted: true,\n        });\n\n        await fetchDiffs();\n\n        message.info('難度已刪除。');\n    };\n\n    const openViewModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n        const warnHRValues = getExactThresholdValue(\n            currDiff.upperLimitHeartRate,\n        );\n\n        setCurrDiff(currDiff);\n        setWarnHRValues(warnHRValues);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n\n        editForm.setFieldsValue({\n            targetHeartRate: currDiff.targetHeartRate,\n            targetWorkoutTime: currDiff.targetWorkoutTime,\n            upperLimitHeartRate: currDiff.upperLimitHeartRate,\n            note: currDiff.note,\n        });\n\n        setCurrDiff(currDiff);\n        setEditFormChange(currDiff);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrDiff();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        setCreateFormChange();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrDiff();\n        setEditFormChange();\n        closeAllModals();\n    };\n\n    const onFormValueChange = (changedVal, allVal, formKey) => {\n        if (formKey === 'create') setCreateFormChange(allVal);\n        if (formKey === 'edit') setEditFormChange(allVal);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"訓練難度資訊列表\"\n                        subTitle=\"管理難度資訊\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增難度\n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"難度名稱\" name=\"name\">\n                                    <Input\n                                        placeholder=\"輸入難度名稱查詢\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteDiff,\n                        )}\n                        dataSource={filteredDiffs}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視難度\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"難度名稱\" span={1}>\n                                {currDiff?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標騎乘時間\" span={1}>\n                                {currDiff?.targetWorkoutTime} 分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標心率數值\" span={2}>\n                                {currDiff?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"上限心率數值\" span={2}>\n                                {currDiff?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        警示心率門檻\n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{ fontSize: '0.8em' }}\n                                        >\n                                            依據上限心率數值計算\n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={2}>\n                                {currDiff?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增難度\"\n                        visible={createModalVisible}\n                        onOk={onCreateDiff}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'create')\n                            }\n                        >\n                            <Form.Item\n                                label=\"難度名稱\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填難度名稱',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標騎乘時間\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標騎乘時間',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標心率數值\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"上限心率數值\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上限心率數值',\n                                    },\n                                ]}\n                                tooltip=\"此數值用做計算分階警示心率\"\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"需調整阻力值至多少、騎乘時的其他建議．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯難度\"\n                        visible={editModalVisible}\n                        onOk={onPatchDiff}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'edit')\n                            }\n                        >\n                            <Form.Item label=\"難度名稱\">\n                                {currDiff?.name}\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標騎乘時間\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標騎乘時間',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'分'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"目標心率數值\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填目標心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"上限心率數值\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上限心率數值',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"備註\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"需調整阻力值至多少、騎乘時的其他建議．．．\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteDiff) => [\n    {\n        key: 'name',\n        title: '難度名稱',\n        dataIndex: 'name',\n    },\n    {\n        key: 'targetWorkoutTime',\n        title: '目標騎乘時間',\n        dataIndex: 'targetWorkoutTime',\n        sorter: {\n            compare: (a, b) => a.targetWorkoutTime - b.targetWorkoutTime,\n        },\n        width: 200,\n    },\n    {\n        key: 'targetHeartRate',\n        title: '目標心率數值',\n        dataIndex: 'targetHeartRate',\n        sorter: {\n            compare: (a, b) => a.targetHeartRate - b.targetHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'upperLimitHeartRate',\n        title: '上限心率數值',\n        dataIndex: 'upperLimitHeartRate',\n        sorter: {\n            compare: (a, b) => a.upperLimitHeartRate - b.upperLimitHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteDiff(id)}\n                            >\n                                刪除\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 6,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default DifficulityList;\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    collection,\n    doc,\n    getDoc,\n    getDocs,\n    updateDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport {\n    Layout,\n    Descriptions,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Space,\n} from 'antd';\nimport {\n    UserOutlined,\n    ExclamationCircleOutlined,\n    LineChartOutlined,\n    EditOutlined,\n    CheckOutlined,\n} from '@ant-design/icons';\nimport { StylesManager, Model } from 'survey-core';\nimport { Survey } from 'survey-react-ui';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\nimport formatWithMoment from '../../util/formatSeconds';\nimport wait from '../../util/wait';\nimport configLineChart from '../../util/configLineChart';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\n\nimport SixSurveyJson from '../../assets/surveys/sixSurvey.json';\nimport COPDSurveyJson from '../../assets/surveys/copdSurvey.json';\nimport SGRSurveyJson from '../../assets/surveys/sgrSurvey.json';\nimport BorgScaleSurveyJson from '../../assets/surveys/borgScaleSurvey.json';\nimport 'survey-core/defaultV2.css';\nStylesManager.applyTheme('defaultV2');\nconst sixSurveyJson = SixSurveyJson;\nconst copdSurveyJson = COPDSurveyJson;\nconst sgrSurveyJson = SGRSurveyJson;\nconst borgScaleSurveyJson = BorgScaleSurveyJson;\n\nconst mySurveyCss = {\n    text: {\n        controlDisabled: 'survey-input-disabled',\n    },\n    rating: {\n        selected: 'survey-rating-selected',\n    },\n};\n\nconst { Content } = Layout;\n\nconst FinishedWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [user, setUser] = useState();\n    const [record, setRecord] = useState();\n    const [packets, setPackets] = useState([]);\n    const [difficulty, setDifficulty] = useState();\n\n    const [isDone, setIsDone] = useState(false);\n\n    // doctor says...\n    const [therapist, setTherapist] = useState();\n    const [comment, setComment] = useState();\n\n    // 安全心律上線指數、心律變異指數、SPO2\n    const [safeHRIndex, setSafeHRIndex] = useState();\n    const [hrVariabilityIndex, setHRVariabilityIndex] = useState();\n    const [spo2, setSpo2] = useState();\n\n    // survey control\n    const [surveyModalVisible, setSurveyModalVisible] = useState(false);\n    const [curSurveyName, setCurSurveyName] = useState();\n    const [survey, setSurvey] = useState(new Model(sixSurveyJson));\n\n    // survey data\n    const [sixSurveyData, setSixSurveyData] = useState();\n    const [copdSurveyData, setCopdSurveyData] = useState(false);\n    const [sgrSurveyData, setSGRSurveyData] = useState(false);\n    const [borgScaleSurveyData, setBorgScaleSurveyData] = useState();\n\n    // survey UI related!!\n    survey.focusFirstQuestionAutomatic = false;\n    survey.showNavigationButtons = false;\n    survey.showCompletedPage = false;\n\n    // survey METHODS\n    const saveResults = (sender) => {\n        const results = sender.data;\n\n        console.log(sender.data);\n\n        if (curSurveyName === '六分鐘呼吸測驗') {\n            setSixSurveyData({ ...results, surveyCompleted: true });\n        }\n        if (curSurveyName === 'copd') {\n            setCopdSurveyData({ ...results, surveyCompleted: true });\n        }\n        if (curSurveyName === 'sgr') {\n            setSGRSurveyData({ ...results, surveyCompleted: true });\n            console.log(sgrSurveyData);\n        }\n        if (curSurveyName === 'borgScale') {\n            setBorgScaleSurveyData({ ...results, surveyCompleted: true });\n        }\n    };\n    survey.onComplete.add(saveResults);\n\n    const openSurveyModal = (surveyName) => {\n        if (surveyName === '六分鐘呼吸測驗') {\n            let survey = new Model(sixSurveyJson);\n\n            // 1. 填入表單預設值\n            // 2. 檢視問卷模式\n            // *** TODO: // 之後改成:\n            // ***       // 最後成績送出前 都可以進行問卷的修改\n            // ***       // 並加上提示: 送出後，問卷答案便無法修改的字樣\n            if (sixSurveyData) {\n                survey.data = sixSurveyData;\n                // survey.mode = 'display'; // 這個打開後，僅供檢視\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'copd') {\n            let survey = new Model(copdSurveyJson);\n\n            if (copdSurveyData) {\n                survey.data = copdSurveyData;\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'sgr') {\n            let survey = new Model(sgrSurveyJson);\n\n            if (sgrSurveyData) {\n                survey.data = sgrSurveyData;\n            }\n            setSurvey(survey);\n        }\n        if (surveyName === 'borgScale') {\n            let survey = new Model(borgScaleSurveyJson);\n\n            if (borgScaleSurveyData) {\n                survey.data = borgScaleSurveyData;\n            }\n            setSurvey(survey);\n        }\n\n        setCurSurveyName(surveyName);\n        setSurveyModalVisible(true);\n    };\n\n    const onOKSurvey = async () => {\n        let error = survey.hasErrors();\n        if (error) {\n            return;\n        }\n        survey.doComplete();\n        setSurveyModalVisible(false);\n    };\n\n    const onCancelSurvey = () => {\n        setSurveyModalVisible(false);\n    };\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        // record\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        if (\n            recordData.pairId != null ||\n            recordData.finishedWorkoutTime == null\n        ) {\n            alert('此筆紀錄尚未完成，將自動導回首頁！');\n            navigate(ROUTE_PATH.admin_dashbaord);\n            return;\n        }\n        const record = {\n            ...recordData,\n            beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n            finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n        };\n\n        // packets\n        const packets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            packets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        packets.sort((a, b) => a.time - b.time);\n        packets.splice(0, 1);\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        // therapist & comment\n        const therapist = record.therapist ?? '';\n        const comment = record.comment ?? '';\n\n        setUser(user);\n        setRecord(record);\n        setPackets(packets);\n        setDifficulty(difficulty);\n        setTherapist(therapist);\n        setComment(comment);\n        setIsDone(true);\n\n        console.log(user);\n        // 初始化 填入問卷基本資料\n        setSixSurveyData({\n            question2: user?.name,\n            question3: user?.idNumber,\n            question5: moment(record?.beginWorkoutTime).format('L'),\n            question9: user?.height + ' cm',\n            question10: user?.weight + ' kg',\n        });\n        setSGRSurveyData({\n            question1: {\n                text1: user?.idNumber,\n                text2: `${difficulty?.name} \\n (目標${difficulty?.targetHeartRate}BPM／${difficulty?.targetWorkoutTime}分)`,\n            },\n            question2: moment(record?.beginWorkoutTime).format('L'),\n        });\n        setBorgScaleSurveyData({\n            question2: `${difficulty?.name} \\n (目標${difficulty?.targetHeartRate}BPM／${difficulty?.targetWorkoutTime}分)`,\n        });\n    };\n\n    // 初始化 填入問卷基本資料\n    // const initSurveyData = () => {\n    //     console.log(record);\n    //     console.log(user);\n    //     console.log(difficulty);\n    //     setSixSurveyData({\n    //         question2: user?.name,\n    //         question3: user?.idNumber,\n    //         question5: moment(record?.beginWorkoutTime).format('L'),\n    //     });\n    //     setSGRSurveyData({\n    //         question1: {\n    //             text1: user?.idNumber,\n    //             text2: `${difficulty?.name}\\n(目標心率：${difficulty?.targetHeartRate}／目標騎乘時間：${difficulty?.targetWorkoutTime})`,\n    //         },\n    //         question2: moment(record?.beginWorkoutTime).format('L'),\n    //     });\n    // };\n\n    const onFormSubmit = async (e) => {\n        e.preventDefault();\n        if (_.isEmpty(therapist)) {\n            message.error('請填上治療師名稱');\n            return;\n        }\n\n        if (_.isEmpty(safeHRIndex)) {\n            message.error('請填上安全心律上線指數');\n            return;\n        }\n\n        if (_.isEmpty(hrVariabilityIndex)) {\n            message.error('請填上心律變異指數');\n            return;\n        }\n\n        if (_.isEmpty(spo2)) {\n            message.error('SPO2');\n            return;\n        }\n\n        if (\n            !(\n                sixSurveyData?.surveyCompleted &&\n                copdSurveyData?.surveyCompleted &&\n                sgrSurveyData?.surveyCompleted &&\n                borgScaleSurveyData?.surveyCompleted\n            )\n        ) {\n            message.error('尚有問卷未完成');\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將提交！',\n            icon: <ExclamationCircleOutlined />,\n            content: '確定資料填寫無誤？',\n            onOk: () => updateTherapistInfo(),\n        });\n    };\n\n    const updateTherapistInfo = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            therapist: therapist,\n            safeHRIndex: safeHRIndex,\n            hrVariabilityIndex: hrVariabilityIndex,\n            spo2: spo2,\n            comment: comment,\n            sixSurvey: sixSurveyData,\n            borgScaleSurvey: borgScaleSurveyData,\n            sgrSurvey: sgrSurveyData,\n            copdSurvey: copdSurveyData,\n        });\n\n        message.success({ content: '已提交！自動跳轉至選單畫面' });\n\n        await wait(1000);\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    const calWorkoutTime = () => {\n        const begin = moment(record.beginWorkoutTime);\n        const end = moment(record.finishedWorkoutTime);\n\n        const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n        console.log(diff);\n\n        const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n        const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n        const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n        let returnStr = '';\n\n        if (h != '00') returnStr += `${h} 小時 `;\n        returnStr += `${m} 分 ${s} 秒`;\n\n        return returnStr;\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"紀錄資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"已結束騎乘，本次騎乘數據統計\"\n                        subTitle=\"請至下方填寫資訊\"\n                    />\n\n                    <Descriptions bordered className={styles.descriptions}>\n                        <Descriptions.Item label=\"騎乘者姓名\" span={2}>\n                            {user?.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"騎乘者身體年齡\">\n                            {user?.age}\n                        </Descriptions.Item>\n\n                        <Descriptions.Item\n                            label={\n                                <div>\n                                    實際騎乘時間\n                                    <br />/ 目標騎乘時間\n                                </div>\n                            }\n                        >\n                            {calWorkoutTime()}／{difficulty.targetWorkoutTime}{' '}\n                            分\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"開始騎乘時間\">\n                            {record.beginWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"結束騎乘時間\">\n                            {record.finishedWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"平均速率／平均心率\">\n                            20 BPM／30 RPM\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"運動強度\">\n                            23 WATTS\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"累積入熱量消耗\">\n                            12 CAL\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"騎乘關卡\">\n                            {difficulty.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"目標心率\">\n                            {difficulty.targetHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"上限心率\">\n                            {difficulty.upperLimitHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"RPM＆心率統計圖\">\n                            <LineChart\n                                {...configLineChart(\n                                    packets,\n                                    record.targetHeartRate,\n                                )}\n                            />\n                        </Descriptions.Item>\n                    </Descriptions>\n\n                    <div className={styles.form}>\n                        <h3>請完成以下評估問卷</h3>\n                        <Space>\n                            <Button\n                                onClick={() =>\n                                    openSurveyModal('六分鐘呼吸測驗')\n                                }\n                                type=\"primary\"\n                                icon={\n                                    sixSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 六分鐘呼吸測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('copd')}\n                                type=\"primary\"\n                                icon={\n                                    copdSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 COPD 測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('sgr')}\n                                type=\"primary\"\n                                icon={\n                                    sgrSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 SGR 測驗\n                            </Button>\n                            <Button\n                                onClick={() => openSurveyModal('borgScale')}\n                                type=\"primary\"\n                                icon={\n                                    borgScaleSurveyData?.surveyCompleted ? (\n                                        <CheckOutlined />\n                                    ) : null\n                                }\n                            >\n                                進行 Borg Scale 測驗\n                            </Button>\n                        </Space>\n                    </div>\n                    <div className={styles.form}>\n                        <h3>請填寫以下資料，方可返回主選單</h3>\n\n                        <Input\n                            size=\"large\"\n                            placeholder=\"物理治療師名稱\"\n                            prefix={<UserOutlined />}\n                            value={therapist}\n                            onChange={(e) => {\n                                setTherapist(e.target.value);\n                            }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"SPO2\"\n                            prefix={<EditOutlined />}\n                            value={spo2}\n                            onChange={(e) => {\n                                setSpo2(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"安全心律上線指數\"\n                            prefix={<LineChartOutlined />}\n                            value={safeHRIndex}\n                            onChange={(e) => {\n                                setSafeHRIndex(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n                        <Input\n                            size=\"large\"\n                            placeholder=\"心律變異指數\"\n                            prefix={<LineChartOutlined />}\n                            value={hrVariabilityIndex}\n                            onChange={(e) => {\n                                setHRVariabilityIndex(e.target.value);\n                            }}\n                            style={{ marginTop: 16 }}\n                            required={true}\n                        />\n\n                        <Input.TextArea\n                            showCount\n                            placeholder=\"治療結果評語\"\n                            maxLength={50}\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            style={{ marginTop: 16 }}\n                        />\n\n                        <Button\n                            onClick={onFormSubmit}\n                            type=\"primary\"\n                            style={{ marginTop: 16 }}\n                        >\n                            提交，返回主選單\n                        </Button>\n                    </div>\n                </div>\n                <Modal\n                    width={'70vw'}\n                    className=\"surveyModalStyle\" // 如果要覆寫 style 要這樣做\n                    visible={surveyModalVisible}\n                    onOk={onOKSurvey}\n                    onCancel={onCancelSurvey}\n                    destroyOnClose\n                    okText=\"送出儲存\"\n                >\n                    <Survey\n                        id=\"surveyContainer\"\n                        model={survey}\n                        css={mySurveyCss}\n                    />\n                </Modal>\n            </Content>\n        </Layout>\n    );\n};\n\nexport default FinishedWorkout;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { getDocs, collection, query, where } from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Button,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Descriptions,\n    Select,\n    Space,\n} from 'antd';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport {\n    SearchOutlined,\n    CrownOutlined,\n    CheckOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\nimport { StylesManager, Model } from 'survey-core';\nimport { Survey } from 'survey-react-ui';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nimport SixSurveyJson from '../../assets/surveys/sixSurvey.json';\nimport COPDSurveyJson from '../../assets/surveys/copdSurvey.json';\nimport SGRSurveyJson from '../../assets/surveys/sgrSurvey.json';\nimport BorgScaleSurveyJson from '../../assets/surveys/borgScaleSurvey.json';\nimport 'survey-core/defaultV2.css';\nStylesManager.applyTheme('defaultV2');\nconst sixSurveyJson = SixSurveyJson;\nconst copdSurveyJson = COPDSurveyJson;\nconst sgrSurveyJson = SGRSurveyJson;\nconst borgScaleSurveyJson = BorgScaleSurveyJson;\n\nconst mySurveyCss = {\n    text: {\n        controlDisabled: 'survey-input-disabled',\n    },\n    rating: {\n        selected: 'survey-rating-selected',\n    },\n};\n\nconst { Content } = Layout;\nconst { Option } = Select;\n\nconst RecordList = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n    const [loading, setLoading] = useState(false); // 等待抓取 packets 資料\n\n    const [records, setReocrds] = useState([]);\n    const [filteredRecords, setFilteredReocrds] = useState([]);\n    const [currRecord, setCurrRecord] = useState();\n    const [currReocrdPackets, setCurrRecordPackets] = useState();\n\n    // patched Data\n    const [users, setUsers] = useState(); // 把使用者資料灌回去 records 中\n    const [difficulties, setDifficulties] = useState([]); // 把難度資料灌回去 records 中\n\n    // forms\n    const [searchForm] = Form.useForm();\n\n    // modals\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n\n    // survey control\n    const [surveyModalVisible, setSurveyModalVisible] = useState(false);\n    const [curSurveyName, setCurSurveyName] = useState();\n    const [survey, setSurvey] = useState(new Model(sixSurveyJson));\n\n    // survey UI related!!\n    survey.focusFirstQuestionAutomatic = false;\n    survey.showNavigationButtons = false;\n    survey.showCompletedPage = false;\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const records = await fetchRecords();\n        const difficulties = await fetchDiffs();\n\n        patchRecordsWithUserAndDiff({ users, records, difficulties });\n    };\n\n    const fetchUsers = async () => {\n        const users = [];\n        const querySnapshot = await getDocs(usersRef);\n        querySnapshot.forEach((doc) => {\n            if (!doc.data()?.isDeleted) {\n                users.push({\n                    ...doc.data(),\n                    id: doc.id,\n                });\n            }\n        });\n\n        return users;\n    };\n\n    const fetchRecords = async () => {\n        const records = [];\n        const querySnapshot = await getDocs(recordsRef);\n        querySnapshot.forEach((doc) => {\n            const recordData = doc.data();\n            if (\n                recordData.beginWorkoutTime != null &&\n                recordData.finishedWorkoutTime != null\n            ) {\n                records.push({\n                    ...recordData,\n                    id: doc.id,\n                    beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n                    finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n                });\n            }\n        });\n\n        records.sort(\n            (a, b) =>\n                b.finishedWorkoutTime.getTime() -\n                a.finishedWorkoutTime.getTime(),\n        );\n\n        return records;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const patchRecordsWithUserAndDiff = ({ users, records, difficulties }) => {\n        // patch with key [userData]\n        // patch with key [difficultyData]\n\n        const patchedRecords = records.map((record) => {\n            const userData = users.find((u) => u.id === record.user);\n            const difficultyData = difficulties.find(\n                (d) => d.id === record.difficulty,\n            );\n\n            return {\n                ...record,\n                userData,\n                difficultyData,\n            };\n        });\n\n        setReocrds(patchedRecords);\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n\n        if (params.userId !== '123') {\n            const filteredRecords = patchedRecords.filter(\n                (r) => r.user === params.userId,\n            );\n            setFilteredReocrds(filteredRecords);\n            searchForm.setFieldsValue({ user: params.userId });\n        } else {\n            setFilteredReocrds(patchedRecords);\n        }\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n\n        let filteredRecords = records.filter((r) => {\n            if (_.isEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return true;\n            }\n            if (_.isNotEmpty(values.user) && _.isNotEmpty(values.difficulty)) {\n                return (\n                    r.user === values.user && r.difficulty === values.difficulty\n                );\n            }\n            if (_.isNotEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return r.user === values.user;\n            }\n            if (_.isNotEmpty(values.difficulty) && _.isEmpty(values.user)) {\n                console.log('here');\n                return r.difficulty === values.difficulty;\n            }\n        });\n\n        setFilteredReocrds(filteredRecords);\n    };\n\n    const openViewModal = async (id) => {\n        setViewModalVisible(true);\n        setLoading(true);\n\n        const currRecord = records.find((r) => r.id === id);\n        const packetsRef = collection(recordsRef, id, 'packets');\n\n        // packets\n        const currReocrdPackets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            currReocrdPackets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        currReocrdPackets.sort((a, b) => a.time - b.time);\n        currReocrdPackets.splice(0, 1);\n\n        setCurrRecord(currRecord);\n        setCurrRecordPackets(currReocrdPackets);\n\n        setLoading(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrRecord();\n        setCurrRecordPackets([]);\n        setViewModalVisible(false);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const openSurveyModal = (surveyName) => {\n        if (surveyName === '六分鐘呼吸測驗') {\n            let survey = new Model(sixSurveyJson);\n\n            survey.data = currRecord.sixSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'copd') {\n            let survey = new Model(copdSurveyJson);\n\n            survey.data = currRecord.copdSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'sgr') {\n            let survey = new Model(sgrSurveyJson);\n\n            survey.data = currRecord.sgrSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n        if (surveyName === 'borgScale') {\n            let survey = new Model(borgScaleSurveyJson);\n\n            survey.data = currRecord.borgScaleSurvey;\n            survey.mode = 'display';\n\n            setSurvey(survey);\n        }\n\n        setCurSurveyName(surveyName);\n        setSurveyModalVisible(true);\n    };\n\n    const onCancelSurvey = () => {\n        setSurveyModalVisible(false);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"騎乘紀錄列表\"\n                        subTitle=\"查看騎乘紀錄資訊\"\n                        onBack={goDashboard}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={10}>\n                                <Form.Item label=\"騎乘者名稱\" name=\"user\">\n                                    <Select placeholder=\"選擇騎乘者\" allowClear>\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={10}>\n                                <Form.Item label=\"騎乘關卡\" name=\"difficulty\">\n                                    <Select\n                                        placeholder=\"選擇關卡資訊\"\n                                        allowClear\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}・\n                                                {diff.targetWorkoutTime}{' '}\n                                                分鐘・目標{' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        查詢\n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(openViewModal)}\n                        dataSource={filteredRecords}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視紀錄\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={'90vw'}\n                    >\n                        {loading ? (\n                            '資料讀取中...'\n                        ) : (\n                            <>\n                                <Descriptions\n                                    bordered\n                                    className={styles.descriptions}\n                                >\n                                    <Descriptions.Item\n                                        label=\"騎乘者姓名\"\n                                        span={2}\n                                    >\n                                        {currRecord?.userData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"騎乘者會員編號\"\n                                        span={2}\n                                    >\n                                        {currRecord?.userData?.idNumber}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label={\n                                            <div>\n                                                實際騎乘時間\n                                                <br />/ 目標騎乘時間\n                                            </div>\n                                        }\n                                    >\n                                        {calWorkoutTime(currRecord)}／\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetWorkoutTime\n                                        }{' '}\n                                        分\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"開始騎乘時間\">\n                                        {currRecord?.beginWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"結束騎乘時間\">\n                                        {currRecord?.finishedWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"平均速率／平均心率\">\n                                        20 BPM／30 RPM\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"運動強度\">\n                                        23 WATTS\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"累積入熱量消耗\">\n                                        12 CAL\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"騎乘關卡\">\n                                        {currRecord?.difficultyData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"目標心率\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"上限心率\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.upperLimitHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"RPM＆心率統計圖\"\n                                        span={3}\n                                    >\n                                        <LineChart\n                                            {...configLineChart(\n                                                currReocrdPackets,\n                                                currRecord?.targetHeartRate,\n                                            )}\n                                        />\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"物理治療師名稱\"\n                                        span={3}\n                                    >\n                                        {currRecord?.therapist}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"安全心律上線指數\"\n                                        span={3}\n                                    >\n                                        {currRecord?.safeHRIndex}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"心律變異指數\"\n                                        span={3}\n                                    >\n                                        {currRecord?.hrVariabilityIndex}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"治療結果評語\"\n                                        span={3}\n                                    >\n                                        {currRecord?.comment}\n                                    </Descriptions.Item>\n                                </Descriptions>\n                                <Space style={{ marginLeft: '24px' }}>\n                                    <Button\n                                        onClick={() =>\n                                            openSurveyModal('六分鐘呼吸測驗')\n                                        }\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 六分鐘呼吸測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() => openSurveyModal('copd')}\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 COPD 測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() => openSurveyModal('sgr')}\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 SGR 測驗結果\n                                    </Button>\n                                    <Button\n                                        onClick={() =>\n                                            openSurveyModal('borgScale')\n                                        }\n                                        type=\"primary\"\n                                        icon={<CheckOutlined />}\n                                    >\n                                        查看 Borg Scale 測驗結果\n                                    </Button>\n                                </Space>\n                            </>\n                        )}\n                    </Modal>\n                    <Modal\n                        width={'70vw'}\n                        className=\"surveyModalStyle\" // 如果要覆寫 style 要這樣做\n                        visible={surveyModalVisible}\n                        footer={null} // no [Ok], [Cancel] button\n                        destroyOnClose\n                        onCancel={onCancelSurvey}\n                    >\n                        <Survey\n                            id=\"surveyContainer\"\n                            model={survey}\n                            css={mySurveyCss}\n                        />\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal) => [\n    {\n        key: 'id',\n        title: '紀錄ID',\n        dataIndex: 'id',\n        width: 100,\n        render: (id) => `${id.slice(0, 5)}....`,\n    },\n    {\n        key: 'isGT30',\n        title: '長途騎乘',\n        width: 100,\n        render: (currRecord) => {\n            if (isWorkoutTimeGT30(currRecord)) {\n                return (\n                    <CrownOutlined\n                        style={{\n                            fontSize: '1.5em',\n                            color: '#fb8b24',\n                        }}\n                    />\n                );\n            } else {\n                return ' ';\n            }\n        },\n        align: 'center',\n    },\n    {\n        key: 'userData',\n        title: '騎乘者姓名',\n        dataIndex: 'userData',\n        width: 200,\n        render: (userData) => userData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '騎乘關卡',\n        dataIndex: 'difficultyData',\n        width: 200,\n        render: (difficultyData) => difficultyData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '騎乘開始時間',\n        dataIndex: 'beginWorkoutTime',\n        width: 200,\n        render: (beginWorkoutTime) => beginWorkoutTime.toLocaleString(),\n    },\n    {\n        key: 'beginWorkoutTime',\n        title: '騎乘時間',\n        width: 200,\n        render: (currRecord) => calWorkoutTime(currRecord),\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => (\n            <Button type=\"link\" onClick={() => openViewModal(id)}>\n                查看\n            </Button>\n        ),\n        width: 150,\n    },\n];\n\nconst calWorkoutTime = (currRecord) => {\n    if (_.isEmpty(currRecord)) {\n        return;\n    }\n    const begin = moment(currRecord?.beginWorkoutTime);\n    const end = moment(currRecord?.finishedWorkoutTime);\n\n    const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n    const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n    const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n    const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n    let returnStr = '';\n\n    if (h != '00') returnStr += `${h} 小時 `;\n    returnStr += `${m} 分 ${s} 秒`;\n\n    return returnStr;\n};\n\nconst isWorkoutTimeGT30 = (currRecord) => {\n    if (_.isEmpty(currRecord)) {\n        return;\n    }\n    const begin = moment(currRecord?.beginWorkoutTime);\n    const end = moment(currRecord?.finishedWorkoutTime);\n\n    const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n    const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2); // 分\n\n    return parseInt(m) >= 30;\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nexport default RecordList;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    getDoc,\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n    collection,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Table,\n    Space,\n    Descriptions,\n    Popover,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport styles from './styles.module.scss';\n\nimport { usersRef } from '../../services/firebase';\n\nconst { Content } = Layout;\n\nconst TrainingWeekRecord = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n    const [user, setUser] = useState(); // 該會員資料\n    const [records, setRecords] = useState([]); // 該會員全部的訓練週數資料\n    const [isDone, setIsDone] = useState(false);\n\n    const [currRecord, setCurrRecord] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal 中的 [OK] 按鈕 loading\n\n    // forms\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchUser();\n        await fetchRecords();\n        setIsDone(true);\n    };\n\n    const fetchUser = async () => {\n        const userPath = doc(usersRef, params.userId);\n\n        const userSnapshot = await getDoc(userPath);\n        const user = userSnapshot.data();\n\n        setUser(user);\n    };\n\n    const fetchRecords = async () => {\n        const recordsPath = collection(\n            usersRef,\n            params.userId,\n            'trainingWeekRecords',\n        );\n        const q = query(recordsPath, where('isDeleted', '!=', true));\n\n        const records = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            records.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        console.log(records);\n\n        setRecords(records);\n    };\n\n    const onCreateUser = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            console.log(values);\n\n            setLoading(true);\n            const recordsPath = collection(\n                usersRef,\n                params.userId,\n                'trainingWeekRecords',\n            );\n            await addDoc(recordsPath, {\n                weekNumber: values.weekNumber,\n                content: values.content,\n                isDeleted: false,\n            });\n\n            await fetchRecords();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(`成功新增週次紀錄！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            message.error(e?.message);\n        }\n    };\n\n    const onPatchRecord = async () => {\n        try {\n            const values = await editForm.validateFields();\n\n            setLoading(true);\n            const currRecordPath = doc(\n                usersRef,\n                params.userId,\n                'trainingWeekRecords',\n                currRecord.id,\n            );\n            await updateDoc(currRecordPath, {\n                content: values.content,\n            });\n\n            await fetchRecords();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(`成功更新騎乘者！`);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onDeleteRecord = (id) => {\n        const theRecord = records.find((u) => u.id === id);\n\n        Modal.confirm({\n            title: `確定要刪除週次：${theRecord.weekNumber}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '刪除後，週次訓練資料將無法返回。',\n            okText: '刪除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk: () => deleteRecord(id),\n        });\n    };\n\n    const deleteRecord = async (id) => {\n        const currRecordPath = doc(\n            usersRef,\n            params.userId,\n            'trainingWeekRecords',\n            id,\n        );\n        await updateDoc(currRecordPath, {\n            isDeleted: true,\n        });\n\n        await fetchRecords();\n\n        message.info('週次紀錄已刪除。');\n    };\n\n    const openViewModal = (id) => {\n        const currRecord = records.find((u) => u.id === id);\n        setCurrRecord(currRecord);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currRecord = records.find((u) => u.id === id);\n\n        editForm.setFieldsValue({\n            weekNumber: currRecord.weekNumber,\n            content: currRecord.content,\n        });\n\n        setCurrRecord(currRecord);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrRecord();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrRecord();\n        closeAllModals();\n    };\n\n    const goBack = () => {\n        navigate(-1);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title={`${user.name}的訓練週數紀錄`}\n                        // subTitle={`管理${user.name}的訓練週數紀錄`}\n                        onBack={goBack}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                新增訓練週次紀錄\n                            </Button>,\n                        ]}\n                    />\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteRecord,\n                        )}\n                        dataSource={records}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"檢視週次紀錄\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width=\"70vw\"\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"週次\" span={3}>\n                                {currRecord?.weekNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"紀錄內容\" span={3}>\n                                {currRecord?.content}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    {/* 新增 Modal */}\n                    <Modal\n                        title=\"新增週次紀錄\"\n                        visible={createModalVisible}\n                        onOk={onCreateUser}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                        width=\"70vw\"\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item\n                                label=\"週次\"\n                                name=\"weekNumber\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填上週次',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"輸入第幾週\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"紀錄內容\"\n                                name=\"content\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '請填寫紀錄內容',\n                                    },\n                                ]}\n                            >\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"訓練情形、特殊狀況等等．．．\"\n                                    maxLength={300}\n                                    autoSize={{ minRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"編輯週次紀錄\"\n                        visible={editModalVisible}\n                        onOk={onPatchRecord}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                        width=\"70vw\"\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item label=\"週數\">\n                                {currRecord?.weekNumber}\n                            </Form.Item>\n                            <Form.Item label=\"紀錄內容\" name=\"content\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"訓練情形、特殊狀況等等．．．\"\n                                    maxLength={300}\n                                    autoSize={{ minRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteUser) => [\n    {\n        key: 'weekNumber',\n        title: '週次',\n        dataIndex: 'weekNumber',\n        width: 200,\n    },\n    {\n        key: 'content',\n        title: '紀錄內容',\n        dataIndex: 'content',\n        render: (content) => {\n            if (content.length > 100) {\n                return content.slice(0, 97) + '...';\n            }\n            return content;\n        },\n    },\n    {\n        key: 'id',\n        title: '',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                查看週次紀錄\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                編輯週次紀錄\n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteUser(id)}\n                            >\n                                刪除週次紀錄\n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 7,\n        // offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default TrainingWeekRecord;\n","/* eslint-disable no-unreachable */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport Leave_Icon from '../../assets/images/leave_icon.png';\nimport Logo from '../../assets/images/page_icon.png';\nimport CustomModal from '../../components/CustomModal';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst PersonnelInfo = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    //\n    /// 針對中風復健新增的內容\n    ////\n    /////\n    const [open, setOpen] = useState(false);\n    //\n    ///\n    ////\n    /////\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goGame1Direct = async () => {\n        navigate(ROUTE_PATH.game1_direct);\n    };\n\n    const goGame2Direct = async () => {\n        navigate(ROUTE_PATH.game2_direct);\n    };\n\n    const goGame3Direct = async () => {\n        navigate(ROUTE_PATH.game3_direct);\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    ///\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        console.log(e);\n        setOpen(true);\n    };\n\n    return (\n        <div className={styles.container}>\n            <div\n                style={{\n                    background: `url(${Logo})`,\n                    width: 258,\n                    height: 56,\n                    left: 24,\n                    top: 20,\n                    position: 'absolute',\n                    backgroundSize: '100%',\n                    backgroundRepeat: 'no-repeat',\n                }}\n            />\n            <legend>醫生端</legend>\n            <div className={styles.innerContainer}>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: 84,\n                        height: 56,\n                        right: 24,\n                        top: 12,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <h1>基本資料填寫</h1>\n                <form className={styles.grid_wrapper} onSubmit={onSubmit}>\n                    <label htmlFor=\"name\" className={`${styles.name}`}>\n                        <span className={styles.labelWrapper}>姓名</span>\n                        <input type=\"text\" />\n                    </label>\n                    <label className={`${styles.birth}`}>\n                        <span className={styles.labelWrapper}>生日</span>\n                        <input type=\"text\" />\n                    </label>\n                    <label className={`${styles.age}`}>\n                        <span className={styles.labelWrapper}>年齡</span>\n                        <input type=\"text\" />\n                    </label>\n                    <label className={`${styles.height}`}>\n                        <span className={styles.labelWrapper}>身高</span>\n                        <input type=\"text\" />\n                    </label>\n                    <label className={`${styles.weight}`}>\n                        <span className={styles.labelWrapper}>體重</span>\n                        <input type=\"text\" />\n                    </label>\n                    <label className={`${styles.id}`}>\n                        <span className={styles.labelWrapper}>身分證字號</span>\n                        <input type=\"text\" />\n                    </label>\n                    <label className={`${styles.record}`}>\n                        <span className={styles.labelWrapper}>病例狀況</span>\n                        <input type=\"text\" />\n                    </label>\n                    <input\n                        type=\"submit\"\n                        className={styles.cst_btn}\n                        value=\"確認送出\"\n                    />\n                </form>\n                {/* <div className={styles.cst_btn} onClick={() => setOpen(true)}>\n                    確認送出\n                </div> */}\n            </div>\n            <CustomModal\n                open={open}\n                onClose={() => setOpen(false)}\n                overlayColour=\"rgba(243, 151, 0, 50%)\"\n            >\n                <div className={styles.modal_btn} onClick={goGame1Direct}>\n                    圓柱練習\n                </div>\n                <div className={styles.modal_btn} onClick={goGame2Direct}>\n                    多元練習\n                </div>\n                <div className={styles.modal_btn} onClick={goGame3Direct}>\n                    細圓柱練習\n                </div>\n            </CustomModal>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"準備騎乘！進行騎乘設定\"\n                        subTitle=\"選擇騎乘者及關卡資訊\"\n                        onBack={goDashboard}\n                    />\n\n                    <Form {...formLayout} form={form} style={{ marginTop: 36 }}>\n                        <Form.Item\n                            name=\"user\"\n                            label=\"騎乘者\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇騎乘者',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇騎乘者\"\n                                        onChange={onUserChange}\n                                        disabled={pairId}\n                                    >\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedUser}\n                                        onClick={openUserModal}\n                                    >\n                                        查看騎乘者資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"difficulty\"\n                            label=\"關卡資訊\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '請選擇關卡資訊',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"選擇關卡資訊\"\n                                        onChange={onDiffChange}\n                                        disabled={pairId}\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}・\n                                                {diff.targetWorkoutTime}{' '}\n                                                分鐘・目標{' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedDiff}\n                                        onClick={openDiffModal}\n                                    >\n                                        查看關卡資訊\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={confirmUserAndDiff}\n                                disabled={pairId}\n                            >\n                                下一步，生成配對碼\n                            </Button>\n                        </Form.Item>\n                    </Form>\n\n                    <Modal\n                        title=\"檢視騎乘者\"\n                        visible={userModalVis}\n                        onCancel={closeUserModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"會員編號\" span={3}>\n                                {selectedUserData?.idNumber}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"姓名\" span={3}>\n                                {selectedUserData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"身高\" span={3}>\n                                {selectedUserData?.height} 公分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"體重\" span={3}>\n                                {selectedUserData?.weight} 公斤\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動心率\" span={3}>\n                                {selectedUserData?.exerciseHeartRate} BPM\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動阻力\" span={3}>\n                                {selectedUserData?.exerciseResist}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"運動速度\" span={3}>\n                                {selectedUserData?.exerciseSpeed}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"是否服用藥物\" span={3}>\n                                {selectedUserData?.medicine ? '是' : '否'}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={3}>\n                                {selectedUserData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    <Modal\n                        title=\"檢視難度\"\n                        visible={diffModalVis}\n                        onCancel={closeDiffModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"難度名稱\" span={1}>\n                                {selectedDiffData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標騎乘時間\" span={1}>\n                                {selectedDiffData?.targetWorkoutTime} 分\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"目標心率數值\" span={2}>\n                                {selectedDiffData?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"上限心率數值\" span={2}>\n                                {selectedDiffData?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        警示心率門檻\n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{\n                                                fontSize: '0.8em',\n                                            }}\n                                        >\n                                            依據上限心率數值計算\n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"備註\" span={2}>\n                                {selectedDiffData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n\n                    {pairId && (\n                        <>\n                            <Divider\n                                dashed={true}\n                                style={{\n                                    minWidth: '90%',\n                                    width: '90%',\n                                    borderWidth: '2px',\n                                    margin: 'auto',\n                                    marginRight: 'auto',\n                                    marginTop: '4em',\n                                    marginBottom: '4em',\n                                }}\n                            />\n                            <Form {...formLayout}>\n                                <Form.Item\n                                    label={\n                                        <>\n                                            配對碼\n                                            <Popover\n                                                content={simulateAppCotent}\n                                                placement=\"bottomRight\"\n                                                title=\"更多操作\"\n                                                trigger=\"click\"\n                                            >\n                                                <SettingOutlined\n                                                    width={'1em'}\n                                                />\n                                            </Popover>\n                                        </>\n                                    }\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                >\n                                    <div className={styles.pairIdWrapper}>\n                                        {pairId.split('').map((c, i) => (\n                                            <pre key={c + i}>{c}</pre>\n                                        ))}\n\n                                        {/* <Countdown\n                                            title=\"有效時間\"\n                                            value={Date.now() + 1000 * 60 * 10}\n                                            onFinish={onDeadlineExpired}\n                                        /> */}\n                                        {pairDeadline && (\n                                            <Countdown\n                                                title=\"有效時間\"\n                                                value={pairDeadline}\n                                                onFinish={onDeadlineExpired}\n                                            />\n                                        )}\n                                    </div>\n                                </Form.Item>\n                                {!isAppConnected && (\n                                    <Form.Item\n                                        label=\" \"\n                                        colon={false}\n                                        style={{ marginTop: '3em' }}\n                                    >\n                                        <Spin\n                                            indicator={\n                                                <LoadingOutlined\n                                                    style={{\n                                                        fontSize: 24,\n                                                        marginRight: '1em',\n                                                    }}\n                                                    spin\n                                                />\n                                            }\n                                        />\n                                        等待配對中...\n                                    </Form.Item>\n                                )}\n\n                                <Form.Item\n                                    label=\" \"\n                                    colon={false}\n                                    style={{ marginTop: '5em' }}\n                                >\n                                    <Button\n                                        onClick={goMonitoring}\n                                        type={\n                                            isAppConnected\n                                                ? 'primary'\n                                                : 'dashed'\n                                        }\n                                        disabled={!isAppConnected}\n                                        icon={\n                                            isAppConnected && (\n                                                <ArrowRightOutlined />\n                                            )\n                                        }\n                                        size=\"large\"\n                                    >\n                                        前往監視畫面\n                                    </Button>\n                                </Form.Item>\n                            </Form>\n                        </>\n                    )}\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default PersonnelInfo;\n","export default __webpack_public_path__ + \"static/media/game_dir_leave.68fe02f8.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/game1_dir_img.e3fe7d26.png\";","/* eslint-disable no-unreachable */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport Leave_Icon from '../../assets/images/game_dir_leave.png';\nimport Home_Icon from '../../assets/images/game_dir_home.png';\nimport Dir_Img from '../../assets/images/game1_dir_img.png';\nimport Logo from '../../assets/images/page_icon.png';\nimport CustomModal from '../../components/CustomModal';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst Game1Direct = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    //\n    /// 針對中風復健新增的內容\n    ////\n    /////\n    const [open, setOpen] = useState(false);\n    //\n    ///\n    ////\n    /////\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goGameMoni = () => {\n        navigate(ROUTE_PATH.game1_monitoring);\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    ///\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        console.log(e);\n    };\n\n    return (\n        <div className={styles.container}>\n            <legend>醫生端</legend>\n            <div className={styles.leftContainer}>\n                <div className={styles.subject}>圓柱關卡</div>\n                <h2>請在遊戲開始計時期間將圓柱放入對應色彩的孔洞中!</h2>\n                <h3>\n                    開始遊戲前請先套商對應套子開始遊戲前請先套上該關卡對應套子!\n                </h3>\n                <div\n                    style={{\n                        background: `url(${Dir_Img})`,\n                        width: 500,\n                        height: '54%',\n                        bottom: 50,\n                        right: 12,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n            <div className={styles.rightContainer}>\n                <div className={styles.start} onClick={goGameMoni}>\n                    開始玩\n                </div>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Home_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default Game1Direct;\n","export default __webpack_public_path__ + \"static/media/game2_dir_img.bd83fc6b.png\";","/* eslint-disable no-unreachable */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport Leave_Icon from '../../assets/images/game_dir_leave.png';\nimport Home_Icon from '../../assets/images/game_dir_home.png';\nimport Dir_Img from '../../assets/images/game2_dir_img.png';\nimport Logo from '../../assets/images/page_icon.png';\nimport CustomModal from '../../components/CustomModal';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst Game2Direct = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    //\n    /// 針對中風復健新增的內容\n    ////\n    /////\n    const [open, setOpen] = useState(false);\n    //\n    ///\n    ////\n    /////\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goGameMoni = () => {\n        navigate(ROUTE_PATH.game2_monitoring);\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    ///\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        console.log(e);\n    };\n\n    return (\n        <div className={styles.container}>\n            <legend>醫生端</legend>\n            <div className={styles.leftContainer}>\n                <div className={styles.subject}>多元關卡</div>\n                <h2>請在遊戲開始計時期間將圖形放入對應色彩的孔洞中!</h2>\n                <h3>\n                    開始遊戲前請先套上對應套子開始遊戲前請先套上該關卡對應套子!\n                </h3>\n                <div\n                    style={{\n                        background: `url(${Dir_Img})`,\n                        width: 500,\n                        height: '54%',\n                        bottom: 50,\n                        right: 12,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n            <div className={styles.rightContainer}>\n                <div className={styles.start} onClick={goGameMoni}>\n                    開始玩\n                </div>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Home_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default Game2Direct;\n","export default __webpack_public_path__ + \"static/media/game3_dir_img.036bc946.png\";","/* eslint-disable no-unreachable */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport Leave_Icon from '../../assets/images/game_dir_leave.png';\nimport Home_Icon from '../../assets/images/game_dir_home.png';\nimport Dir_Img from '../../assets/images/game3_dir_img.png';\nimport Logo from '../../assets/images/page_icon.png';\nimport CustomModal from '../../components/CustomModal';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst Game3Direct = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    //\n    /// 針對中風復健新增的內容\n    ////\n    /////\n    const [open, setOpen] = useState(false);\n    //\n    ///\n    ////\n    /////\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    ///\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        console.log(e);\n    };\n\n    return (\n        <div className={styles.container}>\n            <legend>醫生端</legend>\n            <div className={styles.leftContainer}>\n                <div className={styles.subject} onClick={goDashboard}>\n                    細圓柱關卡\n                </div>\n                <h2>請在遊戲開始計時期間將圓柱放入對應色彩的孔洞中!</h2>\n                <h3>\n                    開始遊戲前請先套商對應套子開始遊戲前請先套上該關卡對應套子!\n                </h3>\n                <div\n                    style={{\n                        background: `url(${Dir_Img})`,\n                        width: 500,\n                        height: '54%',\n                        bottom: 50,\n                        right: 12,\n                        position: 'absolute',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n            <div className={styles.rightContainer}>\n                <div className={styles.start} onClick={goDashboard}>\n                    開始玩\n                </div>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Home_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default Game3Direct;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\n\nconst ShapeCircle = ({ width = '70%', height = '70%', fill }) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 172 172\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <circle\n            cx=\"86\"\n            cy=\"86\"\n            r=\"86\"\n            transform=\"rotate(-90 86 86)\"\n            fill={fill}\n        />\n    </svg>\n);\n\nexport default ShapeCircle;\n","/* eslint-disable no-unreachable */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport Icon from '@ant-design/icons';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport Leave_Icon from '../../assets/images/game_dir_leave.png';\nimport Home_Icon from '../../assets/images/game_dir_home.png';\nimport Logo from '../../assets/images/dashboard_icon.png';\nimport CustomModal from '../../components/CustomModal';\n\nimport ShapeCircle from '../../components/ShapeCircle';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst Game1Moni = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    //\n    /// 針對中風復健新增的內容\n    ////\n    /////\n    const [open, setOpen] = useState(false);\n    //\n    ///\n    ////\n    /////\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goGameDirect = async () => {\n        navigate(ROUTE_PATH.game1_direct);\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    ///\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        console.log(e);\n    };\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.leftContainer}>\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n            </div>\n            <div className={styles.rightContainer}>\n                <section>\n                    <caption>計時</caption>\n                    <div className={styles.contentTime}>1:59</div>\n                </section>\n                <section>\n                    <caption>分數</caption>\n                    <div className={styles.contentScore}>5</div>\n                </section>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Logo})`,\n                        width: '100%',\n                        height: 111,\n                        flexGrow: 1,\n                        marginTop: '30%',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div\n                    onClick={goGameDirect}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Home_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default Game1Moni;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\n\nconst ShapeHexagon = ({ width = '70%', height = '70%', fill }) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 193 217\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path\n            d=\"M0.470208 64.5294C0.470207 57.384 4.28219 50.7815 10.4702 47.2088L86.5474 3.28565C92.7354 -0.287008 100.359 -0.287012 106.547 3.28564L182.625 47.2088C188.813 50.7815 192.625 57.384 192.625 64.5294L192.625 152.376C192.625 159.521 188.813 166.124 182.625 169.696L106.547 213.619C100.359 217.192 92.7355 217.192 86.5474 213.619L10.4702 169.696C4.28219 166.124 0.470208 159.521 0.470209 152.376L0.470208 64.5294Z\"\n            fill={fill}\n        />\n    </svg>\n);\n\nexport default ShapeHexagon;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\n\nconst ShapeSquare = ({ width = '70%', height = '70%', fill }) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 203 203\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <rect\n            y=\"203\"\n            width=\"203\"\n            height=\"203\"\n            rx=\"30\"\n            transform=\"rotate(-90 0 203)\"\n            fill={fill}\n        />\n    </svg>\n);\n\nexport default ShapeSquare;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\n\nconst ShapeTriangle = ({ width = '70%', height = '70%', fill }) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 204 243\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path\n            d=\"M15.6811 149.331C-4.67581 136.361 -4.67583 106.639 15.6811 93.669L153.018 6.16625C174.986 -7.83051 203.75 7.94909 203.75 33.9973L203.75 209.003C203.75 235.051 174.986 250.831 153.018 236.834L15.6811 149.331Z\"\n            fill={fill}\n        />\n    </svg>\n);\n\nexport default ShapeTriangle;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport React from 'react';\n\nconst ShapeRectangle = ({ width = '70%', height = '70%', fill }) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 165 242\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <rect\n            y=\"242\"\n            width=\"242\"\n            height=\"165\"\n            rx=\"30\"\n            transform=\"rotate(-90 0 242)\"\n            fill={fill}\n        />\n    </svg>\n);\n\nexport default ShapeRectangle;\n","/* eslint-disable no-unreachable */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport Icon from '@ant-design/icons';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport Leave_Icon from '../../assets/images/game_dir_leave.png';\nimport Home_Icon from '../../assets/images/game_dir_home.png';\nimport Logo from '../../assets/images/dashboard_icon.png';\nimport CustomModal from '../../components/CustomModal';\n\nimport ShapeCircle from '../../components/ShapeCircle';\nimport ShapeHexagon from '../../components/ShapeHexagon';\nimport ShapeSquare from '../../components/ShapeSquare';\nimport ShapeTriangle from '../../components/ShapeTriangle';\nimport ShapeRectangle from '../../components/ShapeRectangle';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst Game2Moni = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // 提供查看[使用者], [關卡]所需資訊。store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // 顯示”當前關卡“各階段警示心率的值\n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // 產生的不重複配對碼\n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // 輸入的配對碼\n\n    //\n    /// 針對中風復健新增的內容\n    ////\n    /////\n    const [open, setOpen] = useState(false);\n    //\n    ///\n    ////\n    /////\n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App 端連線後，會將 pairId 設成 null\n                // 藉由監聽是否為 null，判斷是否連上\n                // 若連上更新 record 的 [isAppConnected] 為 true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('配對成功，您可以前往監視畫面了！');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '即將離開！',\n                icon: <ExclamationCircleOutlined />,\n                content: '將刪除所選資訊',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goGameDirect = async () => {\n        navigate(ROUTE_PATH.game1_direct);\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '有內容沒有完成...',\n                content: '請填寫好騎乘者資訊以及關卡資訊',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '即將產生配對碼！',\n            icon: <ExclamationCircleOutlined />,\n            content: '資料一旦輸入將無法進行修改，請確認無誤！',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '配對碼已生成！請在時間內進行配對！' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('配對碼有誤或非本次記錄的配對碼');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('連結過期，請重新選擇！', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"手動輸入配對碼\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                我要配對\n            </Button> */}\n        </div>\n    );\n\n    ///\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        console.log(e);\n    };\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.leftContainer}>\n                <ShapeHexagon fill=\"#000000\" />\n                <ShapeRectangle fill=\"#000000\" />\n                <ShapeTriangle fill=\"#000000\" />\n                <ShapeSquare fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeHexagon fill=\"#000000\" />\n                <ShapeRectangle fill=\"#000000\" />\n                <ShapeTriangle fill=\"#000000\" />\n                <ShapeSquare fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n                <ShapeHexagon fill=\"#000000\" />\n                <ShapeRectangle fill=\"#000000\" />\n                <ShapeTriangle fill=\"#000000\" />\n                <ShapeSquare fill=\"#000000\" />\n                <ShapeCircle fill=\"#000000\" />\n            </div>\n            <div className={styles.rightContainer}>\n                <section>\n                    <caption>計時</caption>\n                    <div className={styles.contentTime}>1:59</div>\n                </section>\n                <section>\n                    <caption>分數</caption>\n                    <div className={styles.contentScore}>5</div>\n                </section>\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Logo})`,\n                        width: '100%',\n                        height: 111,\n                        flexGrow: 1,\n                        marginTop: '30%',\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div\n                    onClick={goGameDirect}\n                    style={{\n                        background: `url(${Leave_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                <div\n                    onClick={goDashboard}\n                    style={{\n                        background: `url(${Home_Icon})`,\n                        width: '95%',\n                        height: 76,\n                        backgroundSize: '100%',\n                        backgroundRepeat: 'no-repeat',\n                    }}\n                />\n            </div>\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"資料讀取中...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '一';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '二';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '三';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            第{phase}階段：{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                （超出 {overVal}％）\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default Game2Moni;\n","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { ROUTE_PATH, ROLES } from '../constants/';\n\nimport ProtectedRoutes from './ProtectedRoutes';\nimport SignIn from '../layouts/SignIn';\nimport AdminDashboard from '../layouts/AdminDashboard';\nimport Missing from '../layouts/Missing';\nimport Unauthorized from '../layouts/Unauthorized';\nimport PrepareWorkout from '../layouts/PrepareWorkout';\nimport MonitoringWorkout from '../layouts/MonitoringWorkout';\nimport UserList from '../layouts/UserList';\nimport DifficulityList from '../layouts/DifficulityList';\nimport FinishedWorkout from '../layouts/FinishedWorkout';\nimport RecordList from '../layouts/RecordList';\nimport TrainingWeekRecord from '../layouts/TrainingWeekRecord';\nimport PersonnelInfo from '../layouts/PersonnelInfo';\nimport Game1Direct from '../layouts/Game1Direct';\nimport Game2Direct from '../layouts/Game2Direct';\nimport Game3Direct from '../layouts/Game3Direct';\nimport Game1Moni from '../layouts/Game1Moni';\nimport Game2Moni from '../layouts/Game2Moni';\n\nconst AppRoutes = () => {\n    return (\n        <Routes>\n            <Route\n                path={ROUTE_PATH.home}\n                element={<Navigate replace to={ROUTE_PATH.sign_in} />}\n            />\n            <Route path={ROUTE_PATH.sign_in} element={<SignIn />} />\n            <Route path={ROUTE_PATH.unauthorized} element={<Unauthorized />} />\n\n            {/* only Admin can visit */}\n            <Route element={<ProtectedRoutes allowedRoles={[ROLES.Admin]} />}>\n                <Route\n                    path={ROUTE_PATH.admin_dashbaord}\n                    element={<AdminDashboard />}\n                />\n                <Route\n                    path={ROUTE_PATH.prepare_workout}\n                    element={<PrepareWorkout />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.monitoring_workout}/:recordId`}\n                    element={<MonitoringWorkout />}\n                />\n                <Route path={ROUTE_PATH.user_list} element={<UserList />} />\n                <Route\n                    path={`${ROUTE_PATH.record_list}/:userId`}\n                    element={<RecordList />}\n                />\n                <Route\n                    path={ROUTE_PATH.difficulty_list}\n                    element={<DifficulityList />}\n                />\n                <Route\n                    path={ROUTE_PATH.personnel_info}\n                    element={<PersonnelInfo />}\n                />\n                <Route\n                    path={ROUTE_PATH.game1_direct}\n                    element={<Game1Direct />}\n                />\n                <Route\n                    path={ROUTE_PATH.game2_direct}\n                    element={<Game2Direct />}\n                />\n                <Route\n                    path={ROUTE_PATH.game3_direct}\n                    element={<Game3Direct />}\n                />\n                <Route\n                    path={ROUTE_PATH.game1_monitoring}\n                    element={<Game1Moni />}\n                />\n                <Route\n                    path={ROUTE_PATH.game2_monitoring}\n                    element={<Game2Moni />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.finsished_workout}/:recordId`}\n                    element={<FinishedWorkout />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.training_week_record}/:userId`}\n                    element={<TrainingWeekRecord />}\n                />\n            </Route>\n\n            {/* catch all */}\n            <Route path=\"*\" element={<Missing />} />\n        </Routes>\n    );\n};\n\nexport default AppRoutes;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport { ConfigProvider } from 'antd';\nimport 'moment/locale/zh-tw';\nimport locale from 'antd/lib/locale/zh_TW';\nimport React, { useEffect, useState } from 'react';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport _ from '../../util/helper';\n// import moment from 'moment';\n\n// import styles from './styles.module.scss';\nimport 'antd/dist/antd.css';\nimport '@ant-design/flowchart/dist/index.css';\n\n/*\n    expect: \n        ConfigProvider\n*/\n\nconst AppProvider = ({ children }) => {\n    const { dispatch } = useStore();\n    const [initializedDone, setInitializedDone] = useState(false);\n\n    useEffect(() => {\n        attempLogin();\n\n        // window.addEventListener('beforeunload', beforeunloadListener);\n        // window.addEventListener('visibilitychange', visibilitychangeListener);\n        // return () => {\n        //     window.removeEventListener(\n        //         'beforeunload',\n        //         visibilitychangeListener,\n        //     );\n        // };\n    }, []);\n\n    const beforeunloadListener = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: SET_AUTH,\n            payload: {\n                isValid: false,\n                roles: [],\n            },\n        });\n    };\n\n    const visibilitychangeListener = (e) => {\n        if (document.visibilityState == 'hidden') {\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: false,\n                    roles: [],\n                },\n            });\n        }\n    };\n\n    const attempLogin = () => {\n        // console.log('executing attemp login');\n        // const expiredIn = window.localStorage.getItem(\n        //     'inventory-system-expired-in',\n        // );\n        setInitializedDone(true);\n\n        // Example Down Below\n        // if (_.isNullOrUndefined(expiredIn)) {\n        //     setInitializedDone(true);\n        //     return;\n        // }\n        // if (moment(expiredIn).endOf('day').isSameOrAfter(moment())) {\n        //     dispatch({\n        //         type: SET_AUTH,\n        //         payload: {\n        //             isValid: true,\n        //             roles: [5051],\n        //         },\n        //     });\n        // }\n        // setInitializedDone(true);\n    };\n\n    if (!initializedDone) {\n        return null;\n    }\n\n    return <ConfigProvider locale={locale}>{children}</ConfigProvider>;\n};\n\nexport default AppProvider;\n\n// Example Down Below\n\n// /* eslint-disable react/prop-types */\n// import React from 'react';\n// import { ConfigProvider } from 'antd';\n// import 'moment/locale/zh-tw';\n// import locale from 'antd/lib/locale/zh_TW';\n\n// // import styles from './styles.module.scss';\n\n// const App = ({ children }) => (\n//     <ConfigProvider locale={locale}>{children}</ConfigProvider>\n// );\n\n// export default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './global.scss';\n\nimport { StoreProvider } from './store';\nimport AppRoutes from './routes';\nimport AppProvider from './layouts/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <StoreProvider>\n            <BrowserRouter>\n                <AppProvider>\n                    {/* <Routes>\n                        <Route path=\"*\" element={<AppRoutes />} />\n                    </Routes> */}\n                    <AppRoutes />\n                </AppProvider>\n            </BrowserRouter>\n        </StoreProvider>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2UvPo\",\"innerContainer\":\"styles_innerContainer__1YRMZ\",\"grid_wrapper\":\"styles_grid_wrapper__pSIXT\",\"name\":\"styles_name__10Kxd\",\"birth\":\"styles_birth__VlUxy\",\"age\":\"styles_age__2BoZ_\",\"height\":\"styles_height__27lvh\",\"weight\":\"styles_weight__3_VGQ\",\"id\":\"styles_id__zeFhB\",\"record\":\"styles_record__3W6HP\",\"cst_btn\":\"styles_cst_btn__IfO0Y\",\"modal_btn\":\"styles_modal_btn__3TSD2\",\"pairIdWrapper\":\"styles_pairIdWrapper__UeBCJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2O6lW\",\"glass\":\"styles_glass__3MZ6q\",\"col\":\"styles_col__3dx1b\",\"mainCol\":\"styles_mainCol__2K9mE\",\"col1\":\"styles_col1__1e9Hq\",\"col2\":\"styles_col2__2sM5V\",\"col3\":\"styles_col3__ZFdLr\",\"unit\":\"styles_unit__2gnSy\",\"stopWatchWrapper\":\"styles_stopWatchWrapper__YtDaA\",\"difficulty\":\"styles_difficulty__27-NT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3NK8e\",\"innerContainer\":\"styles_innerContainer__1fJ7q\",\"item_btn\":\"styles_item_btn__rj0RY\",\"cst_btn\":\"styles_cst_btn__2QBYH\",\"modal_btn\":\"styles_modal_btn__1xTXi\",\"pairIdWrapper\":\"styles_pairIdWrapper__RnU7L\"};"],"sourceRoot":""}